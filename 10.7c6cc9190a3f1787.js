(self.webpackChunkpages=self.webpackChunkpages||[]).push([[10],{3285:(ht,fe,_)=>{"use strict";_.d(fe,{L:()=>re});var m=_(7165),e=_(5879);let pe=(()=>{class w{constructor(){this.dependences={[m.B2.LOGIN]:null,[m.B2.HOME]:null,[m.B2.SETTINGS]:m.B2.HOME,[m.B2.SCRIPT]:m.B2.HOME,[m.B2.SCRIPT_FORUM]:m.B2.SCRIPT,[m.B2.SCRIPT_USER]:m.B2.SCRIPT,[m.B2.SCRIPT_SETTINGS]:[m.B2.SCRIPT_USER,m.B2.SCRIPT_FORUM],[m.B2.SCRIPT_DEV]:m.B2.SCRIPT,[m.B2.SCRIPT_DEV_SETTINGS]:m.B2.SCRIPT_DEV,[m.B2.UPLOAD]:m.B2.HOME,[m.B2.ADMIN]:m.B2.HOME},this.names={[m.B2.LOGIN]:"Login",[m.B2.HOME]:"Home",[m.B2.SETTINGS]:"Notifiche",[m.B2.SCRIPT]:"Script",[m.B2.SCRIPT_FORUM]:"Forum",[m.B2.SCRIPT_USER]:"Utenti",[m.B2.SCRIPT_SETTINGS]:"Impostazioni",[m.B2.SCRIPT_DEV]:"Sviluppo",[m.B2.SCRIPT_DEV_SETTINGS]:"Impostazioni",[m.B2.UPLOAD]:"Upload",[m.B2.ADMIN]:"Amministrazione"}}createPathList(M,k=[]){const F=(U,ve)=>{U.unshift({name:this.names[ve]||"",path:ve})},G=U=>this.dependences.hasOwnProperty(U)?this.dependences[U]instanceof Array?this.dependences[U].includes(k[0])?k.shift():this.dependences[U][0]:this.dependences[U]:null;let Ze=[{name:this.names[M]||"",path:""}],Te=G(M);for(;Te;)F(Ze,Te),Te=G(Te);return Ze}}return w.\u0275fac=function(M){return new(M||w)},w.\u0275prov=e.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();var Fe=_(8109),S=_(6814);function he(w,W){if(1&w&&e._UZ(0,"a",8),2&w){const M=e.oxw().$implicit;e.Q6J("routerLink",M.path)("innerText",M.name)}}function Ue(w,W){if(1&w&&e._UZ(0,"span",9),2&w){const M=e.oxw().$implicit;e.Q6J("innerText",M.name)}}const Be=function(w){return{active:w}};function T(w,W){if(1&w&&(e.TgZ(0,"li",5),e.YNc(1,he,1,2,"a",6),e.YNc(2,Ue,1,1,"ng-template",null,7,e.W1O),e.qZA()),2&w){const M=W.last,k=e.MAs(3);e.Q6J("ngClass",e.VKq(4,Be,M)),e.uIk("aria-current",M?"page":null),e.xp6(1),e.Q6J("ngIf",!M)("ngIfElse",k)}}let re=(()=>{class w{constructor(M,k){this.breadcrumbService=M,this.router=k,this.pageTitle="",this.url="",this.nodes=[],this.breadcrumbs=[]}ngOnInit(){this.url||(this.url=this.router.url),this.breadcrumbs=this.breadcrumbService.createPathList(this.url,this.nodes)}}return w.\u0275fac=function(M){return new(M||w)(e.Y36(pe),e.Y36(Fe.F0))},w.\u0275cmp=e.Xpm({type:w,selectors:[["app-breadcrumb"]],inputs:{pageTitle:"pageTitle",url:"url",nodes:"nodes"},decls:5,vars:2,consts:[[1,"container-fluid","px-md-1","d-flex","flex-column","flex-md-row","align-items-md-center"],[1,"h3","fw-light","mb-0","lh-1","fv-small-caps","pb-1",3,"innerText"],["aria-label","breadcrumb",1,"ms-md-auto","mt-1"],[1,"breadcrumb","mb-0","justify-content-md-end"],["class","breadcrumb-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"breadcrumb-item",3,"ngClass"],[3,"routerLink","innerText",4,"ngIf","ngIfElse"],["lastItem",""],[3,"routerLink","innerText"],[3,"innerText"]],template:function(M,k){1&M&&(e.TgZ(0,"div",0),e._UZ(1,"h2",1),e.TgZ(2,"nav",2)(3,"ol",3),e.YNc(4,T,4,6,"li",4),e.qZA()()()),2&M&&(e.xp6(1),e.Q6J("innerText",k.pageTitle),e.xp6(3),e.Q6J("ngForOf",k.breadcrumbs))},dependencies:[S.mk,S.sg,S.O5,Fe.rH],styles:[".container-fluid[_ngcontent-%COMP%]{margin-bottom:.75rem}@media (min-width: 960px){.container-fluid[_ngcontent-%COMP%]{margin-top:.5rem}}"]}),w})()},9090:(ht,fe,_)=>{"use strict";_.d(fe,{w:()=>Fe});var m=_(6814),e=_(8109),pe=_(5879);let Fe=(()=>{class S{}return S.\u0275fac=function(Ue){return new(Ue||S)},S.\u0275mod=pe.oAB({type:S}),S.\u0275inj=pe.cJS({imports:[m.ez,e.Bz]}),S})()},3010:(ht,fe,_)=>{"use strict";_.r(fe),_.d(fe,{UploadModule:()=>Aa});var m=_(6814),e=_(5879);let pe=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[m.ez]}),i})();var Fe=_(4243),S=_(9090),he=_(342),Ue=_(5063);let Be=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[m.ez]}),i})();var T=_(6223);let re=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[m.ez]}),i})(),w=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[m.ez]}),i})(),W=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[m.ez,T.u5]}),i})();var M=_(7535),k=_(4610),F=_(3946),G=_(8109);const Ze={suffixAgo:"fa",suffixFromNow:"da ora",seconds:"meno di un minuto",minute:"circa un minuto",minutes:"%d minuti",hour:"circa un'ora",hours:"circa %d ore",day:"un giorno",days:"%d giorni",month:"circa un mese",months:"%d mesi",year:"circa un anno",years:"%d anni"};var Te=_(9360),U=_(564);function ve(i,s=1/0,t){return s=(s||0)<1?1/0:s,(0,Te.e)((n,o)=>(0,U.p)(n,o,i,s,void 0,!0,t))}var We=_(836),ke=_(2096),Le=_(4825),Re=_(6232),O=_(8645),ae=_(2181);let Ne=(()=>{class i{constructor(){this.changes=new O.x}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})();const Zt=function(i){const s=Date.now(),t=Math.round(Math.abs(s-i)/1e3),n=i<s?"ago":"from now",[o,r]=t<60?[Math.round(t),"second"]:t<3600?[Math.round(t/60),"minute"]:t<86400?[Math.round(t/3600),"hour"]:t<604800?[Math.round(t/86400),"day"]:t<2592e3?[Math.round(t/604800),"week"]:t<31536e3?[Math.round(t/2592e3),"month"]:[Math.round(t/31536e3),"year"];return{value:o,unit:r,suffix:n}};class Oe{}let Pe=(()=>{class i extends Oe{format(t){const{suffix:n,value:o,unit:r}=Zt(t);return this.parse(o,r,n)}parse(t,n,o){return 1!==t&&(n+="s"),t+" "+n+" "+o}}return i.\u0275fac=function(){let s;return function(n){return(s||(s=e.n5z(i)))(n||i)}}(),i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),gn=(()=>{class i extends Oe{constructor(t){super(),this.intl=t}format(t){const{suffix:n,value:o,unit:r}=Zt(t);return this.parse(o,r,n,Date.now(),t)}parse(t,n,o,r,a){"week"===n&&!this.intl.strings.week&&!this.intl.strings.weeks&&(t=Math.round(Math.abs(r-a)/864e5),n="day");const d=this.normalizeFn(t,r-a,this.intl.strings.numbers),u=[];return"ago"===o&&this.intl.strings.prefixAgo&&u.push(d(this.intl.strings.prefixAgo)),"from now"===o&&this.intl.strings.prefixFromNow&&u.push(d(this.intl.strings.prefixFromNow)),u.push(d(t>1?this.intl.strings[n+"s"]||this.intl.strings[n]||"%d "+n:this.intl.strings[n]||this.intl.strings[n+"s"]||"%d "+n)),"ago"===o&&this.intl.strings.suffixAgo&&u.push(d(this.intl.strings.suffixAgo)),"from now"===o&&this.intl.strings.suffixFromNow&&u.push(d(this.intl.strings.suffixFromNow)),u.join("string"==typeof this.intl.strings.wordSeparator?this.intl.strings.wordSeparator:" ")}normalizeNumber(t,n){return t&&10===t.length?String(n).split("").map(o=>o.match(/^[0-9]$/)?t[parseInt(o,10)]:o).join(""):String(n)}normalizeFn(t,n,o){return r=>"function"==typeof r?r(t,n).replace(/%d/g,this.normalizeNumber(o,t)):r.replace(/%d/g,this.normalizeNumber(o,t))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(Ne))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})();class ge{}let kt=(()=>{class i extends ge{tick(t){return(0,ke.of)(0).pipe(ve(()=>{const n=Date.now(),o=Math.round(Math.abs(n-t)/1e3),r=o<60?1e3:o<3600?6e4:o<86400?36e5:0;return r?(0,Le.H)(r):(0,Re.c)()}),(0,We.T)(1))}}return i.\u0275fac=function(){let s;return function(n){return(s||(s=e.n5z(i)))(n||i)}}(),i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),Lt=(()=>{class i{get date(){return this._date}set date(t){if(this._date=function $e(i){const s=new Date(i);if(!Number.isNaN(s.valueOf()))return s;const t=String(i).match(/\d+/g);if(null===t||t.length<=2)return s;{const[n,o,...r]=t.map(a=>parseInt(a,10));return new Date(Date.UTC(n,o-1,...r))}}(t).valueOf(),!this._date)throw new SyntaxError(`Wrong parameter in TimeagoDirective. Expected a valid date, received: ${t}`);this.clockSubscription&&(this.clockSubscription.unsubscribe(),this.clockSubscription=void 0),this.clockSubscription=this.clock.tick(this.date).pipe((0,ae.h)(()=>this.live,this)).subscribe(()=>this.stateChanges.next())}get live(){return this._live}set live(t){this._live=function Me(i){return null!=i&&"false"!=`${i}`}(t)}constructor(t,n,o,r,a){this.cd=n,this.clock=a,this.stateChanges=new O.x,this._live=!0,t&&(this.intlSubscription=t.changes.subscribe(()=>this.stateChanges.next())),this.stateChanges.subscribe(()=>{this.setContent(r.nativeElement,o.format(this.date)),this.cd.markForCheck()})}ngOnChanges(){this.stateChanges.next()}setContent(t,n){!function Ke(i){return typeof i<"u"&&null!==i}(t.textContent)?t.data=n:t.textContent=n}ngOnDestroy(){this.intlSubscription&&(this.intlSubscription.unsubscribe(),this.intlSubscription=void 0),this.clockSubscription&&(this.clockSubscription.unsubscribe(),this.clockSubscription=void 0),this.stateChanges.complete()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Ne,8),e.Y36(e.sBO),e.Y36(Oe),e.Y36(e.SBq),e.Y36(ge))},i.\u0275dir=e.lG2({type:i,selectors:[["","timeago",""]],inputs:{date:"date",live:"live"},exportAs:["timeago"],features:[e.TTD]}),i})(),me=(()=>{class i{static forRoot(t={}){return{ngModule:i,providers:[t.clock||{provide:ge,useClass:kt},t.intl||[],t.formatter||{provide:Oe,useClass:Pe}]}}static forChild(t={}){return{ngModule:i,providers:[t.clock||{provide:ge,useClass:kt},t.intl||[],t.formatter||{provide:Oe,useClass:Pe}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({}),i})(),L=(()=>{class i extends ge{constructor(){super(...arguments),this.minute=60,this.hour=60*this.minute,this.day=24*this.hour}tick(t){return(0,ke.of)(0).pipe(ve(()=>{const n=Date.now(),o=Math.round(Math.abs(n-t)/1e3),r=o<this.minute||o<this.hour?1e3*this.minute:o<this.day?1e3*this.hour:0;return r?(0,Le.H)(r):Re.E}),(0,We.T)(1))}}return i.\u0275fac=function(){let s;return function(n){return(s||(s=e.n5z(i)))(n||i)}}(),i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})();var H=_(3038),q=_(5861),v=_(5172),A=_(9054),Ee=_(5983);let ze=(()=>{class i{constructor(t){this.uploadCacheService=t,this.folderPath=[]}set currentFolderPath(t){this.folderPath=t}removeEntitiesCallback(t,n,o){const r=!(0,A.ok)(t,this.folderPath),a=this.uploadCacheService.removeEntities(t,n,o);return{success:a.length>0,...r?{}:{payload:{list:a}}}}addEntitiesCallback(t,n,o){const r=!(0,A.ok)(t,this.folderPath);return{success:this.uploadCacheService.addEntities(t,n,o),...r?{}:{payload:{list:n}}}}renameEntityCallback(t,n,o){if(!this.uploadCacheService.getItem(t))return{success:!1};this.uploadCacheService.removeEntities(t,n.name,n.type);const a=this.generateEntityFromUrl(o.url,n.type,n.type===v.VC.FILE?{size:o.size,time:o.time}:{});return this.uploadCacheService.addEntities(t,{...a},a.type),{success:!0,...(0,A.ok)(t,this.folderPath)?{payload:{list:[a]}}:{}}}moveEntitiesCallback(t){let n=[],o=[];for(const r of t)r.type===v.VC.FILE?n.push((0,A.zO)(r.data.url,{size:r.data.size,time:r.data.time})):o.push((0,A.lY)(r.data.url));return{success:!0,payload:{list:{files:n,folders:o}}}}generateEntityFromUrl(t,n,o={}){return n===v.VC.FILE?(0,A.zO)(t,o):(0,A.lY)(t)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(Ee.B))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var j=_(3705),B=_(4464),Rt=_(4887),K=_(5487),Xe=_(9829),I=function(i){return i.Drag="drag",i.Move="move",i.Resize="resize",i.Pinch="pinch",i}(I||{}),je=_(3019),Nt=_(2438);function gt(i,s){return i/100*s}let Ht=(()=>{class i{crop(t,n,o,r){const a=this.getImagePosition(t,n,o,r),d=a.x2-a.x1,u=a.y2-a.y1,f=document.createElement("canvas");f.width=d,f.height=u;const x=f.getContext("2d");if(!x)return null;null!=r.backgroundColor&&(x.fillStyle=r.backgroundColor,x.fillRect(0,0,d,u));const b=(r.transform.scale||1)*(r.transform.flipH?-1:1),P=(r.transform.scale||1)*(r.transform.flipV?-1:1),{translateH:Y,translateV:V}=this.getCanvasTranslate(t,n,r),z=n.transformed;x.setTransform(b,0,0,P,z.size.width/2+Y,z.size.height/2+V),x.translate(-a.x1/b,-a.y1/P),x.rotate((r.transform.rotate||0)*Math.PI/180),x.drawImage(z.image,-z.size.width/2,-z.size.height/2);const E={width:d,height:u,imagePosition:a,cropperPosition:{...o}};r.containWithinAspectRatio&&(E.offsetImagePosition=this.getOffsetImagePosition(t,n,o,r));const Ge=this.getResizeRatio(d,u,r);return 1!==Ge&&(E.width=Math.round(d*Ge),E.height=r.maintainAspectRatio?Math.round(E.width/r.aspectRatio):Math.round(u*Ge),function zt(i,s,t){const n=i.width,o=i.height,r=n/(s=Math.round(s)),a=o/(t=Math.round(t)),d=Math.ceil(r/2),u=Math.ceil(a/2),f=i.getContext("2d");if(f){const x=f.getImageData(0,0,n,o),b=f.createImageData(s,t),P=x.data,Y=b.data;for(let V=0;V<t;V++)for(let z=0;z<s;z++){const E=4*(z+V*s),Ge=V*a;let se=0,De=0,Dt=0,zi=0,Hi=0,qi=0,Ji=0;const Da=Math.floor(z*r),Fa=Math.floor(V*a);let $n=Math.ceil((z+1)*r),Xn=Math.ceil((V+1)*a);$n=Math.min($n,n),Xn=Math.min(Xn,o);for(let hn=Fa;hn<Xn;hn++){const Qi=Math.abs(Ge-hn)/u,Ua=z*r,Za=Qi*Qi;for(let un=Da;un<$n;un++){const Yi=Math.abs(Ua-un)/d,dt=Math.sqrt(Za+Yi*Yi);if(dt>=1)continue;se=2*dt*dt*dt-3*dt*dt+1;const pt=4*(un+hn*n);Ji+=se*P[pt+3],Dt+=se,P[pt+3]<255&&(se=se*P[pt+3]/250),zi+=se*P[pt],Hi+=se*P[pt+1],qi+=se*P[pt+2],De+=se}}Y[E]=zi/De,Y[E+1]=Hi/De,Y[E+2]=qi/De,Y[E+3]=Ji/Dt}i.width=s,i.height=t,f.putImageData(b,0,0)}}(f,E.width,E.height)),E.base64=f.toDataURL("image/"+r.format,this.getQuality(r)),E}getCanvasTranslate(t,n,o){if("px"===o.transform.translateUnit){const r=this.getRatio(t,n);return{translateH:(o.transform.translateH||0)*r,translateV:(o.transform.translateV||0)*r}}return{translateH:o.transform.translateH?gt(o.transform.translateH,n.transformed.size.width):0,translateV:o.transform.translateV?gt(o.transform.translateV,n.transformed.size.height):0}}getRatio(t,n){return n.transformed.size.width/t.nativeElement.offsetWidth}getImagePosition(t,n,o,r){const a=this.getRatio(t,n),d={x1:Math.round(o.x1*a),y1:Math.round(o.y1*a),x2:Math.round(o.x2*a),y2:Math.round(o.y2*a)};return r.containWithinAspectRatio||(d.x1=Math.max(d.x1,0),d.y1=Math.max(d.y1,0),d.x2=Math.min(d.x2,n.transformed.size.width),d.y2=Math.min(d.y2,n.transformed.size.height)),d}getOffsetImagePosition(t,n,o,r){const u=n.transformed.size.width/t.nativeElement.offsetWidth;let f,x;(r.canvasRotation+n.exifTransform.rotate)%2?(f=(n.transformed.size.width-n.original.size.height)/2,x=(n.transformed.size.height-n.original.size.width)/2):(f=(n.transformed.size.width-n.original.size.width)/2,x=(n.transformed.size.height-n.original.size.height)/2);const b={x1:Math.round(o.x1*u)-f,y1:Math.round(o.y1*u)-x,x2:Math.round(o.x2*u)-f,y2:Math.round(o.y2*u)-x};return r.containWithinAspectRatio||(b.x1=Math.max(b.x1,0),b.y1=Math.max(b.y1,0),b.x2=Math.min(b.x2,n.transformed.size.width),b.y2=Math.min(b.y2,n.transformed.size.height)),b}getResizeRatio(t,n,o){const r=o.resizeToWidth/t,a=o.resizeToHeight/n,d=new Array;o.resizeToWidth>0&&d.push(r),o.resizeToHeight>0&&d.push(a);const u=0===d.length?1:Math.min(...d);return u>1&&!o.onlyScaleDown?u:Math.min(u,1)}getQuality(t){return Math.min(1,Math.max(0,t.imageQuality/100))}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),qt=(()=>{class i{resetCropperPosition(t,n,o){if(!t?.nativeElement)return;const r=t.nativeElement;if(o.cropperStaticHeight&&o.cropperStaticWidth)n.x1=0,n.x2=r.offsetWidth>o.cropperStaticWidth?o.cropperStaticWidth:r.offsetWidth,n.y1=0,n.y2=r.offsetHeight>o.cropperStaticHeight?o.cropperStaticHeight:r.offsetHeight;else{const a=Math.min(o.cropperScaledMaxWidth,r.offsetWidth),d=Math.min(o.cropperScaledMaxHeight,r.offsetHeight);if(o.maintainAspectRatio)if(r.offsetWidth/o.aspectRatio<r.offsetHeight){n.x1=0,n.x2=a;const u=a/o.aspectRatio;n.y1=(r.offsetHeight-u)/2,n.y2=n.y1+u}else{n.y1=0,n.y2=d;const u=d*o.aspectRatio;n.x1=(r.offsetWidth-u)/2,n.x2=n.x1+u}else n.x1=0,n.x2=a,n.y1=0,n.y2=d}}move(t,n,o){const r=this.getClientX(t)-n.clientX,a=this.getClientY(t)-n.clientY;o.x1=n.x1+r,o.y1=n.y1+a,o.x2=n.x2+r,o.y2=n.y2+a}resize(t,n,o,r,a){const d=this.getClientX(t)-n.clientX,u=this.getClientY(t)-n.clientY;switch(n.position){case"left":o.x1=Math.min(Math.max(n.x1+d,o.x2-a.cropperScaledMaxWidth),o.x2-a.cropperScaledMinWidth);break;case"topleft":o.x1=Math.min(Math.max(n.x1+d,o.x2-a.cropperScaledMaxWidth),o.x2-a.cropperScaledMinWidth),o.y1=Math.min(Math.max(n.y1+u,o.y2-a.cropperScaledMaxHeight),o.y2-a.cropperScaledMinHeight);break;case"top":o.y1=Math.min(Math.max(n.y1+u,o.y2-a.cropperScaledMaxHeight),o.y2-a.cropperScaledMinHeight);break;case"topright":o.x2=Math.max(Math.min(n.x2+d,o.x1+a.cropperScaledMaxWidth),o.x1+a.cropperScaledMinWidth),o.y1=Math.min(Math.max(n.y1+u,o.y2-a.cropperScaledMaxHeight),o.y2-a.cropperScaledMinHeight);break;case"right":o.x2=Math.max(Math.min(n.x2+d,o.x1+a.cropperScaledMaxWidth),o.x1+a.cropperScaledMinWidth);break;case"bottomright":o.x2=Math.max(Math.min(n.x2+d,o.x1+a.cropperScaledMaxWidth),o.x1+a.cropperScaledMinWidth),o.y2=Math.max(Math.min(n.y2+u,o.y1+a.cropperScaledMaxHeight),o.y1+a.cropperScaledMinHeight);break;case"bottom":o.y2=Math.max(Math.min(n.y2+u,o.y1+a.cropperScaledMaxHeight),o.y1+a.cropperScaledMinHeight);break;case"bottomleft":o.x1=Math.min(Math.max(n.x1+d,o.x2-a.cropperScaledMaxWidth),o.x2-a.cropperScaledMinWidth),o.y2=Math.max(Math.min(n.y2+u,o.y1+a.cropperScaledMaxHeight),o.y1+a.cropperScaledMinHeight);break;case"center":const f=t.scale,x=Math.min(Math.max(a.cropperScaledMinWidth,Math.abs(n.x2-n.x1)*f),a.cropperScaledMaxWidth),b=Math.min(Math.max(a.cropperScaledMinHeight,Math.abs(n.y2-n.y1)*f),a.cropperScaledMaxHeight);o.x1=n.clientX-x/2,o.x2=n.clientX+x/2,o.y1=n.clientY-b/2,o.y2=n.clientY+b/2,o.x1<0?(o.x2-=o.x1,o.x1=0):o.x2>r.width&&(o.x1-=o.x2-r.width,o.x2=r.width),o.y1<0?(o.y2-=o.y1,o.y1=0):o.y2>r.height&&(o.y1-=o.y2-r.height,o.y2=r.height)}a.maintainAspectRatio&&this.checkAspectRatio(n.position,o,r,a)}checkAspectRatio(t,n,o,r){let a=0,d=0;switch(t){case"top":n.x2=n.x1+(n.y2-n.y1)*r.aspectRatio,a=Math.max(n.x2-o.width,0),d=Math.max(0-n.y1,0),(a>0||d>0)&&(n.x2-=d*r.aspectRatio>a?d*r.aspectRatio:a,n.y1+=d*r.aspectRatio>a?d:a/r.aspectRatio);break;case"bottom":n.x2=n.x1+(n.y2-n.y1)*r.aspectRatio,a=Math.max(n.x2-o.width,0),d=Math.max(n.y2-o.height,0),(a>0||d>0)&&(n.x2-=d*r.aspectRatio>a?d*r.aspectRatio:a,n.y2-=d*r.aspectRatio>a?d:a/r.aspectRatio);break;case"topleft":n.y1=n.y2-(n.x2-n.x1)/r.aspectRatio,a=Math.max(0-n.x1,0),d=Math.max(0-n.y1,0),(a>0||d>0)&&(n.x1+=d*r.aspectRatio>a?d*r.aspectRatio:a,n.y1+=d*r.aspectRatio>a?d:a/r.aspectRatio);break;case"topright":n.y1=n.y2-(n.x2-n.x1)/r.aspectRatio,a=Math.max(n.x2-o.width,0),d=Math.max(0-n.y1,0),(a>0||d>0)&&(n.x2-=d*r.aspectRatio>a?d*r.aspectRatio:a,n.y1+=d*r.aspectRatio>a?d:a/r.aspectRatio);break;case"right":case"bottomright":n.y2=n.y1+(n.x2-n.x1)/r.aspectRatio,a=Math.max(n.x2-o.width,0),d=Math.max(n.y2-o.height,0),(a>0||d>0)&&(n.x2-=d*r.aspectRatio>a?d*r.aspectRatio:a,n.y2-=d*r.aspectRatio>a?d:a/r.aspectRatio);break;case"left":case"bottomleft":n.y2=n.y1+(n.x2-n.x1)/r.aspectRatio,a=Math.max(0-n.x1,0),d=Math.max(n.y2-o.height,0),(a>0||d>0)&&(n.x1+=d*r.aspectRatio>a?d*r.aspectRatio:a,n.y2-=d*r.aspectRatio>a?d:a/r.aspectRatio);break;case"center":n.x2=n.x1+(n.y2-n.y1)*r.aspectRatio,n.y2=n.y1+(n.x2-n.x1)/r.aspectRatio;const u=Math.max(0-n.x1,0),f=Math.max(n.x2-o.width,0),x=Math.max(n.y2-o.height,0),b=Math.max(0-n.y1,0);(u>0||f>0||x>0||b>0)&&(n.x1+=x*r.aspectRatio>u?x*r.aspectRatio:u,n.x2-=b*r.aspectRatio>f?b*r.aspectRatio:f,n.y1+=b*r.aspectRatio>f?b:f/r.aspectRatio,n.y2-=x*r.aspectRatio>u?x:u/r.aspectRatio)}}getClientX(t){return t.touches?.[0].clientX||t.clientX||0}getClientY(t){return t.touches?.[0].clientY||t.clientY||0}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var et=_(9582),mt=_(6593);const vn=["wrapper"],Cn=["sourceImage"];function xn(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"img",4,5),e.NdJ("load",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.imageLoadedInView())})("mousedown",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.startMove(o,r.moveTypes.Drag))})("touchstart",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.startMove(o,r.moveTypes.Drag))}),e.qZA()}if(2&i){const t=e.oxw();e.Udp("visibility",t.imageVisible?"visible":"hidden")("transform",t.safeTransformStyle),e.ekj("ngx-ic-draggable",!t.disabled&&t.allowMoveImage),e.Q6J("src",t.safeImgDataUrl,e.LSH),e.uIk("alt",t.imageAltText)}}function bn(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"span",9),e.NdJ("mousedown",function(o){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(o,r.moveTypes.Resize,"topleft"))})("touchstart",function(o){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(o,r.moveTypes.Resize,"topleft"))}),e._UZ(2,"span",10),e.qZA(),e.TgZ(3,"span",11),e._UZ(4,"span",10),e.qZA(),e.TgZ(5,"span",12),e.NdJ("mousedown",function(o){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(o,r.moveTypes.Resize,"topright"))})("touchstart",function(o){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(o,r.moveTypes.Resize,"topright"))}),e._UZ(6,"span",10),e.qZA(),e.TgZ(7,"span",13),e._UZ(8,"span",10),e.qZA(),e.TgZ(9,"span",14),e.NdJ("mousedown",function(o){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(o,r.moveTypes.Resize,"bottomright"))})("touchstart",function(o){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(o,r.moveTypes.Resize,"bottomright"))}),e._UZ(10,"span",10),e.qZA(),e.TgZ(11,"span",15),e._UZ(12,"span",10),e.qZA(),e.TgZ(13,"span",16),e.NdJ("mousedown",function(o){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(o,r.moveTypes.Resize,"bottomleft"))})("touchstart",function(o){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(o,r.moveTypes.Resize,"bottomleft"))}),e._UZ(14,"span",10),e.qZA(),e.TgZ(15,"span",17),e._UZ(16,"span",10),e.qZA(),e.TgZ(17,"span",18),e.NdJ("mousedown",function(o){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(o,r.moveTypes.Resize,"top"))})("touchstart",function(o){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(o,r.moveTypes.Resize,"top"))}),e.qZA(),e.TgZ(18,"span",19),e.NdJ("mousedown",function(o){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(o,r.moveTypes.Resize,"right"))})("touchstart",function(o){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(o,r.moveTypes.Resize,"right"))}),e.qZA(),e.TgZ(19,"span",20),e.NdJ("mousedown",function(o){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(o,r.moveTypes.Resize,"bottom"))})("touchstart",function(o){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(o,r.moveTypes.Resize,"bottom"))}),e.qZA(),e.TgZ(20,"span",21),e.NdJ("mousedown",function(o){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(o,r.moveTypes.Resize,"left"))})("touchstart",function(o){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(o,r.moveTypes.Resize,"left"))}),e.qZA(),e.BQk()}}function yn(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",6),e.NdJ("keydown",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.keyboardAccess(o))}),e.TgZ(1,"div",7),e.NdJ("mousedown",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.startMove(o,r.moveTypes.Move))})("touchstart",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.startMove(o,r.moveTypes.Move))}),e.qZA(),e.YNc(2,bn,21,0,"ng-container",8),e.qZA()}if(2&i){const t=e.oxw();e.Udp("top",t.cropper.y1,"px")("left",t.cropper.x1,"px")("width",t.cropper.x2-t.cropper.x1,"px")("height",t.cropper.y2-t.cropper.y1,"px")("margin-left","center"===t.alignImage?t.marginLeft:null)("visibility",t.imageVisible?"visible":"hidden"),e.ekj("ngx-ic-round",t.roundCropper),e.xp6(2),e.Q6J("ngIf",!t.hideResizeSquares)}}let tt=(()=>{class i{constructor(t,n,o,r,a,d){this.cropService=t,this.cropperPositionService=n,this.loadImageService=o,this.sanitizer=r,this.cd=a,this.ngZone=d,this.Hammer=window?.Hammer||null,this.settings=new Xe.R,this.setImageMaxSizeRetries=0,this.resizedWhileHidden=!1,this.marginLeft="0px",this.maxSize={width:0,height:0},this.moveTypes=I,this.imageVisible=!1,this.imageAltText="",this.format=this.settings.format,this.transform={},this.maintainAspectRatio=this.settings.maintainAspectRatio,this.aspectRatio=this.settings.aspectRatio,this.resetCropOnAspectRatioChange=this.settings.resetCropOnAspectRatioChange,this.resizeToWidth=this.settings.resizeToWidth,this.resizeToHeight=this.settings.resizeToHeight,this.cropperMinWidth=this.settings.cropperMinWidth,this.cropperMinHeight=this.settings.cropperMinHeight,this.cropperMaxHeight=this.settings.cropperMaxHeight,this.cropperMaxWidth=this.settings.cropperMaxWidth,this.cropperStaticWidth=this.settings.cropperStaticWidth,this.cropperStaticHeight=this.settings.cropperStaticHeight,this.canvasRotation=this.settings.canvasRotation,this.initialStepSize=this.settings.initialStepSize,this.roundCropper=this.settings.roundCropper,this.onlyScaleDown=this.settings.onlyScaleDown,this.imageQuality=this.settings.imageQuality,this.autoCrop=this.settings.autoCrop,this.backgroundColor=this.settings.backgroundColor,this.containWithinAspectRatio=this.settings.containWithinAspectRatio,this.hideResizeSquares=this.settings.hideResizeSquares,this.allowMoveImage=!1,this.cropper={x1:-100,y1:-100,x2:1e4,y2:1e4},this.alignImage=this.settings.alignImage,this.disabled=!1,this.hidden=!1,this.imageCropped=new e.vpe,this.startCropImage=new e.vpe,this.imageLoaded=new e.vpe,this.cropperReady=new e.vpe,this.loadImageFailed=new e.vpe,this.transformChange=new e.vpe,this.reset()}ngOnChanges(t){this.onChangesUpdateSettings(t),this.onChangesInputImage(t),this.loadedImage?.original.image.complete&&(t.containWithinAspectRatio||t.canvasRotation)&&this.loadImageService.transformLoadedImage(this.loadedImage,this.settings).then(n=>this.setLoadedImage(n)).catch(n=>this.loadImageError(n)),(t.cropper||t.maintainAspectRatio||t.aspectRatio)&&(this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize(),!this.maintainAspectRatio||!this.resetCropOnAspectRatioChange&&this.aspectRatioIsCorrect()||!t.maintainAspectRatio&&!t.aspectRatio?t.cropper&&(this.checkCropperPosition(!1),this.doAutoCrop()):this.resetCropperPosition(),this.cd.markForCheck()),t.transform&&(this.transform=this.transform||{},this.setCssTransform(),this.doAutoCrop(),this.cd.markForCheck()),t.hidden&&this.resizedWhileHidden&&!this.hidden&&setTimeout(()=>{this.onResize(),this.resizedWhileHidden=!1})}onChangesUpdateSettings(t){this.settings.setOptionsFromChanges(t),this.settings.cropperStaticHeight&&this.settings.cropperStaticWidth&&this.settings.setOptions({hideResizeSquares:!0,cropperMinWidth:this.settings.cropperStaticWidth,cropperMinHeight:this.settings.cropperStaticHeight,cropperMaxHeight:this.settings.cropperStaticHeight,cropperMaxWidth:this.settings.cropperStaticWidth,maintainAspectRatio:!1})}onChangesInputImage(t){(t.imageChangedEvent||t.imageURL||t.imageBase64||t.imageFile)&&this.reset(),t.imageChangedEvent&&this.isValidImageChangedEvent()&&this.loadImageFile(this.imageChangedEvent.target.files[0]),t.imageURL&&this.imageURL&&this.loadImageFromURL(this.imageURL),t.imageBase64&&this.imageBase64&&this.loadBase64Image(this.imageBase64),t.imageFile&&this.imageFile&&this.loadImageFile(this.imageFile)}isValidImageChangedEvent(){return this.imageChangedEvent?.target?.files?.length>0}setCssTransform(){const t=this.transform?.translateUnit||"%";this.safeTransformStyle=this.sanitizer.bypassSecurityTrustStyle(`translate(${this.transform.translateH||0}${t}, ${this.transform.translateV||0}${t}) scaleX(`+(this.transform.scale||1)*(this.transform.flipH?-1:1)+") scaleY("+(this.transform.scale||1)*(this.transform.flipV?-1:1)+") rotate("+(this.transform.rotate||0)+"deg)")}ngOnInit(){this.settings.stepSize=this.initialStepSize,this.ngZone.runOutsideAngular(()=>{this.activatePinchGesture(),this.mouseAndTouchmoveSubscription=(0,je.T)((0,Nt.R)(document,"mousemove"),(0,Nt.R)(document,"touchmove")).subscribe(this.moveImg.bind(this))})}reset(){this.imageVisible=!1,this.loadedImage=void 0,this.safeImgDataUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",this.moveStart={active:!1,type:null,position:null,x1:0,y1:0,x2:0,y2:0,clientX:0,clientY:0},this.maxSize={width:0,height:0},this.cropper.x1=-100,this.cropper.y1=-100,this.cropper.x2=1e4,this.cropper.y2=1e4}loadImageFile(t){this.loadImageService.loadImageFile(t,this.settings).then(n=>this.setLoadedImage(n)).catch(n=>this.loadImageError(n))}loadBase64Image(t){this.loadImageService.loadBase64Image(t,this.settings).then(n=>this.setLoadedImage(n)).catch(n=>this.loadImageError(n))}loadImageFromURL(t){this.loadImageService.loadImageFromURL(t,this.settings).then(n=>this.setLoadedImage(n)).catch(n=>this.loadImageError(n))}setLoadedImage(t){this.loadedImage=t,this.safeImgDataUrl=this.sanitizer.bypassSecurityTrustResourceUrl(t.transformed.base64),this.cd.markForCheck()}loadImageError(t){console.error(t),this.loadImageFailed.emit()}imageLoadedInView(){null!=this.loadedImage&&(this.imageLoaded.emit(this.loadedImage),this.setImageMaxSizeRetries=0,setTimeout(()=>this.checkImageMaxSizeRecursively()))}checkImageMaxSizeRecursively(){this.setImageMaxSizeRetries>40?this.loadImageFailed.emit():this.sourceImageLoaded()?(this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize(),this.resetCropperPosition(),this.cropperReady.emit({...this.maxSize}),this.cd.markForCheck()):(this.setImageMaxSizeRetries++,setTimeout(()=>this.checkImageMaxSizeRecursively(),50))}sourceImageLoaded(){return this.sourceImage?.nativeElement?.offsetWidth>0}onResize(){this.loadedImage&&(this.hidden?this.resizedWhileHidden=!0:(this.resizeCropperPosition(),this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize()))}activatePinchGesture(){if(this.Hammer){const t=new this.Hammer(this.wrapper.nativeElement);t.get("pinch").set({enable:!0}),t.on("pinchmove",this.onPinch.bind(this)),t.on("pinchend",this.pinchStop.bind(this)),t.on("pinchstart",this.startPinch.bind(this))}else(0,e.X6Q)()&&console.warn("[NgxImageCropper] Could not find HammerJS - Pinch Gesture won't work")}resizeCropperPosition(){const t=this.sourceImage.nativeElement;(this.maxSize.width!==t.offsetWidth||this.maxSize.height!==t.offsetHeight)&&(this.cropper.x1=this.cropper.x1*t.offsetWidth/this.maxSize.width,this.cropper.x2=this.cropper.x2*t.offsetWidth/this.maxSize.width,this.cropper.y1=this.cropper.y1*t.offsetHeight/this.maxSize.height,this.cropper.y2=this.cropper.y2*t.offsetHeight/this.maxSize.height)}resetCropperPosition(){this.cropperPositionService.resetCropperPosition(this.sourceImage,this.cropper,this.settings),this.doAutoCrop(),this.imageVisible=!0}keyboardAccess(t){this.changeKeyboardStepSize(t),this.keyboardMoveCropper(t)}changeKeyboardStepSize(t){const n=+t.key;n>=1&&n<=9&&(this.settings.stepSize=n)}keyboardMoveCropper(t){if(!["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t.key))return;const o=t.shiftKey?I.Resize:I.Move,r=t.altKey?function _n(i){switch(i){case"ArrowUp":return"bottom";case"ArrowRight":return"left";case"ArrowDown":return"top";default:return"right"}}(t.key):function mn(i){switch(i){case"ArrowUp":return"top";case"ArrowRight":return"right";case"ArrowDown":return"bottom";default:return"left"}}(t.key),a=function fn(i,s){switch(i){case"ArrowUp":return{clientX:0,clientY:-1*s};case"ArrowRight":return{clientX:s,clientY:0};case"ArrowDown":return{clientX:0,clientY:s};default:return{clientX:-1*s,clientY:0}}}(t.key,this.settings.stepSize);t.preventDefault(),t.stopPropagation(),this.startMove({clientX:0,clientY:0},o,r),this.moveImg(a),this.moveStop()}startMove(t,n,o=null){this.disabled||this.moveStart?.active&&this.moveStart?.type===I.Pinch||n===I.Drag&&!this.allowMoveImage||(t.preventDefault&&t.preventDefault(),this.moveStart={active:!0,type:n,position:o,transform:{...this.transform},clientX:this.cropperPositionService.getClientX(t),clientY:this.cropperPositionService.getClientY(t),...this.cropper})}startPinch(t){this.safeImgDataUrl&&(t.preventDefault&&t.preventDefault(),this.moveStart={active:!0,type:I.Pinch,position:"center",clientX:this.cropper.x1+(this.cropper.x2-this.cropper.x1)/2,clientY:this.cropper.y1+(this.cropper.y2-this.cropper.y1)/2,...this.cropper})}moveImg(t){if(this.moveStart.active){if(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),this.moveStart.type===I.Move)this.cropperPositionService.move(t,this.moveStart,this.cropper),this.checkCropperPosition(!0);else if(this.moveStart.type===I.Resize)!this.cropperStaticWidth&&!this.cropperStaticHeight&&this.cropperPositionService.resize(t,this.moveStart,this.cropper,this.maxSize,this.settings),this.checkCropperPosition(!1);else if(this.moveStart.type===I.Drag){const n=this.cropperPositionService.getClientX(t)-this.moveStart.clientX,o=this.cropperPositionService.getClientY(t)-this.moveStart.clientY;this.transform={...this.transform,translateH:(this.moveStart.transform?.translateH||0)+n,translateV:(this.moveStart.transform?.translateV||0)+o},this.setCssTransform()}this.cd.detectChanges()}}onPinch(t){this.moveStart.active&&(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),this.moveStart.type===I.Pinch&&(this.cropperPositionService.resize(t,this.moveStart,this.cropper,this.maxSize,this.settings),this.checkCropperPosition(!1)),this.cd.detectChanges())}setMaxSize(){if(this.sourceImage){const t=this.sourceImage.nativeElement;this.maxSize.width=t.offsetWidth,this.maxSize.height=t.offsetHeight,this.marginLeft=this.sanitizer.bypassSecurityTrustStyle("calc(50% - "+this.maxSize.width/2+"px)")}}setCropperScaledMinSize(){this.loadedImage?.transformed?.image?(this.setCropperScaledMinWidth(),this.setCropperScaledMinHeight()):(this.settings.cropperScaledMinWidth=20,this.settings.cropperScaledMinHeight=20)}setCropperScaledMinWidth(){this.settings.cropperScaledMinWidth=this.cropperMinWidth>0?Math.max(20,this.cropperMinWidth/this.loadedImage.transformed.image.width*this.maxSize.width):20}setCropperScaledMinHeight(){this.settings.cropperScaledMinHeight=this.maintainAspectRatio?Math.max(20,this.settings.cropperScaledMinWidth/this.aspectRatio):this.cropperMinHeight>0?Math.max(20,this.cropperMinHeight/this.loadedImage.transformed.image.height*this.maxSize.height):20}setCropperScaledMaxSize(){if(this.loadedImage?.transformed?.image){const t=this.loadedImage.transformed.size.width/this.maxSize.width;this.settings.cropperScaledMaxWidth=this.cropperMaxWidth>20?this.cropperMaxWidth/t:this.maxSize.width,this.settings.cropperScaledMaxHeight=this.cropperMaxHeight>20?this.cropperMaxHeight/t:this.maxSize.height,this.maintainAspectRatio&&(this.settings.cropperScaledMaxWidth>this.settings.cropperScaledMaxHeight*this.aspectRatio?this.settings.cropperScaledMaxWidth=this.settings.cropperScaledMaxHeight*this.aspectRatio:this.settings.cropperScaledMaxWidth<this.settings.cropperScaledMaxHeight*this.aspectRatio&&(this.settings.cropperScaledMaxHeight=this.settings.cropperScaledMaxWidth/this.aspectRatio))}else this.settings.cropperScaledMaxWidth=this.maxSize.width,this.settings.cropperScaledMaxHeight=this.maxSize.height}checkCropperPosition(t=!1){this.cropper.x1<0&&(this.cropper.x2-=t?this.cropper.x1:0,this.cropper.x1=0),this.cropper.y1<0&&(this.cropper.y2-=t?this.cropper.y1:0,this.cropper.y1=0),this.cropper.x2>this.maxSize.width&&(this.cropper.x1-=t?this.cropper.x2-this.maxSize.width:0,this.cropper.x2=this.maxSize.width),this.cropper.y2>this.maxSize.height&&(this.cropper.y1-=t?this.cropper.y2-this.maxSize.height:0,this.cropper.y2=this.maxSize.height)}moveStop(){this.moveStart.active&&(this.moveStart.active=!1,this.moveStart?.type===I.Drag?this.transformChange.emit(this.transform):this.doAutoCrop())}pinchStop(){this.moveStart.active&&(this.moveStart.active=!1,this.doAutoCrop())}doAutoCrop(){this.autoCrop&&this.crop()}crop(){if(null!=this.loadedImage?.transformed?.image){this.startCropImage.emit();const t=this.cropService.crop(this.sourceImage,this.loadedImage,this.cropper,this.settings);return null!=t&&this.imageCropped.emit(t),t}return null}aspectRatioIsCorrect(){return(this.cropper.x2-this.cropper.x1)/(this.cropper.y2-this.cropper.y1)===this.aspectRatio}ngOnDestroy(){this.mouseAndTouchmoveSubscription&&this.mouseAndTouchmoveSubscription.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Ht),e.Y36(qt),e.Y36(et.y),e.Y36(mt.H7),e.Y36(e.sBO),e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["image-cropper"]],viewQuery:function(t,n){if(1&t&&(e.Gf(vn,7),e.Gf(Cn,5)),2&t){let o;e.iGM(o=e.CRH())&&(n.wrapper=o.first),e.iGM(o=e.CRH())&&(n.sourceImage=o.first)}},hostVars:6,hostBindings:function(t,n){1&t&&e.NdJ("resize",function(){return n.onResize()},!1,e.Jf7)("mouseup",function(){return n.moveStop()},!1,e.evT)("touchend",function(){return n.moveStop()},!1,e.evT),2&t&&(e.Udp("text-align",n.alignImage),e.ekj("disabled",n.disabled)("ngx-ix-hidden",n.hidden))},inputs:{imageChangedEvent:"imageChangedEvent",imageURL:"imageURL",imageBase64:"imageBase64",imageFile:"imageFile",imageAltText:"imageAltText",format:"format",transform:"transform",maintainAspectRatio:"maintainAspectRatio",aspectRatio:"aspectRatio",resetCropOnAspectRatioChange:"resetCropOnAspectRatioChange",resizeToWidth:"resizeToWidth",resizeToHeight:"resizeToHeight",cropperMinWidth:"cropperMinWidth",cropperMinHeight:"cropperMinHeight",cropperMaxHeight:"cropperMaxHeight",cropperMaxWidth:"cropperMaxWidth",cropperStaticWidth:"cropperStaticWidth",cropperStaticHeight:"cropperStaticHeight",canvasRotation:"canvasRotation",initialStepSize:"initialStepSize",roundCropper:"roundCropper",onlyScaleDown:"onlyScaleDown",imageQuality:"imageQuality",autoCrop:"autoCrop",backgroundColor:"backgroundColor",containWithinAspectRatio:"containWithinAspectRatio",hideResizeSquares:"hideResizeSquares",allowMoveImage:"allowMoveImage",cropper:"cropper",alignImage:"alignImage",disabled:"disabled",hidden:"hidden"},outputs:{imageCropped:"imageCropped",startCropImage:"startCropImage",imageLoaded:"imageLoaded",cropperReady:"cropperReady",loadImageFailed:"loadImageFailed",transformChange:"transformChange"},features:[e.TTD],decls:5,vars:10,consts:[["wrapper",""],["class","ngx-ic-source-image",3,"src","visibility","transform","ngx-ic-draggable","load","mousedown","touchstart",4,"ngIf"],[1,"ngx-ic-overlay"],["class","ngx-ic-cropper","tabindex","0",3,"ngx-ic-round","top","left","width","height","margin-left","visibility","keydown",4,"ngIf"],[1,"ngx-ic-source-image",3,"src","load","mousedown","touchstart"],["sourceImage",""],["tabindex","0",1,"ngx-ic-cropper",3,"keydown"],[1,"ngx-ic-move",3,"mousedown","touchstart"],[4,"ngIf"],[1,"ngx-ic-resize","ngx-ic-topleft",3,"mousedown","touchstart"],[1,"ngx-ic-square"],[1,"ngx-ic-resize","ngx-ic-top"],[1,"ngx-ic-resize","ngx-ic-topright",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-right"],[1,"ngx-ic-resize","ngx-ic-bottomright",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-bottom"],[1,"ngx-ic-resize","ngx-ic-bottomleft",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-left"],[1,"ngx-ic-resize-bar","ngx-ic-top",3,"mousedown","touchstart"],[1,"ngx-ic-resize-bar","ngx-ic-right",3,"mousedown","touchstart"],[1,"ngx-ic-resize-bar","ngx-ic-bottom",3,"mousedown","touchstart"],[1,"ngx-ic-resize-bar","ngx-ic-left",3,"mousedown","touchstart"]],template:function(t,n){1&t&&(e.TgZ(0,"div",null,0),e.YNc(2,xn,2,8,"img",1),e._UZ(3,"div",2),e.YNc(4,yn,3,15,"div",3),e.qZA()),2&t&&(e.Udp("background",n.imageVisible&&n.backgroundColor),e.xp6(2),e.Q6J("ngIf",n.safeImgDataUrl),e.xp6(1),e.Udp("width",n.maxSize.width,"px")("height",n.maxSize.height,"px")("margin-left","center"===n.alignImage?n.marginLeft:null),e.xp6(1),e.Q6J("ngIf",n.imageVisible))},dependencies:[m.O5],styles:['[_nghost-%COMP%]{display:flex;position:relative;width:100%;max-width:100%;max-height:100%;overflow:hidden;padding:5px;text-align:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:100%;position:relative}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.ngx-ic-source-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%;transform-origin:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.ngx-ic-source-image.ngx-ic-draggable[_ngcontent-%COMP%]{user-drag:none;-webkit-user-drag:none;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;cursor:grab}[_nghost-%COMP%]   .ngx-ic-overlay[_ngcontent-%COMP%]{position:absolute;pointer-events:none;touch-action:none;outline:var(--cropper-overlay-color, white) solid 100vw;top:0;left:0}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]{position:absolute;display:flex;color:#53535c;background:transparent;outline:rgba(255,255,255,.3) solid 100vw;outline:var(--cropper-outline-color, rgba(255, 255, 255, .3)) solid 100vw;touch-action:none}@media (orientation: portrait){[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]{outline-width:100vh}}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]:after{position:absolute;content:"";inset:0;pointer-events:none;border:dashed 1px;opacity:.75;color:inherit;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{width:100%;cursor:move;border:1px solid rgba(255,255,255,.5)}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]:focus   .ngx-ic-move[_ngcontent-%COMP%]{border-color:#1e90ff;border-width:2px}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%]{position:absolute;display:inline-block;line-height:6px;padding:8px;opacity:.85;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%]   .ngx-ic-square[_ngcontent-%COMP%]{display:inline-block;background:#53535C;width:6px;height:6px;border:1px solid rgba(255,255,255,.5);box-sizing:content-box}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-topleft[_ngcontent-%COMP%]{top:-12px;left:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-top[_ngcontent-%COMP%]{top:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-topright[_ngcontent-%COMP%]{top:-12px;right:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-right[_ngcontent-%COMP%]{top:calc(50% - 12px);right:-12px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottomright[_ngcontent-%COMP%]{bottom:-12px;right:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottom[_ngcontent-%COMP%]{bottom:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottomleft[_ngcontent-%COMP%]{bottom:-12px;left:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-left[_ngcontent-%COMP%]{top:calc(50% - 12px);left:-12px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar[_ngcontent-%COMP%]{position:absolute;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-top[_ngcontent-%COMP%]{top:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-right[_ngcontent-%COMP%]{top:11px;right:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-bottom[_ngcontent-%COMP%]{bottom:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-left[_ngcontent-%COMP%]{top:11px;left:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]{outline-color:transparent}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]:after{border-radius:100%;box-shadow:0 0 0 100vw #ffffff4d;box-shadow:0 0 0 100vw var(--cropper-outline-color, rgba(255, 255, 255, .3))}@media (orientation: portrait){[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]:after{box-shadow:0 0 0 100vh #ffffff4d;box-shadow:0 0 0 100vh var(--cropper-outline-color, rgba(255, 255, 255, .3))}}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{border-radius:100%}.disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{display:none}.ngx-ix-hidden[_nghost-%COMP%]{display:none}'],changeDetection:0}),i})();var Jt=_(4929),He=_(8595),Qt=_(7291);const Yt=["modal"];function _t(i,s){1&i&&(e.ynx(0),e._UZ(1,"app-loader",58),e.BQk())}function Tn(i,s){1&i&&(e.TgZ(0,"div",59),e._uU(1,"Se non viene rispettato l'aspect ratio, l'immagine verr\xe0 tagliata per adattarsi alle dimensioni specificate!"),e.qZA())}const Mn=function(){return{placement:"bottom-start"}},ee=function(){return{placement:"bottom"}},Vt=function(i,s){return{"btn-outline-warning-dark":i,"btn-warning-dark":s}},wn=function(){return{placement:"bottom",hideOnClick:!1}},Gt=function(i){return{"is-invalid":i}},Sn=function(){return{hideOnClick:!1}};function nt(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",6)(2,"image-cropper",7),e.NdJ("cropperReady",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.cropperReadyEvent())})("imageLoaded",function(o){e.CHM(t);const r=e.oxw(2);return e.KtG(r.imageLoadedEvent(o))})("imageCropped",function(o){e.CHM(t);const r=e.oxw(2);return e.KtG(r.imageCroppedEvent(o))}),e.ALo(3,"uploadsreplace"),e.qZA()(),e.YNc(4,_t,2,0,"ng-container",2),e.TgZ(5,"div",8)(6,"div",9)(7,"button",10),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.rotateLeft())}),e.TgZ(8,"div",11),e._uU(9,"rotate_left"),e.qZA()(),e.TgZ(10,"button",12),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.rotateRight())}),e.TgZ(11,"div",11),e._uU(12,"rotate_right"),e.qZA()()(),e.TgZ(13,"div",13)(14,"button",14),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.flipHorizontal())}),e.TgZ(15,"div",15),e._uU(16,"height"),e.qZA()(),e.TgZ(17,"button",16),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.flipVertical())}),e.TgZ(18,"div",11),e._uU(19,"height"),e.qZA()()(),e.TgZ(20,"div",13)(21,"button",17),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.zoomIn())}),e.TgZ(22,"div",11),e._uU(23,"zoom_in"),e.qZA()(),e.TgZ(24,"button",18),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.zoomOut())}),e.TgZ(25,"div",11),e._uU(26,"zoom_out"),e.qZA()()(),e.TgZ(27,"div",13)(28,"button",19),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.translateUp())}),e.TgZ(29,"div",20),e._uU(30,"arrow_circle_up"),e.qZA()(),e.TgZ(31,"button",21),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.translateDown())}),e.TgZ(32,"div",20),e._uU(33,"arrow_circle_down"),e.qZA()(),e.TgZ(34,"button",22),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.translateLeft())}),e.TgZ(35,"div",20),e._uU(36,"arrow_circle_left"),e.qZA()(),e.TgZ(37,"button",23),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.translateRight())}),e.TgZ(38,"div",20),e._uU(39,"arrow_circle_right"),e.qZA()()(),e.TgZ(40,"button",24,25),e.NdJ("click",function(){e.CHM(t);const o=e.MAs(41);return e.oxw(2).toggleMaintainAspectRatio(),e.KtG(o.blur())}),e.TgZ(42,"div",26),e._uU(43,"image_aspect_ratio"),e.qZA()(),e.TgZ(44,"button",27),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.resetImage())}),e.TgZ(45,"div",11),e._uU(46,"restart_alt"),e.qZA()()(),e.TgZ(47,"div",28)(48,"div",29)(49,"div",30)(50,"div",31)(51,"label",32),e._uU(52,"Rotazione libera:"),e.qZA()(),e.TgZ(53,"input",33),e.NdJ("ngModelChange",function(o){e.CHM(t);const r=e.oxw(2);return e.KtG(r.rotationInput=o)})("ngModelChange",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.updateRotation())}),e.qZA()(),e.TgZ(54,"div",34)(55,"div",31)(56,"label",35),e._uU(57,"Sposta "),e.TgZ(58,"span",36),e._uU(59,"orizz"),e.qZA(),e.TgZ(60,"span",37),e._uU(61,"orizzontalmente (px)"),e.qZA(),e._uU(62,":"),e.qZA(),e.TgZ(63,"label",38),e._uU(64,"Sposta "),e.TgZ(65,"span",36),e._uU(66,"vert"),e.qZA(),e.TgZ(67,"span",37),e._uU(68,"verticalmente (px)"),e.qZA(),e._uU(69,":"),e.qZA()(),e.TgZ(70,"div",39)(71,"input",40),e.NdJ("ngModelChange",function(o){e.CHM(t);const r=e.oxw(2);return e.KtG(r.translateH=o)})("ngModelChange",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.updateTranslate())}),e.qZA(),e.TgZ(72,"input",41),e.NdJ("ngModelChange",function(o){e.CHM(t);const r=e.oxw(2);return e.KtG(r.translateV=o)})("ngModelChange",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.updateTranslate())}),e.qZA()()()()(),e.TgZ(73,"fieldset",42)(74,"legend",43),e._uU(75,"Modifica le dimensioni"),e.qZA(),e.TgZ(76,"ul",44)(77,"li",45)(78,"div",46)(79,"div",31)(80,"label",47),e._uU(81,"Larghezza"),e.TgZ(82,"span",37),e._uU(83," (px)"),e.qZA(),e._uU(84,":"),e.qZA(),e.TgZ(85,"label",48),e._uU(86,"Altezza"),e.TgZ(87,"span",37),e._uU(88," (px)"),e.qZA(),e._uU(89,":"),e.qZA()(),e.TgZ(90,"div",39)(91,"input",49),e.NdJ("ngModelChange",function(o){e.CHM(t);const r=e.oxw(2);return e.KtG(r.imageWidth=o)})("ngModelChange",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.imageWidthInputChange())}),e.qZA(),e.TgZ(92,"span",50),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.keepAspectRationWhenScaling=!o.keepAspectRationWhenScaling)}),e.qZA(),e.TgZ(93,"input",51),e.NdJ("ngModelChange",function(o){e.CHM(t);const r=e.oxw(2);return e.KtG(r.imageHeight=o)})("ngModelChange",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.imageHeightInputChange())}),e.qZA()(),e.YNc(94,Tn,2,0,"div",52),e.qZA()(),e.TgZ(95,"li")(96,"div",53)(97,"input",54),e.NdJ("ngModelChange",function(o){e.CHM(t);const r=e.oxw(2);return e.KtG(r.forceDimensionsOnSave=o)}),e.qZA(),e.TgZ(98,"label",55),e._uU(99,"Salva l'immagine con le dimensioni specificate"),e.qZA()()()()(),e.TgZ(100,"div",53)(101,"input",56),e.NdJ("ngModelChange",function(o){e.CHM(t);const r=e.oxw(2);return e.KtG(r.rewriteOnSave=o)}),e.qZA(),e.TgZ(102,"label",57),e._uU(103,"Sostituisci la vecchia immagine con quella modificata"),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("hidden",!t.isImageLoaded)("imageURL",e.lcZ(3,48,t.entity.embedUrl))("format",t.exportFormat)("aspectRatio",t.aspectRatio)("maintainAspectRatio",t.maintainAspectRatio)("canvasRotation",t.canvasRotation)("transform",t.transform),e.xp6(2),e.Q6J("ngIf",!t.isImageLoaded),e.xp6(3),e.Q6J("disableOnTouchDevice",!0)("tippyProps",e.DdM(50,Mn)),e.xp6(3),e.Q6J("disableOnTouchDevice",!0)("tippyProps",e.DdM(51,ee)),e.xp6(4),e.Q6J("disableOnTouchDevice",!0)("tippyProps",e.DdM(52,ee)),e.xp6(3),e.Q6J("disableOnTouchDevice",!0)("tippyProps",e.DdM(53,ee)),e.xp6(4),e.Q6J("disableOnTouchDevice",!0)("tippyProps",e.DdM(54,ee)),e.xp6(3),e.Q6J("disableOnTouchDevice",!0)("tippyProps",e.DdM(55,ee)),e.xp6(4),e.Q6J("disableOnTouchDevice",!0)("tippyProps",e.DdM(56,ee)),e.xp6(3),e.Q6J("disableOnTouchDevice",!0)("tippyProps",e.DdM(57,ee)),e.xp6(3),e.Q6J("disableOnTouchDevice",!0)("tippyProps",e.DdM(58,ee)),e.xp6(3),e.Q6J("disableOnTouchDevice",!0)("tippyProps",e.DdM(59,ee)),e.xp6(3),e.Q6J("ngClass",e.WLB(60,Vt,!t.maintainAspectRatio,t.maintainAspectRatio))("appTippy",t.maintainAspectRatio?"Trasformazione libera":"Mantieni il rapporto larghezza/altezza")("disableOnTouchDevice",!0)("tippyProps",e.DdM(63,wn)),e.xp6(4),e.Q6J("disableOnTouchDevice",!0)("tippyProps",e.DdM(64,ee)),e.xp6(9),e.Q6J("ngModel",t.rotationInput),e.xp6(18),e.Q6J("ngModel",t.translateH),e.xp6(1),e.Q6J("ngModel",t.translateV),e.xp6(19),e.Q6J("ngClass",e.VKq(65,Gt,t.isImageLoaded&&(!t.imageWidth||t.imageWidth<1)))("ngModel",t.imageWidth),e.xp6(1),e.Q6J("appTippy",t.keepAspectRationWhenScaling?"Scala liberamente":"Mantieni l'aspect ratio")("disableOnTouchDevice",!0)("tippyProps",e.DdM(67,Sn))("innerText",t.keepAspectRationWhenScaling?"link":"link_off"),e.xp6(1),e.Q6J("ngClass",e.VKq(68,Gt,t.isImageLoaded&&(!t.imageHeight||t.imageHeight<1)))("ngModel",t.imageHeight),e.xp6(1),e.Q6J("ngIf",!t.keepAspectRationWhenScaling),e.xp6(3),e.Q6J("ngModel",t.forceDimensionsOnSave),e.xp6(4),e.Q6J("ngModel",t.rewriteOnSave)}}function On(i,s){if(1&i&&(e.TgZ(0,"div",60)(1,"strong"),e._uU(2,"File non supportato!"),e.qZA(),e._UZ(3,"br"),e._uU(4," Purtroppo, al momento il file che si sta cercando di modificare ha un'estensione ("),e.TgZ(5,"em"),e._uU(6),e.qZA(),e._uU(7,") non supportata. Se lo si desidera, \xe8 possibile provare a convertire in autonomia il file in formato "),e.TgZ(8,"em"),e._uU(9,".jpg"),e.qZA(),e._uU(10," o "),e.TgZ(11,"em"),e._uU(12,".png"),e.qZA(),e._uU(13," e riprovare in seguito. "),e.qZA()),2&i){const t=e.oxw(2);e.xp6(6),e.hij(".",t.entity.ext,"")}}function Pn(i,s){if(1&i&&(e.ynx(0),e.YNc(1,nt,104,70,"ng-container",4),e.YNc(2,On,14,1,"ng-template",null,5,e.W1O),e.BQk()),2&i){const t=e.MAs(3),n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.canImageBeCropped)("ngIfElse",t)}}function Bt(i,s){if(1&i){const t=e.EpF();e.ynx(0,61),e.TgZ(1,"button",62),e.NdJ("click",function(){e.CHM(t),e.oxw();const o=e.MAs(1);return e.KtG(o.close("Close click"))}),e._uU(2,"Annulla"),e.qZA(),e.TgZ(3,"button",63),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.save())}),e._uU(4,"Salva"),e.qZA(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(3),e.Q6J("disabled",!t.isCropperReady||!t.canImageBeCropped||0===t.croppedImageData.length)}}let ft=(()=>{class i{constructor(t,n){this.uploaderService=t,this.uploadObservablesService=n,this.opened=!1,this.canImageBeCropped=!1,this.isCropperReady=!1,this.isImageLoaded=!1,this.croppedImageData="",this.rewriteOnSave=!1,this.imageWidth=0,this.imageHeight=0,this.keepAspectRationWhenScaling=!0,this.forceDimensionsOnSave=!1,this.exportFormat="jpeg",this.aspectRatio=4/3,this.maintainAspectRatio=!1,this.canvasRotation=0,this.transform={translateUnit:"px"},this.rotationInput=0,this.translateH=0,this.translateV=0,this.scale=1,this.translateHStep=0,this.translateVStep=0}ngOnInit(){}ngOnChanges(t){t.entity&&!t.entity.firstChange&&this.entity&&(this.canImageBeCropped=(0,A.$H)(this.entity.ext),this.exportFormat=["png","apng"].includes(this.entity.ext)?"png":"webp"===this.entity.ext?"webp":"jpeg")}open(){return this.opened=!0,this.modalComponent.open()}resetOnHidden(){this.opened=!1,this.isImageLoaded=!1,this.isCropperReady=!1,this.resetImage(),this.maintainAspectRatio=!1,this.croppedImageData="",this.keepAspectRationWhenScaling=!0,this.forceDimensionsOnSave=!1,this.imageHeight=0,this.imageWidth=0,this.rewriteOnSave=!1}save(){if(!this.isCropperReady||!this.canImageBeCropped||0===this.croppedImageData.length||!this.entity)return;const t=(0,j.L)(this.croppedImageData);this.modalComponent.close();let n={compress:this.uploaderService.uploaderOptions.compress,allowOverwrite:this.rewriteOnSave,openLinkModalAfterUpload:!1};this.forceDimensionsOnSave&&this.imageWidth>0&&this.imageHeight>0&&(n.compress=!0,n.imageDimensions={width:this.imageWidth,height:this.imageHeight}),this.uploadObservablesService.pushStartUpload({file:new File([t],this.entity.name,{type:t.type,lastModified:Date.now()}),options:n})}cropperReadyEvent(){this.isCropperReady=!0}imageLoadedEvent(t){this.imageWidth=t.original.size.width,this.imageHeight=t.original.size.height,this.translateHStep=Math.round(this.imageWidth/100),this.translateVStep=Math.round(this.imageHeight/100),this.aspectRatio=this.imageWidth/this.imageHeight,this.isImageLoaded=!0}imageCroppedEvent(t){this.croppedImageData=t.base64||"",this.imageWidth=t.width,this.imageHeight=t.height}imageWidthInputChange(){this.forceDimensionsOnSave=!0,this.keepAspectRationWhenScaling&&(this.imageHeight=Math.round(this.imageWidth/this.aspectRatio))}imageHeightInputChange(){this.forceDimensionsOnSave=!0,this.keepAspectRationWhenScaling&&(this.imageWidth=Math.round(this.imageHeight*this.aspectRatio))}rotateLeft(){this.canvasRotation--,this.flipAfterRotate()}rotateRight(){this.canvasRotation++,this.flipAfterRotate()}flipAfterRotate(){this.transform={...this.transform,flipH:this.transform.flipV,flipV:this.transform.flipH}}updateRotation(){this.transform={...this.transform,rotate:this.rotationInput}}updateTranslate(){this.transform={...this.transform,translateV:this.translateV,translateH:this.translateH}}flipHorizontal(){this.transform={...this.transform,flipH:!this.transform.flipH}}flipVertical(){this.transform={...this.transform,flipV:!this.transform.flipV}}zoomOut(){this.scale-=.1,this.transform={...this.transform,scale:this.scale}}zoomIn(){this.scale+=.1,this.transform={...this.transform,scale:this.scale}}toggleMaintainAspectRatio(){this.maintainAspectRatio=!this.maintainAspectRatio}translateRight(){this.translateH+=this.translateHStep,this.transform={...this.transform,translateH:this.translateH}}translateLeft(){this.translateH+=-this.translateHStep,this.transform={...this.transform,translateH:this.translateH}}translateUp(){this.translateV+=-this.translateVStep,this.transform={...this.transform,translateV:this.translateV}}translateDown(){this.translateV+=this.translateVStep,this.transform={...this.transform,translateV:this.translateV}}resetImage(){this.scale=1,this.translateH=0,this.translateV=0,this.rotationInput=0,this.canvasRotation=0,this.transform={translateUnit:"px"}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Rt.q),e.Y36(K.r))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-upload-crop-modal"]],viewQuery:function(t,n){if(1&t&&e.Gf(Yt,5),2&t){let o;e.iGM(o=e.CRH())&&(n.modalComponent=o.first)}},inputs:{entity:"entity"},features:[e.TTD],decls:4,vars:4,consts:[["size","xl",3,"title","disableCloseButton","hidden"],["modal",""],[4,"ngIf"],["footer","",4,"ngIf"],[4,"ngIf","ngIfElse"],["noImage",""],[1,"image-cropper-container"],["alignImage","center",3,"hidden","imageURL","format","aspectRatio","maintainAspectRatio","canvasRotation","transform","cropperReady","imageLoaded","imageCropped"],[1,"image-cropper-utilities","d-flex","flex-wrap","align-items-center","py-1","mt-2","mb-1"],[1,"btn-group","my-2","me-3"],["appTippy","Ruota in senso antiorario",1,"btn","btn-outline-indigo","shadow-none",3,"disableOnTouchDevice","tippyProps","click"],[1,"d-block","material-icons"],["appTippy","Ruota in senso orario",1,"btn","btn-outline-indigo","shadow-none",3,"disableOnTouchDevice","tippyProps","click"],[1,"btn-group","me-3","my-2"],["appTippy","Rifletti orizzontalmente",1,"btn","btn-outline-primary","shadow-none",3,"disableOnTouchDevice","tippyProps","click"],[1,"d-block","material-icons","rotate-z90"],["appTippy","Rifletti verticalmente",1,"btn","btn-outline-primary","shadow-none",3,"disableOnTouchDevice","tippyProps","click"],["appTippy","Zoom in",1,"btn","btn-outline-success","shadow-none",3,"disableOnTouchDevice","tippyProps","click"],["appTippy","Zoom out",1,"btn","btn-outline-success","shadow-none",3,"disableOnTouchDevice","tippyProps","click"],["appTippy","Sposta in alto",1,"btn","btn-outline-secondary","shadow-none",3,"disableOnTouchDevice","tippyProps","click"],[1,"d-block","material-icons-outlined"],["appTippy","Sposta in basso",1,"btn","btn-outline-secondary","shadow-none",3,"disableOnTouchDevice","tippyProps","click"],["appTippy","Sposta a sinistra",1,"btn","btn-outline-secondary","shadow-none",3,"disableOnTouchDevice","tippyProps","click"],["appTippy","Sposta a destra",1,"btn","btn-outline-secondary","shadow-none",3,"disableOnTouchDevice","tippyProps","click"],[1,"btn","shadow-none","my-2","me-3",3,"ngClass","appTippy","disableOnTouchDevice","tippyProps","click"],["aspectBtn",""],[1,"material-icons","d-block"],["appTippy","Ripristina",1,"ms-lg-auto","my-2","btn","btn-danger","shadow-none",3,"disableOnTouchDevice","tippyProps","click"],[1,"container","mb-3"],[1,"row"],[1,"col","col-12","col-lg-4","px-0","pe-lg-2","mb-2","mb-lg-0"],[1,"d-flex"],["for","free-rotation",1,"fs-sm","ps-1"],["type","number","id","free-rotation",1,"form-control",3,"ngModel","ngModelChange"],[1,"col","col-12","col-lg-8","px-0","ps-lg-2","mb-2","mb-lg-0","free-translate-input-group"],["for","free-translate-h",1,"fs-sm","ps-1"],[1,"d-sm-none"],[1,"d-none","d-sm-inline"],["for","free-translate-v",1,"fs-sm","ps-1"],[1,"input-group"],["type","number","id","free-translate-h",1,"form-control",3,"ngModel","ngModelChange"],["type","number","id","free-translate-v",1,"form-control",3,"ngModel","ngModelChange"],[1,"px-3","pb-3","pt-2","rounded","mb-3","mb-1","border-dashed","border-light-gray"],[1,"legend-reset","fs-reset","px-2","mb-0"],[1,"list-unstyled","mb-0"],[1,"mb-3"],[1,"free-dimensions-input-group"],["for","free-width",1,"fs-sm","ps-1"],["for","free-height",1,"fs-sm","ps-1"],["type","number","id","free-width","min","1",1,"form-control",3,"ngClass","ngModel","ngModelChange"],[1,"material-icons","input-group-text","cursor-pointer",3,"appTippy","disableOnTouchDevice","tippyProps","innerText","click"],["type","number","id","free-height","min","1",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["class","small px-1",4,"ngIf"],[1,"form-check","form-switch"],["type","checkbox","role","switch","id","force-resize",1,"form-check-input",3,"ngModel","ngModelChange"],["for","force-resize",1,"form-check-label","me-auto"],["type","checkbox","role","switch","id","allow-rewrite",1,"form-check-input",3,"ngModel","ngModelChange"],["for","allow-rewrite",1,"form-check-label","me-auto"],["message","Caricamento del tool in corso"],[1,"small","px-1"],[1,"alert","alert-primary","text-center"],["footer",""],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"]],template:function(t,n){1&t&&(e.TgZ(0,"app-modal",0,1),e.NdJ("hidden",function(){return n.resetOnHidden()}),e.YNc(2,Pn,4,2,"ng-container",2),e.YNc(3,Bt,5,1,"ng-container",3),e.qZA()),2&t&&(e.Q6J("title","Modifica <em>"+(null==n.entity?null:n.entity.name)+"</em>")("disableCloseButton",!0),e.xp6(2),e.Q6J("ngIf",n.opened&&n.entity),e.xp6(1),e.Q6J("ngIf",n.opened&&n.entity))},dependencies:[m.mk,m.O5,T.Fj,T.wV,T.Wl,T.JJ,T.qQ,T.On,tt,Jt.R,B.z,He.$,Qt.g],styles:[".rotate-z90[_ngcontent-%COMP%]{transform:rotate(90deg)}.rotate-group[_ngcontent-%COMP%]{width:100%}.free-translate-input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .free-dimensions-input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{flex:1 1 1px}.free-dimensions-input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:nth-of-type(2){margin-left:calc(24px + 1.5rem)}@media (min-width: 992px){.rotate-group[_ngcontent-%COMP%]{width:initial}.rotate-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{max-width:100px}}"]}),i})();var it=_(1378),Ie=_(5661),qe=_(3779);const Wt=["modal"];function Kt(i,s){if(1&i&&(e.TgZ(0,"div",8)(1,"a",9),e._UZ(2,"img",10),e.qZA()()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("href",t.entities[0].url,e.LSH),e.xp6(1),e.Q6J("src",t.entities[0].embedUrl,e.LSH)("alt",t.entities[0].name)}}function $t(i,s){1&i&&(e.ynx(0),e._uU(1," La cancellazione della cartella comporta anche la "),e.TgZ(2,"strong"),e._uU(3,"cancellazione di tutto il suo contenuto!"),e.qZA(),e._uU(4," Si consiglia di procedere solo se si \xe8 sicuro di voler rimuovere definitivamente la cartella. "),e.BQk())}function Xt(i,s){if(1&i&&(e.ynx(0),e.YNc(1,Kt,3,3,"div",6),e.TgZ(2,"div",7),e._uU(3," La cancellazione di "),e.TgZ(4,"em"),e._uU(5),e.qZA(),e._uU(6," \xe8 "),e.TgZ(7,"strong"),e._uU(8,"definitiva"),e.qZA(),e._uU(9,", senza possibilit\xe0 di ripristino. "),e.qZA(),e.TgZ(10,"p"),e._uU(11," Il suo link non sar\xe0 pi\xf9 funzionante e, di conseguenza, i siti su cui \xe8 stato condiviso non riusciranno pi\xf9 a visualizzarlo. "),e.YNc(12,$t,5,0,"ng-container",2),e.qZA(),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.entities[0].isImage),e.xp6(4),e.Oqu(t.entities[0].name),e.xp6(7),e.Q6J("ngIf",t.entities[0].type===t.entityTypes.FOLDER)}}function vt(i,s){if(1&i&&(e.TgZ(0,"div",7),e._uU(1," Saranno cancellati "),e.TgZ(2,"strong"),e._uU(3,"definitivamente"),e.qZA(),e._uU(4),e.qZA(),e.TgZ(5,"p"),e._uU(6," Tutti i file selezionati non saranno pi\xf9 accessibili, pertanto eventuali link condivisi non saranno pi\xf9 funzionanti. L'operazione potrebbe richiedere diverso tempo. "),e.qZA()),2&i){const t=e.oxw(2);e.xp6(4),e.hij(" i ",t.entities.length," file selezionati! ")}}function Ce(i,s){if(1&i&&(e.ynx(0),e.YNc(1,Xt,13,3,"ng-container",4),e.YNc(2,vt,7,1,"ng-template",null,5,e.W1O),e.BQk()),2&i){const t=e.MAs(3),n=e.oxw();e.xp6(1),e.Q6J("ngIf",1===n.entities.length)("ngIfElse",t)}}function Je(i,s){if(1&i){const t=e.EpF();e.ynx(0,11),e.TgZ(1,"button",12),e.NdJ("click",function(){e.CHM(t),e.oxw();const o=e.MAs(1);return e.KtG(o.close("Close click"))}),e._uU(2,"Annulla"),e.qZA(),e.TgZ(3,"button",13),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.deleteEntity())}),e._uU(4,"Elimina!"),e.qZA(),e.BQk()}}let Qe=(()=>{class i{constructor(t,n){this.toastService=t,this.uploadService=n,this.currentFolderPath=[],this.entities=[],this.deleteEvent=new e.vpe,this.opened=!1,this.entityTypes=v.VC,this.modalTitle=""}ngOnInit(){}ngOnChanges(t){t.entities&&!t.entities.firstChange&&(this.modalTitle=this.entities.length>1?`Rimuovi ${this.entities.length} file`:1===this.entities.length?`Rimuovi <em>${this.entities[0]?.name||""}</em>`:"Rimuovi 0 file")}open(){return this.opened=!0,this.modalComponent.open()}onHidden(){this.opened=!1}deleteEntity(){var t=this;return(0,q.Z)(function*(){if(!t.opened||!t.entities[0])return;const n=[...t.currentFolderPath];t.modalComponent.close(),t.deleteEvent.emit({destPath:n,list:t.entities});let o=!1;for(let a=0;a<t.entities.length;a+=5){const d=t.entities.slice(a,a+5);if(o=(yield Promise.all(d.map(u=>t.uploadService.deleteEntity(n,u.name)))).every(Boolean),!o)break}if(o)if(1===t.entities.length){const a=t.entities[0];t.toastService.show({content:"La rimozione "+(a.type===v.VC.FILE?"del file":"della cartella")+` <strong>${a.name}</strong> \xe8 avvenuta con successo!`})}else t.toastService.show({content:`<strong>${t.entities.length} file</strong> eliminati con successo!`});else t.toastService.show({content:"Errore nella rimozione!",level:it.m.ERROR})})()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Ie.k),e.Y36(qe.C))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-upload-delete-modal"]],viewQuery:function(t,n){if(1&t&&e.Gf(Wt,5),2&t){let o;e.iGM(o=e.CRH())&&(n.modalComponent=o.first)}},inputs:{currentFolderPath:"currentFolderPath",entities:"entities"},outputs:{deleteEvent:"deleteEvent"},features:[e.TTD],decls:4,vars:4,consts:[[3,"title","disableCloseButton","hidden"],["modal",""],[4,"ngIf"],["footer","",4,"ngIf"],[4,"ngIf","ngIfElse"],["multipleEntity",""],["class","preview py-1 text-center mb-3",4,"ngIf"],[1,"alert","alert-danger","text-center"],[1,"preview","py-1","text-center","mb-3"],["target","_blank","rel","noreferrer",1,"d-inline-block","mw-100",3,"href"],[1,"d-inline-block","mw-100",3,"src","alt"],["footer",""],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"app-modal",0,1),e.NdJ("hidden",function(){return n.onHidden()}),e.YNc(2,Ce,4,2,"ng-container",2),e.YNc(3,Je,5,0,"ng-container",3),e.qZA()),2&t&&(e.Q6J("title",n.modalTitle)("disableCloseButton",!0),e.xp6(2),e.Q6J("ngIf",n.opened&&n.entities[0]),e.xp6(1),e.Q6J("ngIf",n.opened&&n.entities[0]))},dependencies:[m.O5,B.z],styles:[".preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:200px}"]}),i})();var Z=_(4020),Ct=_(8940),xt=_(4228);const En=["modal"];function ot(i,s){if(1&i&&(e.TgZ(0,"div",10)(1,"a",11),e._UZ(2,"img",12),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("href",t.entities[0].url,e.LSH),e.xp6(1),e.Q6J("src",t.entities[0].embedUrl,e.LSH)("alt",t.entities[0].name)}}function $(i,s){1&i&&e.GkF(0)}function Ae(i,s){1&i&&e.GkF(0)}const le=function(i){return{$implicit:i,description:"Tag de"}};function ce(i,s){if(1&i&&(e.TgZ(0,"li"),e.YNc(1,Ae,1,0,"ng-container",5),e.qZA()),2&i){const t=e.oxw(2),n=e.MAs(4);e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(2,le,t.html.tag))}}function Ye(i,s){1&i&&e.GkF(0)}function te(i,s){1&i&&e.GkF(0)}function de(i,s){if(1&i&&(e.TgZ(0,"li"),e.YNc(1,te,1,0,"ng-container",5),e.qZA()),2&i){const t=e.oxw(2),n=e.MAs(4);e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(2,le,t.bbcode.tag))}}function jt(i,s){1&i&&e.GkF(0)}const en=function(i){return{$implicit:i,description:"Url de"}},Ve=function(i){return{$implicit:i,description:"Link a"}};function X(i,s){if(1&i&&(e.ynx(0),e.YNc(1,ot,3,3,"div",4),e.TgZ(2,"div"),e.YNc(3,$,1,0,"ng-container",5),e.qZA(),e.TgZ(4,"fieldset",6)(5,"legend",7),e._uU(6,"HTML"),e.qZA(),e.TgZ(7,"ul",8),e.YNc(8,ce,2,4,"li",2),e.TgZ(9,"li"),e.YNc(10,Ye,1,0,"ng-container",5),e.qZA()()(),e.TgZ(11,"fieldset",9)(12,"legend",7),e._uU(13,"BBCODE"),e.qZA(),e.TgZ(14,"ul",8),e.YNc(15,de,2,4,"li",2),e.TgZ(16,"li"),e.YNc(17,jt,1,0,"ng-container",5),e.qZA()()(),e.BQk()),2&i){const t=e.oxw(),n=e.MAs(4);e.xp6(1),e.Q6J("ngIf",1===t.entities.length&&t.entities[0].isImage),e.xp6(2),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(9,en,t.urls)),e.xp6(5),e.Q6J("ngIf",t.html.tag.length),e.xp6(2),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(11,Ve,t.html.link)),e.xp6(5),e.Q6J("ngIf",t.bbcode.tag.length),e.xp6(2),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(13,Ve,t.bbcode.link))}}function st(i,s){if(1&i&&(e.TgZ(0,"div",13),e._uU(1),e.qZA(),e._UZ(2,"app-custom-pre",14),e.ALo(3,"arrayJoin")),2&i){const t=s.$implicit,n=s.description;e.xp6(1),e.AsE("",n,"",t.length>1?"gli elementi":"ll'elemento",":"),e.xp6(1),e.Q6J("content",e.xi3(3,3,t,"\n"))}}let bt=(()=>{class i{constructor(){this.entities=[],this.opened=!1,this.touchDevice=Z.eX,this.modalTitle="",this.urls=[],this.html={tag:[],link:[]},this.bbcode={tag:[],link:[]}}ngOnInit(){}ngOnChanges(t){if(this.opened&&t.entities&&!t.entities.firstChange){this.modalTitle=1!==this.entities.length?"Codici delle immagini":`Codici di <em>${this.entities[0]?.name||""}</em>`,this.urls=[],this.html={tag:[],link:[]},this.bbcode={tag:[],link:[]};for(const n of this.entities)this.urls.push(n.url),this.html.link.push(`<a href="${n.url}" target="_blank">${n.name}</a>`),this.bbcode.link.push(`[URL=${n.url}]${n.name}[/URL]`),n.isImage&&(this.html.tag.push(`<img src="${n.url}" alt="${n.name}">`),this.bbcode.tag.push(`[IMG]${n.url}[/IMG]`))}}open(){return this.opened=!0,this.modalComponent.open()}onHidden(){this.opened=!1}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-upload-file-links-modal"]],viewQuery:function(t,n){if(1&t&&e.Gf(En,5),2&t){let o;e.iGM(o=e.CRH())&&(n.modalComponent=o.first)}},inputs:{entities:"entities"},features:[e.TTD],decls:5,vars:2,consts:[[3,"title","hidden"],["modal",""],[4,"ngIf"],["linkInput",""],["class","preview py-1 text-center mb-2",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"px-3","pb-3","pt-1","rounded","mt-3","border-dashed","border-light-gray"],[1,"legend-reset","fs-reset","px-2","mb-0"],[1,"list-unstyled","mb-0"],[1,"px-3","pb-3","pt-1","rounded","mt-3","mb-1","border-dashed","border-light-gray"],[1,"preview","py-1","text-center","mb-2"],["target","_blank","rel","noreferrer",1,"d-inline-block","mw-100",3,"href"],[1,"d-inline-block","mw-100",3,"src","alt"],[1,"fs-sm","d-inline-block"],[3,"content"]],template:function(t,n){1&t&&(e.TgZ(0,"app-modal",0,1),e.NdJ("hidden",function(){return n.onHidden()}),e.YNc(2,X,18,15,"ng-container",2),e.qZA(),e.YNc(3,st,4,6,"ng-template",null,3,e.W1O)),2&t&&(e.Q6J("title",n.modalTitle),e.xp6(2),e.Q6J("ngIf",n.opened&&n.entities.length))},dependencies:[m.O5,m.tP,Ct.s,B.z,xt.J],styles:[".preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:200px}fieldset[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:not(:first-of-type){margin-top:.75rem}"]}),i})();const yt=["modal"];function Tt(i,s){1&i&&(e.TgZ(0,"p",14),e._uU(1," \xc8 possibile spostare pi\xf9 file contemporaneamente in una stessa destinazione. Occorre sottolineare che, a seguito dello spostamento, tutti i "),e.TgZ(2,"strong"),e._uU(3,"link dei file saranno modificati"),e.qZA(),e._uU(4," e, pertanto, i vacchi indirizzi non risulteranno pi\xf9 funzionanti. L'operazione potrebbe richiedere diverso tempo. "),e.qZA())}function Mt(i,s){1&i&&(e.TgZ(0,"p",14),e._uU(1," \xc8 possibile spostare un file nella cartella base ("),e.TgZ(2,"em"),e._uU(3,"root"),e.qZA(),e._uU(4,"), in quella di livello superiore, se esistente, oppure in una sottocartella presente nella cartella corrente. Spostanto un file, verr\xe0 "),e.TgZ(5,"strong"),e._uU(6,"modificato anche il suo link"),e.qZA(),e._uU(7,", pertanto eventuali link gi\xe0 condivisi andranno aggiornati. "),e.qZA())}function rt(i,s){1&i&&(e.TgZ(0,"p",14),e._uU(1," \xc8 possibile spostare un'intera cartella e "),e.TgZ(2,"strong"),e._uU(3,"tutto il suo contenuto"),e.qZA(),e._uU(4," nella cartella base ("),e.TgZ(5,"em"),e._uU(6,"root"),e.qZA(),e._uU(7,"), in quella di livello superiore, se esistente, oppure in una sottocartella presente nella cartella corrente. Occorre evidenziare che, spostando una cartella, i "),e.TgZ(8,"strong"),e._uU(9,"link di tutti gli elementi"),e.qZA(),e._uU(10," in essa contenuti saranno "),e.TgZ(11,"strong"),e._uU(12,"modificati"),e.qZA(),e._uU(13," e, pertanto, se gi\xe0 condivisi andranno aggiornati. "),e.qZA())}function xe(i,s){if(1&i&&(e.YNc(0,Mt,8,0,"p",6),e.YNc(1,rt,14,0,"ng-template",null,15,e.W1O)),2&i){const t=e.MAs(2),n=e.oxw(2);e.Q6J("ngIf",n.entities[0].type===n.entityTypes.FILE)("ngIfElse",t)}}function In(i,s){1&i&&e.GkF(0)}const at=function(i){return{$implicit:i}};function wt(i,s){if(1&i&&(e.TgZ(0,"div",16),e.YNc(1,In,1,0,"ng-container",13),e.qZA()),2&i){const t=e.oxw(2),n=e.MAs(5);e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(2,at,t.newLink?t.newLink:t.entities[0].url))}}function tn(i,s){1&i&&e.GkF(0)}const An=function(i){return{"mt-2":i}},Dn=function(i,s,t){return{loading:i,"has-error":s,"touch-device":t}};function l(i,s){if(1&i&&(e.ynx(0),e.YNc(1,Tt,5,0,"p",6),e.YNc(2,xe,3,2,"ng-template",null,7,e.W1O),e.TgZ(4,"p")(5,"em"),e._uU(6,"Tip:"),e.qZA(),e._uU(7," cliccando sulla "),e.TgZ(8,"strong"),e._uU(9,"freccia blu"),e.qZA(),e._uU(10," accanto al nome della cartella \xe8 possibile navigare nelle eventuali sottocartelle. Se non \xe8 presente alcun simbolo accanto al nome di una cartella, quest'ultima non ha sottocartelle."),e.qZA(),e.TgZ(11,"div",8),e.YNc(12,wt,2,4,"div",9),e.TgZ(13,"fieldset",10)(14,"legend",11),e._uU(15,"Cartella di destinazione:"),e.qZA(),e.TgZ(16,"ul",12),e.YNc(17,tn,1,0,"ng-container",13),e.qZA()()(),e.BQk()),2&i){const t=e.MAs(3),n=e.oxw(),o=e.MAs(7);e.xp6(1),e.Q6J("ngIf",n.entities.length>1)("ngIfElse",t),e.xp6(11),e.Q6J("ngIf",1===n.entities.length),e.xp6(1),e.Q6J("ngClass",e.VKq(7,An,n.entities.length>1)),e.xp6(3),e.Q6J("ngClass",e.kEZ(9,Dn,n.loading,!n.isValid,n.touchDevice)),e.xp6(1),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(13,at,n.folders[0]))}}function c(i,s){if(1&i){const t=e.EpF();e.ynx(0,17),e.TgZ(1,"button",18),e.NdJ("click",function(){e.CHM(t),e.oxw();const o=e.MAs(1);return e.KtG(o.close("Close click"))}),e._uU(2,"Annulla"),e.qZA(),e.TgZ(3,"button",19),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.move())}),e._uU(4,"Sposta"),e.qZA(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(3),e.Q6J("disabled",!t.isValid)}}const p=function(i){return{placement:"top",hideOnClick:i}};function h(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"label",20),e._uU(1,"Anteprima nuovo link:"),e.qZA(),e.TgZ(2,"div",21),e._UZ(3,"input",22),e.TgZ(4,"div",23,24),e.NdJ("click",function(){e.CHM(t);const o=e.MAs(5),r=e.oxw();return e.KtG(!r.touchDevice&&o.changeContent("Copiato!","Copia"))}),e.TgZ(6,"span",25),e._uU(7,"content_copy"),e.qZA()()()}if(2&i){const t=s.$implicit,n=e.oxw();e.xp6(3),e.Q6J("value",t),e.xp6(1),e.Q6J("cdkCopyToClipboard",t)("appTippy",n.touchDevice?"Copiato!":"Copia")("tippyProps",e.VKq(4,p,n.touchDevice))}}function g(i,s){1&i&&(e.ynx(0),e.TgZ(1,"div",32)(2,"div",33)(3,"span",34),e._uU(4,"Loading..."),e.qZA()()(),e.BQk())}const C=function(i){return{"is-expanded":i}};function y(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"a",36),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2).$implicit,r=e.oxw();return e.KtG(r.getSubfolders(o))}),e.TgZ(1,"div",37),e._uU(2,"chevron_right"),e.qZA()()}if(2&i){const t=e.oxw(2).$implicit;e.Q6J("ngClass",e.VKq(1,C,!t.collapsed))}}function R(i,s){if(1&i&&e.YNc(0,y,3,3,"a",35),2&i){const t=e.oxw().$implicit;e.Q6J("ngIf",!t.checked||t.subfolders.length)}}const N=function(){return[5,10]},J=function(i){return{placement:"top-end",offset:i}};function ne(i,s){if(1&i&&(e.TgZ(0,"div",38)(1,"div",39),e._uU(2,"info"),e.qZA()()),2&i){const t=e.oxw(2);e.Q6J("appTippy",t.errorMessage)("tippyProps",e.VKq(3,J,e.DdM(2,N)))}}function Vi(i,s){1&i&&e.GkF(0)}function Gi(i,s){if(1&i&&(e.ynx(0),e.YNc(1,Vi,1,0,"ng-container",13),e.BQk()),2&i){const t=s.$implicit;e.oxw(3);const n=e.MAs(7);e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(2,at,t))}}function Bi(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"ul",40),e.NdJ("ngbCollapseChange",function(o){e.CHM(t);const r=e.oxw().$implicit;return e.KtG(r.collapsed=o)}),e.YNc(1,Gi,2,4,"ng-container",41),e.qZA()}if(2&i){const t=e.oxw().$implicit;e.Q6J("ngbCollapse",t.collapsed),e.xp6(1),e.Q6J("ngForOf",t.subfolders)}}const Wi=function(i,s){return{selected:i,"ps-2":s}};function Ki(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"li")(1,"div",26),e.YNc(2,g,5,0,"ng-container",27),e.YNc(3,R,1,1,"ng-template",null,28,e.W1O),e.TgZ(5,"div",29),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.setSelectedPath(r,r.collapsed))}),e.qZA(),e.YNc(6,ne,3,5,"div",30),e.qZA(),e.YNc(7,Bi,2,2,"ul",31),e.qZA()}if(2&i){const t=s.$implicit,n=e.MAs(4),o=e.oxw();e.xp6(1),e.Q6J("ngClass",e.WLB(6,Wi,o.selectedPathAsString===t.pathString,!t.loading&&t.checked&&0===t.subfolders.length)),e.xp6(1),e.Q6J("ngIf",t.loading)("ngIfElse",n),e.xp6(3),e.Q6J("innerHTML",t.name,e.oJD),e.xp6(1),e.Q6J("ngIf",!o.isValid&&o.selectedPathAsString===t.pathString),e.xp6(1),e.Q6J("ngIf",t.subfolders.length>0)}}let $i=(()=>{class i{constructor(t,n,o){this.uploadService=t,this.toastService=n,this.uploadObservablesService=o,this.currentFolderPath=[],this.entities=[],this.moveEvent=new e.vpe,this.deleteBeforeMovingEvent=new e.vpe,this.opened=!1,this.touchDevice=Z.eX,this.entityTypes=v.VC,this.modalTitle="",this.newLink="",this.isValid=!1,this.loading=!1,this.currentFolderPathAsString="",this.errorMessage="",this.folders=[],this.newFolderPath=[],this.basepath=""}ngOnInit(){this.currentFolderPathAsString=this.currentFolderPath.join("/"),this.setRootFolder(),this.startExternalMoveSubscription=this.uploadObservablesService.startMoveObservable.subscribe(t=>{this.sendMoveRequest(t.destPath,t.originPath,t.entities)})}ngOnChanges(t){if(t.entities&&!t.entities.firstChange){this.modalTitle=this.entities.length>1?`Sposta ${this.entities.length} file`:1===this.entities.length?`Sposta <em>${this.entities[0]?.name||""}</em>`:"Sposta 0 file";const n=this.entities[0].url.match(/^(https:\/\/[^/]*\/i\/[^/]*)/);n&&(this.basepath=`${n[0]}/`)}t.currentFolderPath&&!t.currentFolderPath.firstChange&&(this.currentFolderPathAsString=this.currentFolderPath.join("/"))}open(){return this.opened=!0,this.reset(),this.modalComponent.open()}onHidden(){this.opened=!1}reset(){this.selectedPathAsString=void 0,this.newLink="",this.newFolderPath=[],this.isValid=!1,this.setRootFolder()}setRootFolder(){this.folders=[{name:"Cartella base (root)",paths:[],pathString:"",checked:!1,loading:!1,collapsed:!0,subfolders:[]}]}move(){var t=this;return(0,q.Z)(function*(){if(!t.opened||!t.isValid||!t.entities[0])return;const n=[...t.newFolderPath],o=[...t.currentFolderPath],r=[...t.entities];t.modalComponent.close(),t.sendMoveRequest(n,o,r)})()}sendMoveRequest(t,n,o){var r=this;return(0,q.Z)(function*(){r.deleteBeforeMovingEvent.emit({destPath:n,list:o});const a=1===o.length?(o[0].type===v.VC.FILE?`File <strong>${o[0].name}</strong> spostato`:`Cartella <strong>${o[0].name}</strong> spostata`)+" con successo!":`<strong>${o.length} elementi</strong> spostati con successo!`;let u=[];for(let f=0;f<o.length;f+=5){const x=o.slice(f,f+5);let b=yield Promise.all(x.map(P=>r.uploadService.moveRenameEntity(n,t,P.name)));u.push(...b.map((P,Y)=>({data:P,type:x[Y].type})))}r.moveEvent.emit({list:o,destPath:t,originPath:n,results:u}),r.toastService.show({content:a})})()}getSubfolders(t){var n=this;return(0,q.Z)(function*(){if(n.loading)return;if(t.checked){if(0===t.subfolders.length)return;return t.collapsed||n.closeSubfoldersCollapseElements(t),void(t.collapsed=!t.collapsed)}n.loading=t.loading=!0;const o=yield n.uploadService.getFileList(t.paths);o.folders.length&&(t.subfolders=o.folders.map(r=>{const a=[...t.paths,r.name];return{name:r.name,paths:a,pathString:a.join("/"),checked:!1,loading:!1,collapsed:!0,subfolders:[]}})),t.checked=!0,setTimeout(()=>{t.subfolders.length>0&&(t.collapsed=!t.collapsed),n.loading=t.loading=!1},200)})()}setSelectedPath(t,n=!1){if(n&&this.getSubfolders(t).then(),this.selectedPathAsString=t.paths.join("/"),this.selectedPathAsString===this.currentFolderPathAsString)return this.isValid=!1,this.newLink="",void(this.errorMessage="La cartella di origine \xe8 uguale alla destinazione!");if(this.newFolderPath=[...t.paths],1===this.entities.length){if(this.entities[0].type===v.VC.FOLDER&&(this.selectedPathAsString+"/").startsWith(this.currentFolderPathAsString+(this.currentFolderPathAsString.length?"/":"")+this.entities[0].name+"/"))return this.isValid=!1,this.newLink="",void(this.errorMessage="La cartella di arrivo contiene quella di origine!");this.newLink=this.basepath+`${this.newFolderPath.map(r=>encodeURIComponent(r)).join("/")}`+(this.newFolderPath.length?"/":"")+encodeURIComponent(this.entities[0].name)}this.isValid=!0}closeSubfoldersCollapseElements(t){if(t.subfolders)for(const n of t.subfolders)n.collapsed=!0,this.closeSubfoldersCollapseElements(n)}ngOnDestroy(){this.startExternalMoveSubscription?.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(qe.C),e.Y36(Ie.k),e.Y36(K.r))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-upload-move-modal"]],viewQuery:function(t,n){if(1&t&&e.Gf(yt,5),2&t){let o;e.iGM(o=e.CRH())&&(n.modalComponent=o.first)}},inputs:{currentFolderPath:"currentFolderPath",entities:"entities"},outputs:{moveEvent:"moveEvent",deleteBeforeMovingEvent:"deleteBeforeMovingEvent"},features:[e.TTD],decls:8,vars:4,consts:[[3,"title","disableCloseButton","hidden"],["modal",""],[4,"ngIf"],["footer","",4,"ngIf"],["newLinkInput",""],["folderTree",""],["class","mb-1",4,"ngIf","ngIfElse"],["singleEntity",""],[1,"mt-2"],["class","mb-3",4,"ngIf"],[1,"pb-3","pt-2","rounded","border-dashed","border-light-gray",3,"ngClass"],[1,"legend-reset","fs-sm","px-2","mb-0"],[1,"list-unstyled","mb-0","folder-tree",3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"mb-1"],["folderDesc",""],[1,"mb-3"],["footer",""],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["for","new-link",1,"fs-sm"],[1,"input-group"],["type","text","id","new-link","disabled","",1,"form-control",3,"value"],[1,"input-group-text","cursor-pointer",3,"cdkCopyToClipboard","appTippy","tippyProps","click"],["tippyRef","appTippy"],[1,"material-icons","d-block","text-muted"],[1,"d-flex","align-items-center","tree-title","rounded",3,"ngClass"],[4,"ngIf","ngIfElse"],["collapseButton",""],[1,"cursor-pointer","flex-grow-1","f-name","me-2","text-truncate",3,"innerHTML","click"],["class","me-1 d-flex cursor-pointer flex-shrink-0",3,"appTippy","tippyProps",4,"ngIf"],["class","list-unstyled collapse-content sub-tree mb-0",3,"ngbCollapse","ngbCollapseChange",4,"ngIf"],[1,"spinner-cont","d-flex","align-items-center","flex-shrink-0"],["role","status",1,"spinner-border"],[1,"visually-hidden"],["role","button","class","d-flex align-items-center collapse-btn flex-shrink-0",3,"ngClass","click",4,"ngIf"],["role","button",1,"d-flex","align-items-center","collapse-btn","flex-shrink-0",3,"ngClass","click"],[1,"collapse-icon","collapse-icon-right","material-icons"],[1,"me-1","d-flex","cursor-pointer","flex-shrink-0",3,"appTippy","tippyProps"],[1,"material-icons-outlined","icon-small"],[1,"list-unstyled","collapse-content","sub-tree","mb-0",3,"ngbCollapse","ngbCollapseChange"],[4,"ngFor","ngForOf"]],template:function(t,n){1&t&&(e.TgZ(0,"app-modal",0,1),e.NdJ("hidden",function(){return n.onHidden()}),e.YNc(2,l,18,15,"ng-container",2),e.YNc(3,c,5,1,"ng-container",3),e.qZA(),e.YNc(4,h,8,6,"ng-template",null,4,e.W1O),e.YNc(6,Ki,8,9,"ng-template",null,5,e.W1O)),2&t&&(e.Q6J("title",n.modalTitle)("disableCloseButton",!0),e.xp6(2),e.Q6J("ngIf",n.opened&&n.entities[0]),e.xp6(1),e.Q6J("ngIf",n.opened&&n.entities.length))},dependencies:[he.i3,m.mk,m.sg,m.O5,m.tP,B.z,F._D,He.$],styles:["fieldset[_ngcontent-%COMP%]{padding-left:11px;padding-right:11px}.folder-tree.loading[_ngcontent-%COMP%]{pointer-events:none!important}.sub-tree[_ngcontent-%COMP%]{margin-left:.125rem}.spinner-cont[_ngcontent-%COMP%]{width:24px;height:24px;padding:6px}.spinner-border[_ngcontent-%COMP%]{width:100%;height:100%;border-width:.125rem;color:#4864fe}.tree-title[_ngcontent-%COMP%]{transition:background-color .2s}.folder-tree[_ngcontent-%COMP%]:not(.touch-device)   .tree-title[_ngcontent-%COMP%]:not(.selected):hover{background-color:rgb(var(--bs-light-rgb))}.f-name[_ngcontent-%COMP%]{padding:.125rem 0}.folder-tree[_ngcontent-%COMP%]:not(.has-error)   .tree-title.selected[_ngcontent-%COMP%]{background-color:#dae0ff}.has-error[_ngcontent-%COMP%]   .tree-title.selected[_ngcontent-%COMP%]{background-color:#f1d5d8;color:#701b23}.has-error[_ngcontent-%COMP%]   .tree-title.selected[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:inherit!important}.has-error[_ngcontent-%COMP%]   .tree-title.selected[_ngcontent-%COMP%]   .spinner-border[_ngcontent-%COMP%]{color:#701b23}@media (min-width: 992px){.sub-tree[_ngcontent-%COMP%]{margin-left:11px;padding-left:12px;border-left:1px solid #dee2e6}}"]}),i})();var be=_(1990);const Xi=["modal"];function ji(i,s){1&i&&(e.ynx(0),e._uU(1," \xc8 possibile rinominare un file liberamente, tuttavia occorre tenere presente che "),e.TgZ(2,"strong"),e._uU(3,"la modifica del nome comporta il cambiamento del link"),e.qZA(),e._uU(4,", pertanto al termine dell'operazione andranno aggiornati tutti i link gi\xe0 condivisi, i quali in caso contrario non saranno pi\xf9 funzionanti. "),e.BQk())}function eo(i,s){1&i&&(e._uU(0," Rinominando una cartella, verr\xe0 "),e.TgZ(1,"strong"),e._uU(2,"modificato il link di tutti i file contenuti"),e.qZA(),e._uU(3," in essa. Pertanto, eventuali link gi\xe0 condivisi non saranno pi\xf9 funzionanti e andranno aggiornati. "))}function to(i,s){1&i&&(e.ynx(0),e._uU(1," Il nome non pu\xf2 essere vuoto! "),e.BQk())}function no(i,s){if(1&i&&e._UZ(0,"span",23),2&i){const t=e.oxw(4);e.Q6J("innerHTML",t.errorMessage,e.oJD)}}function io(i,s){1&i&&e._uU(0,"Questo nome \xe8 gi\xe0 in uso!")}function oo(i,s){if(1&i&&(e.YNc(0,no,1,1,"span",21),e.YNc(1,io,1,0,"ng-template",null,22,e.W1O)),2&i){const t=e.MAs(2),n=e.oxw(3);e.Q6J("ngIf",!n.nameValidationErrors.alreadyUsed)("ngIfElse",t)}}function so(i,s){if(1&i&&(e.TgZ(0,"div",19),e.YNc(1,to,2,0,"ng-container",6),e.YNc(2,oo,3,2,"ng-template",null,20,e.W1O),e.qZA()),2&i){const t=e.MAs(3),n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.nameValidationErrors.invalidLength)("ngIfElse",t)}}function ro(i,s){1&i&&e.GkF(0)}const ao=function(i,s){return{"is-valid":i,"is-invalid":s}},lo=function(i){return{$implicit:i}};function co(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"p",5),e._uU(2," Il nome pu\xf2 contenere i caratteri "),e.TgZ(3,"em"),e._uU(4,"a-z"),e.qZA(),e._uU(5,", sia maiuscoli che minuscoli, i trattini alti e bassi "),e.TgZ(6,"em"),e._uU(7,"-_"),e.qZA(),e._uU(8," e i numeri. "),e.YNc(9,ji,5,0,"ng-container",6),e.YNc(10,eo,4,0,"ng-template",null,7,e.W1O),e.qZA(),e.TgZ(12,"div",8)(13,"label",9),e._uU(14,"Nome attuale:"),e.qZA(),e._UZ(15,"input",10),e.qZA(),e.TgZ(16,"fieldset",11)(17,"legend",12),e._uU(18,"Valori modificati"),e.qZA(),e.TgZ(19,"ul",13)(20,"li")(21,"label",14),e._uU(22,"Nuovo nome:"),e.qZA(),e.TgZ(23,"input",15,16),e.NdJ("ngModelChange",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.newName=o)})("ngModelChange",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.checkNameValidity())}),e.qZA(),e.YNc(25,so,4,2,"div",17),e.qZA(),e.TgZ(26,"li"),e.YNc(27,ro,1,0,"ng-container",18),e.qZA()()(),e.BQk()}if(2&i){const t=e.MAs(11),n=e.MAs(24),o=e.oxw(),r=e.MAs(5);e.xp6(9),e.Q6J("ngIf",o.entity.type===o.entityTypes.FILE)("ngIfElse",t),e.xp6(6),e.Q6J("value",o.currentName),e.xp6(8),e.Q6J("pattern",o.entity.type===o.entityTypes.FILE?o.filenameValidationRegex:o.foldernameValidationRegex)("ngClass",e.WLB(9,ao,o.currentName!==o.newName&&n.dirty&&o.isNewNameValid,n.dirty&&!o.isNewNameValid))("ngModel",o.newName),e.xp6(2),e.Q6J("ngIf",!o.isNewNameValid),e.xp6(2),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(12,lo,o.path+o.newNameParsedUrl+o.ext))}}function po(i,s){if(1&i){const t=e.EpF();e.ynx(0,24),e.TgZ(1,"button",25),e.NdJ("click",function(){e.CHM(t),e.oxw();const o=e.MAs(1);return e.KtG(o.close("Close click"))}),e._uU(2,"Annulla"),e.qZA(),e.TgZ(3,"button",26),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.rename())}),e._uU(4,"Salva"),e.qZA(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(3),e.Q6J("disabled",t.currentName===t.newName||!t.isNewNameValid)}}const ho=function(i){return{placement:"top",hideOnClick:i}};function uo(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"label",27),e._uU(1,"Anteprima nuovo link:"),e.qZA(),e.TgZ(2,"div",28),e._UZ(3,"input",29),e.TgZ(4,"div",30,31),e.NdJ("click",function(){e.CHM(t);const o=e.MAs(5),r=e.oxw();return e.KtG(!r.touchDevice&&o.changeContent("Copiato!","Copia"))}),e.TgZ(6,"span",32),e._uU(7,"content_copy"),e.qZA()()()}if(2&i){const t=s.$implicit,n=e.oxw();e.xp6(3),e.Q6J("value",t),e.xp6(1),e.Q6J("cdkCopyToClipboard",t)("appTippy",n.touchDevice?"Copiato!":"Copia")("tippyProps",e.VKq(4,ho,n.touchDevice))}}let go=(()=>{class i{constructor(t,n,o){this.toastService=t,this.uploadService=n,this.uploadObservablesService=o,this.currentFolderPath=[],this.reservedNames=[],this.renameEvent=new e.vpe,this.touchDevice=Z.eX,this.opened=!1,this.currentName="",this.newName="",this.newNameParsedUrl="",this.ext="",this.isNewNameValid=!1,this.entityTypes=v.VC,this.path="",this.filenameValidationRegex=be.Mi,this.foldernameValidationRegex=be.er,this.errorMessage="",this.nameValidationErrors=be.xt,this.characterFileErrorMessage="Il nome pu\xf2 contenere solo i caratteri <em>a-z</em>, i trattini alti e bassi <em>-_</em>, gli spazi, i punti e i numeri!",this.characterFolderErrorMessage="Il nome pu\xf2 contenere solo i caratteri <em>a-z</em>, i trattini alti e bassi <em>-_</em>, gli spazi e i numeri!",this.startAndEndErrorMessage="Il nome non pu\xf2 iniziare o finire con un punto o uno spazio!"}ngOnInit(){}ngOnChanges(t){t.entity&&!t.entity.firstChange&&this.entity&&(this.ext=this.entity.ext?`.${this.entity.ext}`:"",this.currentName=this.newName=this.ext?this.entity.name.replace(this.ext,""):this.entity.name,this.path=this.entity.url.split("/").slice(0,-1).join("/")+"/",this.createNameForUrl())}open(){return this.opened=!0,this.modalComponent.open()}onHidden(){this.opened=!1,this.newName=this.newNameParsedUrl=this.currentName,this.isNewNameValid=!1,this.nameValidationErrors=be.xt}checkNameValidity(){this.nameValidationErrors=(0,A.rc)(this.newName,this.currentName,this.entity?.type||v.VC.FILE,this.reservedNames||[],this.ext),this.isNewNameValid=!Object.values(this.nameValidationErrors).some(t=>t),this.isNewNameValid?this.createNameForUrl():this.setErrorMessage()}createNameForUrl(){this.newNameParsedUrl=encodeURIComponent(this.newName)}setErrorMessage(){this.errorMessage=this.nameValidationErrors.invalidStartOrEnd?this.startAndEndErrorMessage:this.entity?.type===v.VC.FOLDER?this.characterFolderErrorMessage:this.characterFileErrorMessage}rename(){var t=this;return(0,q.Z)(function*(){if(!t.opened||!t.isNewNameValid||!t.entity)return;const n=t.newName+t.ext,o={...t.entity};t.modalComponent.close();let r=!1,a=` <strong>${o.name}</strong> modificato con successo!`;const d=[...t.currentFolderPath];t.uploadObservablesService.pushEntityPending([{type:o.type,name:o.name,start:!0}]);const u=yield t.uploadService.moveRenameEntity(d,d,o.name,n);if(r=!(!u||!u.url),t.uploadObservablesService.pushEntityPending([{type:o.type,name:o.name,start:!1}]),r)return t.renameEvent.emit({list:[o],newEntityData:u,destPath:d}),a=(o.type===v.VC.FILE?"Nome del file":"Nome della cartella")+a,void t.toastService.show({content:a});t.toastService.show({content:"La modifica del nome <strong>non</strong> \xe8 andata a buon fine!<br>Prova a ricaricare la pagina ed a rieseguirla.",level:it.m.ERROR})})()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Ie.k),e.Y36(qe.C),e.Y36(K.r))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-upload-rename-modal"]],viewQuery:function(t,n){if(1&t&&e.Gf(Xi,5),2&t){let o;e.iGM(o=e.CRH())&&(n.modalComponent=o.first)}},inputs:{currentFolderPath:"currentFolderPath",entity:"entity",reservedNames:"reservedNames"},outputs:{renameEvent:"renameEvent"},features:[e.TTD],decls:6,vars:4,consts:[[3,"title","disableCloseButton","hidden"],["modal",""],[4,"ngIf"],["footer","",4,"ngIf"],["newUrl",""],[1,"mb-0"],[4,"ngIf","ngIfElse"],["folderDesc",""],[1,"mt-2"],["for","current-name",1,"fs-sm"],["type","text","disabled","","id","current-name",1,"form-control",3,"value"],[1,"px-3","pb-3","pt-1","rounded","mt-3","mb-1","border-dashed","border-light-gray"],[1,"legend-reset","fs-reset","px-2","mb-0"],[1,"list-unstyled","mb-0"],["for","file-new-name",1,"fs-sm"],["type","text","id","file-new-name","required","",1,"form-control",3,"pattern","ngClass","ngModel","ngModelChange"],["newNameInput","ngModel"],["class","invalid-feedback",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"invalid-feedback"],["invalidName",""],[3,"innerHTML",4,"ngIf","ngIfElse"],["alreadyUsed",""],[3,"innerHTML"],["footer",""],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["for","new-link",1,"fs-sm"],[1,"input-group"],["type","text","id","new-link","disabled","",1,"form-control",3,"value"],[1,"input-group-text","cursor-pointer",3,"cdkCopyToClipboard","appTippy","tippyProps","click"],["tippyRef","appTippy"],[1,"material-icons","d-block","text-muted"]],template:function(t,n){1&t&&(e.TgZ(0,"app-modal",0,1),e.NdJ("hidden",function(){return n.onHidden()}),e.YNc(2,co,28,14,"ng-container",2),e.YNc(3,po,5,1,"ng-container",3),e.qZA(),e.YNc(4,uo,8,6,"ng-template",null,4,e.W1O)),2&t&&(e.Q6J("title","Rinomina <em>"+((null==n.entity?null:n.entity.name)||"")+"</em>")("disableCloseButton",!0),e.xp6(2),e.Q6J("ngIf",n.opened&&n.entity),e.xp6(1),e.Q6J("ngIf",n.opened))},dependencies:[he.i3,m.mk,m.O5,m.tP,T.Fj,T.JJ,T.Q7,T.c5,T.On,B.z,He.$],styles:["fieldset[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:not(:first-of-type){margin-top:.75rem}"]}),i})(),mo=(()=>{class i{constructor(t){this.uploadCacheService=t}parseUploadEvent(t){const n=this.parseSubscriptionEventMessage(t),o=this.uploadCacheService.getItem(n.targetPaths);if(!o||!n.output)return;const r=o.files.findIndex(d=>d.url===n.output?.url)>-1,a=(0,A.zO)(n.output.url);return a.size=n.output.size,a.time=1e3*n.output.time,{rewrite:r,destPath:n.targetPaths,list:[a]}}parseCreateFolderEvent(t){const n=this.parseSubscriptionEventMessage(t);if(!n.output)return;const o=(0,A.lY)(n.output);return{opened:!1,destPath:n.targetPaths,list:[o]}}parseDeleteEntityEvent(t,n,o){const r=this.parseSubscriptionEventMessage(t);if(r.output)return{...this.checkCompromissions(r.targetPaths,n,r.targetName,r.isFile,o),event:{destPath:r.targetPaths,list:[{name:r.targetName,type:r.isFile?v.VC.FILE:v.VC.FOLDER}]}}}parseMoveEntityEvent(t,n,o){const r=this.parseSubscriptionEventMessage(t);return r.output?{isRename:r.sourcePaths.join("/")===r.targetPaths.join("/"),...this.checkCompromissions(r.sourcePaths,n,r.sourceName,r.isFile,o),newEntity:{...r.output,time:1e3*r.output.time},type:r.isFile?v.VC.FILE:v.VC.FOLDER,source:{name:r.sourceName,paths:r.sourcePaths},target:{name:r.targetName,paths:r.targetPaths}}:void 0}parseSubscriptionEventMessage(t){const n=(t.payload.content.source||"").split("/"),o=(t.payload.content.target||"").split("/"),r=o[o.length-1].indexOf(".")>-1;let a;try{a=JSON.parse(t.output).success||void 0}catch{}return{sourceName:n[n.length-1],sourcePaths:n.slice(0,-1),targetName:o[o.length-1],targetPaths:o.slice(0,-1),isFile:r,output:a}}checkCompromissions(t,n,o,r,a){const d=n.join("/");return!r&&d.includes([...t,o].join("/"))?{pathCompromised:!0,entityCompromised:!1}:d===t.join("/")&&a.find(u=>u.name===o)?{pathCompromised:!1,entityCompromised:!0}:{pathCompromised:!1,entityCompromised:!1}}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(Ee.B))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var St=function(i){return i.MOVE="MOVE",i.DELETE="DELETE",i.NEW_DIR="NEW_DIR",i.UPLOAD="UPLOAD",i}(St||{}),_o=_(459),fo=_(3285),vo=_(5851),jn=_(446),Co=_(7621);const xo=function(i){return{disabled:i}};let ei=(()=>{class i{constructor(t,n,o){this.uploadObservalesService=t,this.toastService=n,this.proxyService=o,this.isSelected=!1,this.actionNames=v.In,this.canBeCropped=!0}ngOnInit(){this.canBeCropped=(0,A.$H)(this.file.ext)}pushAction(t){this.uploadObservalesService.pushAction({name:t,payload:{entities:(0,A.jL)([this.file])}})}pushSelectedFile(){this.dropdownRef.close(),this.uploadObservalesService.pushSelectedFile({name:this.file.name,selected:!this.isSelected})}downloadFile(){var t=this;return(0,q.Z)(function*(){t.dropdownRef.close(),t.uploadObservalesService.pushEntityPending([{type:v.VC.FILE,name:t.file.name,start:!0}]);const n=yield t.proxyService.get(t.file.embedUrl);if(n){const o=URL.createObjectURL(n),r=document.createElement("a");r.href=o,r.download=t.file.name,r.click()}else t.toastService.show({content:`Errore nel download del file <strong>${t.file.name}</strong>!`,level:it.m.ERROR});t.uploadObservalesService.pushEntityPending([{type:v.VC.FILE,name:t.file.name,start:!1}])})()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(K.r),e.Y36(Ie.k),e.Y36(Co.y))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-upload-file-menu"]],inputs:{file:"file",isSelected:"isSelected",dropdownRef:"dropdownRef"},decls:43,vars:5,consts:[[1,"list-unstyled","mb-0","dropdown-material-icons"],["role","button",1,"dropdown-item","d-flex","align-items-center",3,"click"],[1,"material-icons-outlined","d-block"],["role","button",1,"dropdown-item","d-flex","align-items-center",3,"ngClass","click"],[1,"material-icons-outlined","d-block",3,"innerText"],[3,"innerText"],[1,"dropdown-divider"]],template:function(t,n){1&t&&(e.TgZ(0,"ul",0)(1,"li")(2,"a",1),e.NdJ("click",function(){return n.pushAction(n.actionNames.FILE_SHOW_LINKS)}),e.TgZ(3,"div",2),e._uU(4,"construction"),e.qZA(),e.TgZ(5,"div"),e._uU(6,"Codici"),e.qZA()()(),e.TgZ(7,"li")(8,"a",1),e.NdJ("click",function(){return n.downloadFile()}),e.TgZ(9,"div",2),e._uU(10,"file_download"),e.qZA(),e.TgZ(11,"div"),e._uU(12,"Scarica"),e.qZA()()(),e.TgZ(13,"li")(14,"a",1),e.NdJ("click",function(){return n.pushAction(n.actionNames.MOVE)}),e.TgZ(15,"div",2),e._uU(16,"drive_file_move"),e.qZA(),e.TgZ(17,"div"),e._uU(18,"Sposta"),e.qZA()()(),e.TgZ(19,"li")(20,"a",1),e.NdJ("click",function(){return n.pushAction(n.actionNames.RENAME)}),e.TgZ(21,"div",2),e._uU(22,"drive_file_rename_outline"),e.qZA(),e.TgZ(23,"div"),e._uU(24,"Rinomina"),e.qZA()()(),e.TgZ(25,"li")(26,"a",3),e.NdJ("click",function(){return n.pushAction(n.actionNames.FILE_EDIT)}),e.TgZ(27,"div",2),e._uU(28,"transform"),e.qZA(),e.TgZ(29,"div"),e._uU(30,"Modifica"),e.qZA()()(),e.TgZ(31,"li")(32,"a",1),e.NdJ("click",function(){return n.pushSelectedFile()}),e._UZ(33,"div",4)(34,"div",5),e.qZA()(),e.TgZ(35,"li"),e._UZ(36,"hr",6),e.qZA(),e.TgZ(37,"li")(38,"a",1),e.NdJ("click",function(){return n.pushAction(n.actionNames.DELETE)}),e.TgZ(39,"div",2),e._uU(40,"delete"),e.qZA(),e.TgZ(41,"div"),e._uU(42,"Elimina"),e.qZA()()()()),2&t&&(e.xp6(26),e.Q6J("ngClass",e.VKq(3,xo,!n.canBeCropped)),e.xp6(7),e.Q6J("innerText",n.isSelected?"unpublished":"check_circle_outline"),e.xp6(1),e.Q6J("innerText",n.isSelected?"Deseleziona":"Seleziona"))},dependencies:[m.mk]}),i})(),bo=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-upload-all-file-filtered"]],decls:17,vars:0,consts:[[1,"pt-3","px-2","text-center","empty-filtered-list"],["xmlns","http://www.w3.org/2000/svg","width","161.909065","height","158.04346","viewBox","0 0 647.63626 632.17383",1,"p-1","overflow-visible"],["d","M687.3279,276.08691H512.81813a15.01828,15.01828,0,0,0-15,15v387.85l-2,.61005-42.81006,13.11a8.00676,8.00676,0,0,1-9.98974-5.31L315.678,271.39691a8.00313,8.00313,0,0,1,5.31006-9.99l65.97022-20.2,191.25-58.54,65.96972-20.2a7.98927,7.98927,0,0,1,9.99024,5.3l32.5498,106.32Z","transform","translate(-276.18187 -133.91309)","fill","#f2f2f2"],["d","M725.408,274.08691l-39.23-128.14a16.99368,16.99368,0,0,0-21.23-11.28l-92.75,28.39L380.95827,221.60693l-92.75,28.4a17.0152,17.0152,0,0,0-11.28028,21.23l134.08008,437.93a17.02661,17.02661,0,0,0,16.26026,12.03,16.78926,16.78926,0,0,0,4.96972-.75l63.58008-19.46,2-.62v-2.09l-2,.61-64.16992,19.65a15.01489,15.01489,0,0,1-18.73-9.95l-134.06983-437.94a14.97935,14.97935,0,0,1,9.94971-18.73l92.75-28.4,191.24024-58.54,92.75-28.4a15.15551,15.15551,0,0,1,4.40966-.66,15.01461,15.01461,0,0,1,14.32032,10.61l39.0498,127.56.62012,2h2.08008Z","transform","translate(-276.18187 -133.91309)","fill","#3f3d56"],["d","M398.86279,261.73389a9.0157,9.0157,0,0,1-8.61133-6.3667l-12.88037-42.07178a8.99884,8.99884,0,0,1,5.9712-11.24023l175.939-53.86377a9.00867,9.00867,0,0,1,11.24072,5.9707l12.88037,42.07227a9.01029,9.01029,0,0,1-5.9707,11.24072L401.49219,261.33887A8.976,8.976,0,0,1,398.86279,261.73389Z","transform","translate(-276.18187 -133.91309)","fill","#565656"],["cx","190.15351","cy","24.95465","r","20","fill","#565656"],["cx","190.15351","cy","24.95465","r","12.66462","fill","#fff"],["d","M878.81836,716.08691h-338a8.50981,8.50981,0,0,1-8.5-8.5v-405a8.50951,8.50951,0,0,1,8.5-8.5h338a8.50982,8.50982,0,0,1,8.5,8.5v405A8.51013,8.51013,0,0,1,878.81836,716.08691Z","transform","translate(-276.18187 -133.91309)","fill","#e6e6e6"],["d","M723.31813,274.08691h-210.5a17.02411,17.02411,0,0,0-17,17v407.8l2-.61v-407.19a15.01828,15.01828,0,0,1,15-15H723.93825Zm183.5,0h-394a17.02411,17.02411,0,0,0-17,17v458a17.0241,17.0241,0,0,0,17,17h394a17.0241,17.0241,0,0,0,17-17v-458A17.02411,17.02411,0,0,0,906.81813,274.08691Zm15,475a15.01828,15.01828,0,0,1-15,15h-394a15.01828,15.01828,0,0,1-15-15v-458a15.01828,15.01828,0,0,1,15-15h394a15.01828,15.01828,0,0,1,15,15Z","transform","translate(-276.18187 -133.91309)","fill","#3f3d56"],["d","M801.81836,318.08691h-184a9.01015,9.01015,0,0,1-9-9v-44a9.01016,9.01016,0,0,1,9-9h184a9.01016,9.01016,0,0,1,9,9v44A9.01015,9.01015,0,0,1,801.81836,318.08691Z","transform","translate(-276.18187 -133.91309)","fill","#565656"],["cx","433.63626","cy","105.17383","r","20","fill","#565656"],["cx","433.63626","cy","105.17383","r","12.18187","fill","#fff"],[1,"mt-2"],[1,"text-muted"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.O4$(),e.TgZ(1,"svg",1),e._UZ(2,"path",2)(3,"path",3)(4,"path",4)(5,"circle",5)(6,"circle",6)(7,"path",7)(8,"path",8)(9,"path",9)(10,"circle",10)(11,"circle",11),e.qZA(),e.kcU(),e.TgZ(12,"div",12)(13,"strong"),e._uU(14,"Nessun elemento trovato!"),e.qZA()(),e.TgZ(15,"div",13),e._uU(16,"Prova a modificare le parole chiave da cercare."),e.qZA()())},styles:["svg[_ngcontent-%COMP%]{opacity:.5}"]}),i})(),yo=(()=>{class i{constructor(t){this.uploadObservablesService=t}ngOnInit(){}startUpload(){this.uploadObservablesService.pushStartUpload()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(K.r))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-upload-empty-file-list"]],decls:7,vars:0,consts:[[1,"text-center","py-2","px-2"],[1,"text-muted"],[1,"mb-3"],[1,"btn","btn-primary",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2,"Nessun file caricato!"),e.qZA(),e.TgZ(3,"div",2),e._uU(4,"Puoi iniziare l'upload di un nuovo file tramite il pulsante sottostante."),e.qZA(),e.TgZ(5,"button",3),e.NdJ("click",function(){return n.startUpload()}),e._uU(6,"Carica!"),e.qZA()())}}),i})();var ti=_(8792),To=_(1088),ie=_(8247),ye=_(2831),D=_(2495),ni=_(6034),Ot=_(7394),Mo=_(1687),wo=_(927),nn=_(5592),on=_(9773),ii=_(7398),sn=_(8180),Fn=_(7921),_e=_(9397),oi=_(4664),si=_(9388);function Un(i,s,t){for(let n in s)if(s.hasOwnProperty(n)){const o=s[n];o?i.setProperty(n,o,t?.has(n)?"important":""):i.removeProperty(n)}return i}function lt(i,s){const t=s?"":"none";Un(i.style,{"touch-action":s?"":"none","-webkit-user-drag":s?"":"none","-webkit-tap-highlight-color":s?"":"transparent","user-select":t,"-ms-user-select":t,"-webkit-user-select":t,"-moz-user-select":t})}function ri(i,s,t){Un(i.style,{position:s?"":"fixed",top:s?"":"0",opacity:s?"":"0",left:s?"":"-999em"},t)}function rn(i,s){return s&&"none"!=s?i+" "+s:i}function ai(i){const s=i.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(i)*s}function Zn(i,s){return i.getPropertyValue(s).split(",").map(n=>n.trim())}function kn(i){const s=i.getBoundingClientRect();return{top:s.top,right:s.right,bottom:s.bottom,left:s.left,width:s.width,height:s.height,x:s.x,y:s.y}}function Ln(i,s,t){const{top:n,bottom:o,left:r,right:a}=i;return t>=n&&t<=o&&s>=r&&s<=a}function Pt(i,s,t){i.top+=s,i.bottom=i.top+i.height,i.left+=t,i.right=i.left+i.width}function li(i,s,t,n){const{top:o,right:r,bottom:a,left:d,width:u,height:f}=i,x=u*s,b=f*s;return n>o-b&&n<a+b&&t>d-x&&t<r+x}class ci{constructor(s){this._document=s,this.positions=new Map}clear(){this.positions.clear()}cache(s){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),s.forEach(t=>{this.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:kn(t)})})}handleScroll(s){const t=(0,ye.sA)(s),n=this.positions.get(t);if(!n)return null;const o=n.scrollPosition;let r,a;if(t===this._document){const f=this.getViewportScrollPosition();r=f.top,a=f.left}else r=t.scrollTop,a=t.scrollLeft;const d=o.top-r,u=o.left-a;return this.positions.forEach((f,x)=>{f.clientRect&&t!==x&&t.contains(x)&&Pt(f.clientRect,d,u)}),o.top=r,o.left=a,{top:d,left:u}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function di(i){const s=i.cloneNode(!0),t=s.querySelectorAll("[id]"),n=i.nodeName.toLowerCase();s.removeAttribute("id");for(let o=0;o<t.length;o++)t[o].removeAttribute("id");return"canvas"===n?ui(i,s):("input"===n||"select"===n||"textarea"===n)&&hi(i,s),pi("canvas",i,s,ui),pi("input, textarea, select",i,s,hi),s}function pi(i,s,t,n){const o=s.querySelectorAll(i);if(o.length){const r=t.querySelectorAll(i);for(let a=0;a<o.length;a++)n(o[a],r[a])}}let Oo=0;function hi(i,s){"file"!==s.type&&(s.value=i.value),"radio"===s.type&&s.name&&(s.name=`mat-clone-${s.name}-${Oo++}`)}function ui(i,s){const t=s.getContext("2d");if(t)try{t.drawImage(i,0,0)}catch{}}const gi=(0,ye.i$)({passive:!0}),an=(0,ye.i$)({passive:!1}),Rn=new Set(["position"]);class Eo{get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(s){const t=(0,D.Ig)(s);t!==this._disabled&&(this._disabled=t,this._toggleNativeDragInteractions(),this._handles.forEach(n=>lt(n,t)))}constructor(s,t,n,o,r,a){this._config=t,this._document=n,this._ngZone=o,this._viewportRuler=r,this._dragDropRegistry=a,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new O.x,this._pointerMoveSubscription=Ot.w0.EMPTY,this._pointerUpSubscription=Ot.w0.EMPTY,this._scrollSubscription=Ot.w0.EMPTY,this._resizeSubscription=Ot.w0.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new O.x,this.started=new O.x,this.released=new O.x,this.ended=new O.x,this.entered=new O.x,this.exited=new O.x,this.dropped=new O.x,this.moved=this._moveEvents,this._pointerDown=d=>{if(this.beforeStarted.next(),this._handles.length){const u=this._getTargetHandle(d);u&&!this._disabledHandles.has(u)&&!this.disabled&&this._initializeDragSequence(u,d)}else this.disabled||this._initializeDragSequence(this._rootElement,d)},this._pointerMove=d=>{const u=this._getPointerPositionOnPage(d);if(!this._hasStartedDragging){if(Math.abs(u.x-this._pickupPositionOnPage.x)+Math.abs(u.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const Y=Date.now()>=this._dragStartTime+this._getDragStartDelay(d),V=this._dropContainer;if(!Y)return void this._endDragSequence(d);(!V||!V.isDragging()&&!V.isReceiving())&&(d.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(d)))}return}d.preventDefault();const f=this._getConstrainedPointerPosition(u);if(this._hasMoved=!0,this._lastKnownPointerPosition=u,this._updatePointerDirectionDelta(f),this._dropContainer)this._updateActiveDropContainer(f,u);else{const x=this.constrainPosition?this._initialClientRect:this._pickupPositionOnPage,b=this._activeTransform;b.x=f.x-x.x+this._passiveTransform.x,b.y=f.y-x.y+this._passiveTransform.y,this._applyRootElementTransform(b.x,b.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:f,event:d,distance:this._getDragDistance(f),delta:this._pointerDirectionDelta})})},this._pointerUp=d=>{this._endDragSequence(d)},this._nativeDragStart=d=>{if(this._handles.length){const u=this._getTargetHandle(d);u&&!this._disabledHandles.has(u)&&!this.disabled&&d.preventDefault()}else this.disabled||d.preventDefault()},this.withRootElement(s).withParent(t.parentDragRef||null),this._parentPositions=new ci(n),a.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(s){this._handles=s.map(n=>(0,D.fI)(n)),this._handles.forEach(n=>lt(n,this.disabled)),this._toggleNativeDragInteractions();const t=new Set;return this._disabledHandles.forEach(n=>{this._handles.indexOf(n)>-1&&t.add(n)}),this._disabledHandles=t,this}withPreviewTemplate(s){return this._previewTemplate=s,this}withPlaceholderTemplate(s){return this._placeholderTemplate=s,this}withRootElement(s){const t=(0,D.fI)(s);return t!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{t.addEventListener("mousedown",this._pointerDown,an),t.addEventListener("touchstart",this._pointerDown,gi),t.addEventListener("dragstart",this._nativeDragStart,an)}),this._initialTransform=void 0,this._rootElement=t),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(s){return this._boundaryElement=s?(0,D.fI)(s):null,this._resizeSubscription.unsubscribe(),s&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(s){return this._parentDragRef=s,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(s){!this._disabledHandles.has(s)&&this._handles.indexOf(s)>-1&&(this._disabledHandles.add(s),lt(s,!0))}enableHandle(s){this._disabledHandles.has(s)&&(this._disabledHandles.delete(s),lt(s,this.disabled))}withDirection(s){return this._direction=s,this}_withDropContainer(s){this._dropContainer=s}getFreeDragPosition(){const s=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:s.x,y:s.y}}setFreeDragPosition(s){return this._activeTransform={x:0,y:0},this._passiveTransform.x=s.x,this._passiveTransform.y=s.y,this._dropContainer||this._applyRootElementTransform(s.x,s.y),this}withPreviewContainer(s){return this._previewContainer=s,this}_sortFromLastPointerPosition(){const s=this._lastKnownPointerPosition;s&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(s),s)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview?.remove(),this._previewRef?.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(s){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this,event:s}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(s),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const t=this._getPointerPositionOnPage(s);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(t),dropPoint:t,event:s})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(s){Et(s)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const t=this._dropContainer;if(t){const n=this._rootElement,o=n.parentNode,r=this._placeholder=this._createPlaceholderElement(),a=this._anchor=this._anchor||this._document.createComment(""),d=this._getShadowRoot();o.insertBefore(a,n),this._initialTransform=n.style.transform||"",this._preview=this._createPreviewElement(),ri(n,!1,Rn),this._document.body.appendChild(o.replaceChild(r,n)),this._getPreviewInsertionPoint(o,d).appendChild(this._preview),this.started.next({source:this,event:s}),t.start(),this._initialContainer=t,this._initialIndex=t.getItemIndex(this)}else this.started.next({source:this,event:s}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(t?t.getScrollableParents():[])}_initializeDragSequence(s,t){this._parentDragRef&&t.stopPropagation();const n=this.isDragging(),o=Et(t),r=!o&&0!==t.button,a=this._rootElement,d=(0,ye.sA)(t),u=!o&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),f=o?(0,ni.yG)(t):(0,ni.X6)(t);if(d&&d.draggable&&"mousedown"===t.type&&t.preventDefault(),n||r||u||f)return;if(this._handles.length){const P=a.style;this._rootElementTapHighlight=P.webkitTapHighlightColor||"",P.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._initialClientRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(P=>this._updateOnScroll(P)),this._boundaryElement&&(this._boundaryRect=kn(this._boundaryElement));const x=this._previewTemplate;this._pickupPositionInElement=x&&x.template&&!x.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialClientRect,s,t);const b=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:b.x,y:b.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(s){ri(this._rootElement,!0,Rn),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialClientRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const t=this._dropContainer,n=t.getItemIndex(this),o=this._getPointerPositionOnPage(s),r=this._getDragDistance(o),a=t._isOverContainer(o.x,o.y);this.ended.next({source:this,distance:r,dropPoint:o,event:s}),this.dropped.next({item:this,currentIndex:n,previousIndex:this._initialIndex,container:t,previousContainer:this._initialContainer,isPointerOverContainer:a,distance:r,dropPoint:o,event:s}),t.drop(this,n,this._initialIndex,this._initialContainer,a,r,o,s),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:s,y:t},{x:n,y:o}){let r=this._initialContainer._getSiblingContainerFromPosition(this,s,t);!r&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(s,t)&&(r=this._initialContainer),r&&r!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=r,this._dropContainer.enter(this,s,t,r===this._initialContainer&&r.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:r,currentIndex:r.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(n,o),this._dropContainer._sortItem(this,s,t,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(s,t):this._applyPreviewTransform(s-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y))}_createPreviewElement(){const s=this._previewTemplate,t=this.previewClass,n=s?s.template:null;let o;if(n&&s){const r=s.matchSize?this._initialClientRect:null,a=s.viewContainer.createEmbeddedView(n,s.context);a.detectChanges(),o=_i(a,this._document),this._previewRef=a,s.matchSize?fi(o,r):o.style.transform=ln(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else o=di(this._rootElement),fi(o,this._initialClientRect),this._initialTransform&&(o.style.transform=this._initialTransform);return Un(o.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},Rn),lt(o,!1),o.classList.add("cdk-drag-preview"),o.setAttribute("dir",this._direction),t&&(Array.isArray(t)?t.forEach(r=>o.classList.add(r)):o.classList.add(t)),o}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const s=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(s.left,s.top);const t=function So(i){const s=getComputedStyle(i),t=Zn(s,"transition-property"),n=t.find(d=>"transform"===d||"all"===d);if(!n)return 0;const o=t.indexOf(n),r=Zn(s,"transition-duration"),a=Zn(s,"transition-delay");return ai(r[o])+ai(a[o])}(this._preview);return 0===t?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(n=>{const o=a=>{(!a||(0,ye.sA)(a)===this._preview&&"transform"===a.propertyName)&&(this._preview?.removeEventListener("transitionend",o),n(),clearTimeout(r))},r=setTimeout(o,1.5*t);this._preview.addEventListener("transitionend",o)}))}_createPlaceholderElement(){const s=this._placeholderTemplate,t=s?s.template:null;let n;return t?(this._placeholderRef=s.viewContainer.createEmbeddedView(t,s.context),this._placeholderRef.detectChanges(),n=_i(this._placeholderRef,this._document)):n=di(this._rootElement),n.style.pointerEvents="none",n.classList.add("cdk-drag-placeholder"),n}_getPointerPositionInElement(s,t,n){const o=t===this._rootElement?null:t,r=o?o.getBoundingClientRect():s,a=Et(n)?n.targetTouches[0]:n,d=this._getViewportScrollPosition();return{x:r.left-s.left+(a.pageX-r.left-d.left),y:r.top-s.top+(a.pageY-r.top-d.top)}}_getPointerPositionOnPage(s){const t=this._getViewportScrollPosition(),n=Et(s)?s.touches[0]||s.changedTouches[0]||{pageX:0,pageY:0}:s,o=n.pageX-t.left,r=n.pageY-t.top;if(this._ownerSVGElement){const a=this._ownerSVGElement.getScreenCTM();if(a){const d=this._ownerSVGElement.createSVGPoint();return d.x=o,d.y=r,d.matrixTransform(a.inverse())}}return{x:o,y:r}}_getConstrainedPointerPosition(s){const t=this._dropContainer?this._dropContainer.lockAxis:null;let{x:n,y:o}=this.constrainPosition?this.constrainPosition(s,this,this._initialClientRect,this._pickupPositionInElement):s;if("x"===this.lockAxis||"x"===t?o=this._pickupPositionOnPage.y:("y"===this.lockAxis||"y"===t)&&(n=this._pickupPositionOnPage.x),this._boundaryRect){const{x:r,y:a}=this._pickupPositionInElement,d=this._boundaryRect,{width:u,height:f}=this._getPreviewRect(),x=d.top+a,b=d.bottom-(f-a);n=mi(n,d.left+r,d.right-(u-r)),o=mi(o,x,b)}return{x:n,y:o}}_updatePointerDirectionDelta(s){const{x:t,y:n}=s,o=this._pointerDirectionDelta,r=this._pointerPositionAtLastDirectionChange,a=Math.abs(t-r.x),d=Math.abs(n-r.y);return a>this._config.pointerDirectionChangeThreshold&&(o.x=t>r.x?1:-1,r.x=t),d>this._config.pointerDirectionChangeThreshold&&(o.y=n>r.y?1:-1,r.y=n),o}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const s=this._handles.length>0||!this.isDragging();s!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=s,lt(this._rootElement,s))}_removeRootElementListeners(s){s.removeEventListener("mousedown",this._pointerDown,an),s.removeEventListener("touchstart",this._pointerDown,gi),s.removeEventListener("dragstart",this._nativeDragStart,an)}_applyRootElementTransform(s,t){const n=ln(s,t),o=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=o.transform&&"none"!=o.transform?o.transform:""),o.transform=rn(n,this._initialTransform)}_applyPreviewTransform(s,t){const n=this._previewTemplate?.template?void 0:this._initialTransform,o=ln(s,t);this._preview.style.transform=rn(o,n)}_getDragDistance(s){const t=this._pickupPositionOnPage;return t?{x:s.x-t.x,y:s.y-t.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:s,y:t}=this._passiveTransform;if(0===s&&0===t||this.isDragging()||!this._boundaryElement)return;const n=this._rootElement.getBoundingClientRect(),o=this._boundaryElement.getBoundingClientRect();if(0===o.width&&0===o.height||0===n.width&&0===n.height)return;const r=o.left-n.left,a=n.right-o.right,d=o.top-n.top,u=n.bottom-o.bottom;o.width>n.width?(r>0&&(s+=r),a>0&&(s-=a)):s=0,o.height>n.height?(d>0&&(t+=d),u>0&&(t-=u)):t=0,(s!==this._passiveTransform.x||t!==this._passiveTransform.y)&&this.setFreeDragPosition({y:t,x:s})}_getDragStartDelay(s){const t=this.dragStartDelay;return"number"==typeof t?t:Et(s)?t.touch:t?t.mouse:0}_updateOnScroll(s){const t=this._parentPositions.handleScroll(s);if(t){const n=(0,ye.sA)(s);this._boundaryRect&&n!==this._boundaryElement&&n.contains(this._boundaryElement)&&Pt(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=(0,ye.kV)(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(s,t){const n=this._previewContainer||"global";if("parent"===n)return s;if("global"===n){const o=this._document;return t||o.fullscreenElement||o.webkitFullscreenElement||o.mozFullScreenElement||o.msFullscreenElement||o.body}return(0,D.fI)(n)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialClientRect),this._previewRect}_getTargetHandle(s){return this._handles.find(t=>s.target&&(s.target===t||t.contains(s.target)))}}function ln(i,s){return`translate3d(${Math.round(i)}px, ${Math.round(s)}px, 0)`}function mi(i,s,t){return Math.max(s,Math.min(t,i))}function Et(i){return"t"===i.type[0]}function _i(i,s){const t=i.rootNodes;if(1===t.length&&t[0].nodeType===s.ELEMENT_NODE)return t[0];const n=s.createElement("div");return t.forEach(o=>n.appendChild(o)),n}function fi(i,s){i.style.width=`${s.width}px`,i.style.height=`${s.height}px`,i.style.transform=ln(s.left,s.top)}function It(i,s){return Math.max(0,Math.min(s,i))}class Ao{constructor(s,t){this._element=s,this._dragDropRegistry=t,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(s){this.withItems(s)}sort(s,t,n,o){const r=this._itemPositions,a=this._getItemIndexFromPointerPosition(s,t,n,o);if(-1===a&&r.length>0)return null;const d="horizontal"===this.orientation,u=r.findIndex(E=>E.drag===s),f=r[a],b=f.clientRect,P=u>a?1:-1,Y=this._getItemOffsetPx(r[u].clientRect,b,P),V=this._getSiblingOffsetPx(u,r,P),z=r.slice();return function Io(i,s,t){const n=It(s,i.length-1),o=It(t,i.length-1);if(n===o)return;const r=i[n],a=o<n?-1:1;for(let d=n;d!==o;d+=a)i[d]=i[d+a];i[o]=r}(r,u,a),r.forEach((E,Ge)=>{if(z[Ge]===E)return;const se=E.drag===s,De=se?Y:V,Dt=se?s.getPlaceholderElement():E.drag.getRootElement();E.offset+=De,d?(Dt.style.transform=rn(`translate3d(${Math.round(E.offset)}px, 0, 0)`,E.initialTransform),Pt(E.clientRect,0,De)):(Dt.style.transform=rn(`translate3d(0, ${Math.round(E.offset)}px, 0)`,E.initialTransform),Pt(E.clientRect,De,0))}),this._previousSwap.overlaps=Ln(b,t,n),this._previousSwap.drag=f.drag,this._previousSwap.delta=d?o.x:o.y,{previousIndex:u,currentIndex:a}}enter(s,t,n,o){const r=null==o||o<0?this._getItemIndexFromPointerPosition(s,t,n):o,a=this._activeDraggables,d=a.indexOf(s),u=s.getPlaceholderElement();let f=a[r];if(f===s&&(f=a[r+1]),!f&&(null==r||-1===r||r<a.length-1)&&this._shouldEnterAsFirstChild(t,n)&&(f=a[0]),d>-1&&a.splice(d,1),f&&!this._dragDropRegistry.isDragging(f)){const x=f.getRootElement();x.parentElement.insertBefore(u,x),a.splice(r,0,s)}else(0,D.fI)(this._element).appendChild(u),a.push(s);u.style.transform="",this._cacheItemPositions()}withItems(s){this._activeDraggables=s.slice(),this._cacheItemPositions()}withSortPredicate(s){this._sortPredicate=s}reset(){this._activeDraggables.forEach(s=>{const t=s.getRootElement();if(t){const n=this._itemPositions.find(o=>o.drag===s)?.initialTransform;t.style.transform=n||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(s){return("horizontal"===this.orientation&&"rtl"===this.direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(n=>n.drag===s)}updateOnScroll(s,t){this._itemPositions.forEach(({clientRect:n})=>{Pt(n,s,t)}),this._itemPositions.forEach(({drag:n})=>{this._dragDropRegistry.isDragging(n)&&n._sortFromLastPointerPosition()})}_cacheItemPositions(){const s="horizontal"===this.orientation;this._itemPositions=this._activeDraggables.map(t=>{const n=t.getVisibleElement();return{drag:t,offset:0,initialTransform:n.style.transform||"",clientRect:kn(n)}}).sort((t,n)=>s?t.clientRect.left-n.clientRect.left:t.clientRect.top-n.clientRect.top)}_getItemOffsetPx(s,t,n){const o="horizontal"===this.orientation;let r=o?t.left-s.left:t.top-s.top;return-1===n&&(r+=o?t.width-s.width:t.height-s.height),r}_getSiblingOffsetPx(s,t,n){const o="horizontal"===this.orientation,r=t[s].clientRect,a=t[s+-1*n];let d=r[o?"width":"height"]*n;if(a){const u=o?"left":"top",f=o?"right":"bottom";-1===n?d-=a.clientRect[u]-r[f]:d+=r[u]-a.clientRect[f]}return d}_shouldEnterAsFirstChild(s,t){if(!this._activeDraggables.length)return!1;const n=this._itemPositions,o="horizontal"===this.orientation;if(n[0].drag!==this._activeDraggables[0]){const a=n[n.length-1].clientRect;return o?s>=a.right:t>=a.bottom}{const a=n[0].clientRect;return o?s<=a.left:t<=a.top}}_getItemIndexFromPointerPosition(s,t,n,o){const r="horizontal"===this.orientation,a=this._itemPositions.findIndex(({drag:d,clientRect:u})=>d!==s&&((!o||d!==this._previousSwap.drag||!this._previousSwap.overlaps||(r?o.x:o.y)!==this._previousSwap.delta)&&(r?t>=Math.floor(u.left)&&t<Math.floor(u.right):n>=Math.floor(u.top)&&n<Math.floor(u.bottom))));return-1!==a&&this._sortPredicate(a,s)?a:-1}}class Do{constructor(s,t,n,o,r){this._dragDropRegistry=t,this._ngZone=o,this._viewportRuler=r,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new O.x,this.entered=new O.x,this.exited=new O.x,this.dropped=new O.x,this.sorted=new O.x,this.receivingStarted=new O.x,this.receivingStopped=new O.x,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=Ot.w0.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new O.x,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),(0,Mo.F)(0,wo.Z).pipe((0,on.R)(this._stopScrollTimers)).subscribe(()=>{const a=this._scrollNode,d=this.autoScrollStep;1===this._verticalScrollDirection?a.scrollBy(0,-d):2===this._verticalScrollDirection&&a.scrollBy(0,d),1===this._horizontalScrollDirection?a.scrollBy(-d,0):2===this._horizontalScrollDirection&&a.scrollBy(d,0)})},this.element=(0,D.fI)(s),this._document=n,this.withScrollableParents([this.element]),t.registerDropContainer(this),this._parentPositions=new ci(n),this._sortStrategy=new Ao(this.element,t),this._sortStrategy.withSortPredicate((a,d)=>this.sortPredicate(a,d,this))}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(s,t,n,o){this._draggingStarted(),null==o&&this.sortingDisabled&&(o=this._draggables.indexOf(s)),this._sortStrategy.enter(s,t,n,o),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:s,container:this,currentIndex:this.getItemIndex(s)})}exit(s){this._reset(),this.exited.next({item:s,container:this})}drop(s,t,n,o,r,a,d,u={}){this._reset(),this.dropped.next({item:s,currentIndex:t,previousIndex:n,container:this,previousContainer:o,isPointerOverContainer:r,distance:a,dropPoint:d,event:u})}withItems(s){const t=this._draggables;return this._draggables=s,s.forEach(n=>n._withDropContainer(this)),this.isDragging()&&(t.filter(o=>o.isDragging()).every(o=>-1===s.indexOf(o))?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(s){return this._sortStrategy.direction=s,this}connectedTo(s){return this._siblings=s.slice(),this}withOrientation(s){return this._sortStrategy.orientation=s,this}withScrollableParents(s){const t=(0,D.fI)(this.element);return this._scrollableElements=-1===s.indexOf(t)?[t,...s]:s.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(s){return this._isDragging?this._sortStrategy.getItemIndex(s):this._draggables.indexOf(s)}isReceiving(){return this._activeSiblings.size>0}_sortItem(s,t,n,o){if(this.sortingDisabled||!this._clientRect||!li(this._clientRect,.05,t,n))return;const r=this._sortStrategy.sort(s,t,n,o);r&&this.sorted.next({previousIndex:r.previousIndex,currentIndex:r.currentIndex,container:this,item:s})}_startScrollingIfNecessary(s,t){if(this.autoScrollDisabled)return;let n,o=0,r=0;if(this._parentPositions.positions.forEach((a,d)=>{d===this._document||!a.clientRect||n||li(a.clientRect,.05,s,t)&&([o,r]=function Fo(i,s,t,n){const o=xi(s,n),r=bi(s,t);let a=0,d=0;if(o){const u=i.scrollTop;1===o?u>0&&(a=1):i.scrollHeight-u>i.clientHeight&&(a=2)}if(r){const u=i.scrollLeft;1===r?u>0&&(d=1):i.scrollWidth-u>i.clientWidth&&(d=2)}return[a,d]}(d,a.clientRect,s,t),(o||r)&&(n=d))}),!o&&!r){const{width:a,height:d}=this._viewportRuler.getViewportSize(),u={width:a,height:d,top:0,right:a,bottom:d,left:0};o=xi(u,t),r=bi(u,s),n=window}n&&(o!==this._verticalScrollDirection||r!==this._horizontalScrollDirection||n!==this._scrollNode)&&(this._verticalScrollDirection=o,this._horizontalScrollDirection=r,this._scrollNode=n,(o||r)&&n?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const s=(0,D.fI)(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=s.msScrollSnapType||s.scrollSnapType||"",s.scrollSnapType=s.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const s=(0,D.fI)(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(s).clientRect}_reset(){this._isDragging=!1;const s=(0,D.fI)(this.element).style;s.scrollSnapType=s.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(t=>t._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(s,t){return null!=this._clientRect&&Ln(this._clientRect,s,t)}_getSiblingContainerFromPosition(s,t,n){return this._siblings.find(o=>o._canReceive(s,t,n))}_canReceive(s,t,n){if(!this._clientRect||!Ln(this._clientRect,t,n)||!this.enterPredicate(s,this))return!1;const o=this._getShadowRoot().elementFromPoint(t,n);if(!o)return!1;const r=(0,D.fI)(this.element);return o===r||r.contains(o)}_startReceiving(s,t){const n=this._activeSiblings;!n.has(s)&&t.every(o=>this.enterPredicate(o,this)||this._draggables.indexOf(o)>-1)&&(n.add(s),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:s,receiver:this,items:t}))}_stopReceiving(s){this._activeSiblings.delete(s),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:s,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(s=>{if(this.isDragging()){const t=this._parentPositions.handleScroll(s);t&&this._sortStrategy.updateOnScroll(t.top,t.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const s=(0,ye.kV)((0,D.fI)(this.element));this._cachedShadowRoot=s||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const s=this._sortStrategy.getActiveItemsSnapshot().filter(t=>t.isDragging());this._siblings.forEach(t=>t._startReceiving(this,s))}}function xi(i,s){const{top:t,bottom:n,height:o}=i,r=.05*o;return s>=t-r&&s<=t+r?1:s>=n-r&&s<=n+r?2:0}function bi(i,s){const{left:t,right:n,width:o}=i,r=.05*o;return s>=t-r&&s<=t+r?1:s>=n-r&&s<=n+r?2:0}const cn=(0,ye.i$)({passive:!1,capture:!0});let Uo=(()=>{class i{constructor(t,n){this._ngZone=t,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=o=>o.isDragging(),this.pointerMove=new O.x,this.pointerUp=new O.x,this.scroll=new O.x,this._preventDefaultWhileDragging=o=>{this._activeDragInstances.length>0&&o.preventDefault()},this._persistentTouchmoveListener=o=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&o.preventDefault(),this.pointerMove.next(o))},this._document=n}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,cn)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,cn)}startDragging(t,n){if(!(this._activeDragInstances.indexOf(t)>-1)&&(this._activeDragInstances.push(t),1===this._activeDragInstances.length)){const o=n.type.startsWith("touch");this._globalListeners.set(o?"touchend":"mouseup",{handler:r=>this.pointerUp.next(r),options:!0}).set("scroll",{handler:r=>this.scroll.next(r),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:cn}),o||this._globalListeners.set("mousemove",{handler:r=>this.pointerMove.next(r),options:cn}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((r,a)=>{this._document.addEventListener(a,r.handler,r.options)})})}}stopDragging(t){const n=this._activeDragInstances.indexOf(t);n>-1&&(this._activeDragInstances.splice(n,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(t){return this._activeDragInstances.indexOf(t)>-1}scrolled(t){const n=[this.scroll];return t&&t!==this._document&&n.push(new nn.y(o=>this._ngZone.runOutsideAngular(()=>{const a=d=>{this._activeDragInstances.length&&o.next(d)};return t.addEventListener("scroll",a,!0),()=>{t.removeEventListener("scroll",a,!0)}}))),(0,je.T)(...n)}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((t,n)=>{this._document.removeEventListener(n,t.handler,t.options)}),this._globalListeners.clear()}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(e.R0b),e.LFG(m.K0))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Zo={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let Nn=(()=>{class i{constructor(t,n,o,r){this._document=t,this._ngZone=n,this._viewportRuler=o,this._dragDropRegistry=r}createDrag(t,n=Zo){return new Eo(t,n,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(t){return new Do(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(m.K0),e.LFG(e.R0b),e.LFG(ie.rL),e.LFG(Uo))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const zn=new e.OlP("CDK_DRAG_PARENT"),Hn=new e.OlP("CdkDragHandle"),yi=new e.OlP("CdkDragPlaceholder"),Ti=new e.OlP("CdkDragPreview");let qn=(()=>{class i{get matchSize(){return this._matchSize}set matchSize(t){this._matchSize=(0,D.Ig)(t)}constructor(t){this.templateRef=t,this._matchSize=!1}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.Rgc))},i.\u0275dir=e.lG2({type:i,selectors:[["ng-template","cdkDragPreview",""]],inputs:{data:"data",matchSize:"matchSize"},standalone:!0,features:[e._Bn([{provide:Ti,useExisting:i}])]}),i})();const Mi=new e.OlP("CDK_DRAG_CONFIG"),wi=new e.OlP("CdkDropList");let Jn=(()=>{class i{get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(t){this._disabled=(0,D.Ig)(t),this._dragRef.disabled=this._disabled}constructor(t,n,o,r,a,d,u,f,x,b,P){this.element=t,this.dropContainer=n,this._ngZone=r,this._viewContainerRef=a,this._dir=u,this._changeDetectorRef=x,this._selfHandle=b,this._parentDrag=P,this._destroyed=new O.x,this.started=new e.vpe,this.released=new e.vpe,this.ended=new e.vpe,this.entered=new e.vpe,this.exited=new e.vpe,this.dropped=new e.vpe,this.moved=new nn.y(Y=>{const V=this._dragRef.moved.pipe((0,ii.U)(z=>({source:this,pointerPosition:z.pointerPosition,event:z.event,delta:z.delta,distance:z.distance}))).subscribe(Y);return()=>{V.unsubscribe()}}),this._dragRef=f.createDrag(t,{dragStartThreshold:d&&null!=d.dragStartThreshold?d.dragStartThreshold:5,pointerDirectionChangeThreshold:d&&null!=d.pointerDirectionChangeThreshold?d.pointerDirectionChangeThreshold:5,zIndex:d?.zIndex}),this._dragRef.data=this,i._dragInstances.push(this),d&&this._assignDefaults(d),n&&(this._dragRef._withDropContainer(n._dropListRef),n.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(t){this._dragRef.setFreeDragPosition(t)}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,sn.q)(1),(0,on.R)(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})})}ngOnChanges(t){const n=t.rootElementSelector,o=t.freeDragPosition;n&&!n.firstChange&&this._updateRootElement(),o&&!o.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);const t=i._dragInstances.indexOf(this);t>-1&&i._dragInstances.splice(t,1),this._ngZone.runOutsideAngular(()=>{this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_updateRootElement(){const t=this.element.nativeElement;let n=t;this.rootElementSelector&&(n=void 0!==t.closest?t.closest(this.rootElementSelector):t.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(n||t)}_getBoundaryElement(){const t=this.boundaryElement;return t?"string"==typeof t?this.element.nativeElement.closest(t):(0,D.fI)(t):null}_syncInputs(t){t.beforeStarted.subscribe(()=>{if(!t.isDragging()){const n=this._dir,o=this.dragStartDelay,r=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,a=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.dragStartDelay="object"==typeof o&&o?o:(0,D.su)(o),t.constrainPosition=this.constrainPosition,t.previewClass=this.previewClass,t.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(r).withPreviewTemplate(a).withPreviewContainer(this.previewContainer||"global"),n&&t.withDirection(n.value)}}),t.beforeStarted.pipe((0,sn.q)(1)).subscribe(()=>{if(this._parentDrag)return void t.withParent(this._parentDrag._dragRef);let n=this.element.nativeElement.parentElement;for(;n;){if(n.classList.contains("cdk-drag")){t.withParent(i._dragInstances.find(o=>o.element.nativeElement===n)?._dragRef||null);break}n=n.parentElement}})}_handleEvents(t){t.started.subscribe(n=>{this.started.emit({source:this,event:n.event}),this._changeDetectorRef.markForCheck()}),t.released.subscribe(n=>{this.released.emit({source:this,event:n.event})}),t.ended.subscribe(n=>{this.ended.emit({source:this,distance:n.distance,dropPoint:n.dropPoint,event:n.event}),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(n=>{this.entered.emit({container:n.container.data,item:this,currentIndex:n.currentIndex})}),t.exited.subscribe(n=>{this.exited.emit({container:n.container.data,item:this})}),t.dropped.subscribe(n=>{this.dropped.emit({previousIndex:n.previousIndex,currentIndex:n.currentIndex,previousContainer:n.previousContainer.data,container:n.container.data,isPointerOverContainer:n.isPointerOverContainer,item:this,distance:n.distance,dropPoint:n.dropPoint,event:n.event})})}_assignDefaults(t){const{lockAxis:n,dragStartDelay:o,constrainPosition:r,previewClass:a,boundaryElement:d,draggingDisabled:u,rootElementSelector:f,previewContainer:x}=t;this.disabled=u??!1,this.dragStartDelay=o||0,n&&(this.lockAxis=n),r&&(this.constrainPosition=r),a&&(this.previewClass=a),d&&(this.boundaryElement=d),f&&(this.rootElementSelector=f),x&&(this.previewContainer=x)}_setupHandlesListener(){this._handles.changes.pipe((0,Fn.O)(this._handles),(0,_e.b)(t=>{const n=t.filter(o=>o._parentDrag===this).map(o=>o.element);this._selfHandle&&this.rootElementSelector&&n.push(this.element),this._dragRef.withHandles(n)}),(0,oi.w)(t=>(0,je.T)(...t.map(n=>n._stateChanges.pipe((0,Fn.O)(n))))),(0,on.R)(this._destroyed)).subscribe(t=>{const n=this._dragRef,o=t.element.nativeElement;t.disabled?n.disableHandle(o):n.enableHandle(o)})}}return i._dragInstances=[],i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(wi,12),e.Y36(m.K0),e.Y36(e.R0b),e.Y36(e.s_b),e.Y36(Mi,8),e.Y36(si.Is,8),e.Y36(Nn),e.Y36(e.sBO),e.Y36(Hn,10),e.Y36(zn,12))},i.\u0275dir=e.lG2({type:i,selectors:[["","cdkDrag",""]],contentQueries:function(t,n,o){if(1&t&&(e.Suo(o,Ti,5),e.Suo(o,yi,5),e.Suo(o,Hn,5)),2&t){let r;e.iGM(r=e.CRH())&&(n._previewTemplate=r.first),e.iGM(r=e.CRH())&&(n._placeholderTemplate=r.first),e.iGM(r=e.CRH())&&(n._handles=r)}},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(t,n){2&t&&e.ekj("cdk-drag-disabled",n.disabled)("cdk-drag-dragging",n._dragRef.isDragging())},inputs:{data:["cdkDragData","data"],lockAxis:["cdkDragLockAxis","lockAxis"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],boundaryElement:["cdkDragBoundary","boundaryElement"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"],disabled:["cdkDragDisabled","disabled"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],previewContainer:["cdkDragPreviewContainer","previewContainer"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],standalone:!0,features:[e._Bn([{provide:zn,useExisting:i}]),e.TTD]}),i})();const Qn=new e.OlP("CdkDropListGroup");let zo=0,Yn=(()=>{class i{get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(t){this._dropListRef.disabled=this._disabled=(0,D.Ig)(t)}constructor(t,n,o,r,a,d,u){this.element=t,this._changeDetectorRef=o,this._scrollDispatcher=r,this._dir=a,this._group=d,this._destroyed=new O.x,this.connectedTo=[],this.id="cdk-drop-list-"+zo++,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.dropped=new e.vpe,this.entered=new e.vpe,this.exited=new e.vpe,this.sorted=new e.vpe,this._unsortedItems=new Set,this._dropListRef=n.createDropList(t),this._dropListRef.data=this,u&&this._assignDefaults(u),this._dropListRef.enterPredicate=(f,x)=>this.enterPredicate(f.data,x.data),this._dropListRef.sortPredicate=(f,x,b)=>this.sortPredicate(f,x.data,b.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),i._dropLists.push(this),d&&d._items.add(this)}addItem(t){this._unsortedItems.add(t),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(t){this._unsortedItems.delete(t),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((t,n)=>t._dragRef.getVisibleElement().compareDocumentPosition(n._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){const t=i._dropLists.indexOf(this);t>-1&&i._dropLists.splice(t,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(t){this._dir&&this._dir.change.pipe((0,Fn.O)(this._dir.value),(0,on.R)(this._destroyed)).subscribe(n=>t.withDirection(n)),t.beforeStarted.subscribe(()=>{const n=(0,D.Eq)(this.connectedTo).map(o=>"string"==typeof o?i._dropLists.find(a=>a.id===o):o);if(this._group&&this._group._items.forEach(o=>{-1===n.indexOf(o)&&n.push(o)}),!this._scrollableParentsResolved){const o=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(r=>r.getElementRef().nativeElement);this._dropListRef.withScrollableParents(o),this._scrollableParentsResolved=!0}t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.sortingDisabled=(0,D.Ig)(this.sortingDisabled),t.autoScrollDisabled=(0,D.Ig)(this.autoScrollDisabled),t.autoScrollStep=(0,D.su)(this.autoScrollStep,2),t.connectedTo(n.filter(o=>o&&o!==this).map(o=>o._dropListRef)).withOrientation(this.orientation)})}_handleEvents(t){t.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(n=>{this.entered.emit({container:this,item:n.item.data,currentIndex:n.currentIndex})}),t.exited.subscribe(n=>{this.exited.emit({container:this,item:n.item.data}),this._changeDetectorRef.markForCheck()}),t.sorted.subscribe(n=>{this.sorted.emit({previousIndex:n.previousIndex,currentIndex:n.currentIndex,container:this,item:n.item.data})}),t.dropped.subscribe(n=>{this.dropped.emit({previousIndex:n.previousIndex,currentIndex:n.currentIndex,previousContainer:n.previousContainer.data,container:n.container.data,item:n.item.data,isPointerOverContainer:n.isPointerOverContainer,distance:n.distance,dropPoint:n.dropPoint,event:n.event}),this._changeDetectorRef.markForCheck()}),(0,je.T)(t.receivingStarted,t.receivingStopped).subscribe(()=>this._changeDetectorRef.markForCheck())}_assignDefaults(t){const{lockAxis:n,draggingDisabled:o,sortingDisabled:r,listAutoScrollDisabled:a,listOrientation:d}=t;this.disabled=o??!1,this.sortingDisabled=r??!1,this.autoScrollDisabled=a??!1,this.orientation=d||"vertical",n&&(this.lockAxis=n)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(t=>t._dragRef))}}return i._dropLists=[],i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(Nn),e.Y36(e.sBO),e.Y36(ie.mF),e.Y36(si.Is,8),e.Y36(Qn,12),e.Y36(Mi,8))},i.\u0275dir=e.lG2({type:i,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(t,n){2&t&&(e.uIk("id",n.id),e.ekj("cdk-drop-list-disabled",n.disabled)("cdk-drop-list-dragging",n._dropListRef.isDragging())("cdk-drop-list-receiving",n._dropListRef.isReceiving()))},inputs:{connectedTo:["cdkDropListConnectedTo","connectedTo"],data:["cdkDropListData","data"],orientation:["cdkDropListOrientation","orientation"],id:"id",lockAxis:["cdkDropListLockAxis","lockAxis"],disabled:["cdkDropListDisabled","disabled"],sortingDisabled:["cdkDropListSortingDisabled","sortingDisabled"],enterPredicate:["cdkDropListEnterPredicate","enterPredicate"],sortPredicate:["cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:["cdkDropListAutoScrollDisabled","autoScrollDisabled"],autoScrollStep:["cdkDropListAutoScrollStep","autoScrollStep"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],standalone:!0,features:[e._Bn([{provide:Qn,useValue:void 0},{provide:wi,useExisting:i}])]}),i})(),Ho=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[Nn],imports:[ie.ZD]}),i})();var qo=_(7328),Jo=_(2420);const Qo=new nn.y(Jo.Z);var Vo=_(9769),Go=_(6306);function Si(i){return!(!i.parentElement||"picture"!==i.parentElement.nodeName.toLowerCase())}function At(i){return"img"===i.nodeName.toLowerCase()}function Oi(i,s,t){return At(i)?t&&"srcset"in i?i.srcset=s:i.src=s:i.style.backgroundImage=`url('${s}')`,i}function Vn(i){return s=>{const t=s.parentElement.getElementsByTagName("source");for(let n=0;n<t.length;n++){const o=t[n].getAttribute(i);o&&("srcset"in t[n]?t[n].srcset=o:t[n].src=o)}}}const Wo=Vn("defaultImage"),Pi=Vn("lazyLoad"),Ko=Vn("errorImage");function Gn(i){return(s,t,n)=>{At(s)&&Si(s)&&i(s),t&&Oi(s,t,n)}}const $o=Gn(Wo),Xo=Gn(Pi),jo=Gn(Ko);class es{constructor(){this.navigator=function Bo(){return typeof window<"u"?window.navigator:void 0}()}setPlatformId(s){this.platformId=s}onDestroy(s){}onAttributeChange(s){}}function Ei(i,s){i.className=i.className.replace(s,"")}function Bn(i,s){i.className.includes(s)||(i.className+=` ${s}`)}class ns extends es{setup(s){$o(s.element,s.defaultImagePath,s.useSrcset),s.imagePath&&Bn(s.element,"ng-lazyloading"),function ts(i,s){return i.className&&i.className.includes(s)}(s.element,"ng-lazyloaded")&&Ei(s.element,"ng-lazyloaded")}finally(s){Bn(s.element,"ng-lazyloaded"),Ei(s.element,"ng-lazyloading")}loadImage(s){if(this.skipLazyLoading(s))return[s.imagePath];const{element:t,useSrcset:n,imagePath:o,decode:r}=s;let a;return At(t)&&Si(t)?(a=t.parentNode.cloneNode(!0).getElementsByTagName("img")[0],Pi(a),Oi(a,o,n)):(a=new Image,At(t)&&t.referrerPolicy&&(a.referrerPolicy=t.referrerPolicy),At(t)&&t.sizes&&(a.sizes=t.sizes),n&&"srcset"in a?a.srcset=o:a.src=o),r&&a.decode?a.decode().then(()=>o):new Promise((d,u)=>{a.onload=()=>d(o),a.onerror=()=>u(null)})}setErrorImage(s,t){const{element:n,useSrcset:o,errorImagePath:r}=t;jo(n,r,o),Bn(n,"ng-failed-lazyloaded")}setLoadedImage(s,t){const{element:n,useSrcset:o}=t;Xo(n,s,o)}isDisabled(){return(0,m.PM)(this.platformId)&&!this.isBot()}skipLazyLoading(s){return this.isBot(s)}isBot(s){return!!this.navigator?.userAgent&&/googlebot|bingbot|yandex|baiduspider|facebookexternalhit|twitterbot|rogerbot|linkedinbot|embedly|quora\ link\ preview|showyoubot|outbrain|pinterest\/0\.|pinterestbot|slackbot|vkShare|W3C_Validator|whatsapp|duckduckbot|prerender/i.test(this.navigator.userAgent)}}class is extends ns{constructor(){super(...arguments),this.observers=new WeakMap,this.intersectionSubject=new O.x,this.uniqKey={}}getObservable(s){if(this.skipLazyLoading(s))return(0,ke.of)({isIntersecting:!0});if(s.customObservable)return s.customObservable;const t=s.scrollContainer||this.uniqKey,n={root:s.scrollContainer||null};s.offset&&(n.rootMargin=`${s.offset}px`);let o=this.observers.get(t);return o||(o=new IntersectionObserver(r=>this.loadingCallback(r),n),this.observers.set(t,o)),o.observe(s.element),nn.y.create(r=>{const a=this.intersectionSubject.pipe((0,ae.h)(d=>d.target===s.element)).subscribe(r);return()=>{a.unsubscribe(),o.unobserve(s.element)}})}isVisible(s){return s.isIntersecting}loadingCallback(s){s.forEach(t=>this.intersectionSubject.next(t))}}const Ii=new e.OlP("LazyLoadImageHooks");let ss=(()=>{class i{constructor(t,n,o,r){this.onStateChange=new e.vpe,this.elementRef=t,this.ngZone=n,this.propertyChanges$=new qo.t,this.hooks=r,this.hooks.setPlatformId(o),this.uid=Math.random().toString(36).substr(2,9)}ngOnChanges(){!0===this.debug&&!this.debugSubscription&&(this.debugSubscription=this.onStateChange.subscribe(t=>console.log(t))),this.propertyChanges$.next({element:this.elementRef.nativeElement,imagePath:this.lazyImage,defaultImagePath:this.defaultImage,errorImagePath:this.errorImage,useSrcset:this.useSrcset,offset:this.offset?0|this.offset:0,scrollContainer:this.scrollTarget,customObservable:this.customObservable,decode:this.decode,onStateChange:this.onStateChange,id:this.uid})}ngAfterContentInit(){if(this.hooks.isDisabled())return null;this.ngZone.runOutsideAngular(()=>{this.loadSubscription=this.propertyChanges$.pipe((0,_e.b)(t=>this.hooks.onAttributeChange(t)),(0,_e.b)(t=>t.onStateChange.emit({reason:"setup"})),(0,_e.b)(t=>this.hooks.setup(t)),(0,oi.w)(t=>t.imagePath?this.hooks.getObservable(t).pipe(function os(i,s){return t=>t.pipe((0,_e.b)(n=>s.onStateChange.emit({reason:"observer-emit",data:n})),(0,ae.h)(n=>i.isVisible(n,s)),(0,sn.q)(1),(0,_e.b)(()=>s.onStateChange.emit({reason:"start-loading"})),(0,Vo.z)(()=>i.loadImage(s)),(0,_e.b)(()=>s.onStateChange.emit({reason:"mount-image"})),(0,_e.b)(n=>i.setLoadedImage(n,s)),(0,_e.b)(()=>s.onStateChange.emit({reason:"loading-succeeded"})),(0,ii.U)(()=>!0),(0,Go.K)(n=>(s.onStateChange.emit({reason:"loading-failed",data:n}),i.setErrorImage(n,s),(0,ke.of)(!1))),(0,_e.b)(()=>{s.onStateChange.emit({reason:"finally"}),i.finally(s)}))}(this.hooks,t)):function Yo(){return Qo}())).subscribe({next:()=>null})})}ngOnDestroy(){this.propertyChanges$.pipe((0,sn.q)(1)).subscribe({next:t=>this.hooks.onDestroy(t)}).unsubscribe(),this.loadSubscription?.unsubscribe(),this.debugSubscription?.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(e.R0b),e.Y36(e.Lbi),e.Y36(Ii))},i.\u0275dir=e.lG2({type:i,selectors:[["","lazyLoad",""]],inputs:{lazyImage:["lazyLoad","lazyImage"],defaultImage:"defaultImage",errorImage:"errorImage",scrollTarget:"scrollTarget",customObservable:"customObservable",offset:"offset",useSrcset:"useSrcset",decode:"decode",debug:"debug"},outputs:{onStateChange:"onStateChange"},features:[e.TTD]}),i})(),rs=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[{provide:Ii,useClass:is}]}),i})();class oe{constructor(s,t,n,o){this.left=s,this.top=t,this.right=n,this.bottom=o}static fromElement(s){const{left:t,top:n,right:o,bottom:r}=s.getBoundingClientRect();return 0===t&&0===n&&0===o&&0===r?oe.empty:new oe(t,n,o,r)}static fromWindow(s){return new oe(0,0,s.innerWidth,s.innerHeight)}inflate(s){this.left-=s,this.top-=s,this.right+=s,this.bottom+=s}intersectsWith(s){return s.left<this.right&&this.left<s.right&&s.top<this.bottom&&this.top<s.bottom}getIntersectionWith(s){const t=Math.max(this.left,s.left),n=Math.max(this.top,s.top),o=Math.min(this.right,s.right),r=Math.min(this.bottom,s.bottom);return o>=t&&r>=n?new oe(t,n,o,r):oe.empty}}oe.empty=new oe(0,0,0,0);var Ai=_(3264),as=_(3602);let Di=(()=>{class i{transform(t,n){return t.filter(o=>n(o))}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275pipe=e.Yjl({name:"arrayFilter",type:i,pure:!0}),i})();function ls(i,s){1&i&&e.GkF(0)}const Fi=function(i){return{$implicit:i}};function cs(i,s){if(1&i&&(e.ynx(0),e.YNc(1,ls,1,0,"ng-container",17),e.BQk()),2&i){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngTemplateOutlet",n.templates.cdkPreview)("ngTemplateOutletContext",e.VKq(2,Fi,t.name))}}function ds(i,s){if(1&i&&e._UZ(0,"img",19),2&i){const t=e.oxw().$implicit;e.Q6J("lazyLoad",t.embedUrl)("offset",100)("alt",t.name)}}function ps(i,s){1&i&&e.GkF(0)}function hs(i,s){1&i&&e.GkF(0)}function us(i,s){1&i&&e.GkF(0)}const gs=function(i,s){return{pending:i,selected:s}},ms=function(i){return{$implicit:i,addAfterContent:!0}},_s=function(i){return{$implicit:i,firstPlacement:"left"}};function fs(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"li",4),e.NdJ("contextmenu",function(o){const a=e.CHM(t).$implicit,d=e.oxw(2);return e.KtG(d.emitRightClick(o,a,!1))})("press",function(o){const a=e.CHM(t).$implicit,d=e.oxw(2);return e.KtG(d.emitRightClick(o,a,!0,!1))})("tap",function(o){const a=e.CHM(t).$implicit,d=e.oxw(2);return e.KtG(d.emitRightClick(o,a,!0,!0))})("cdkDragStarted",function(){const r=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.draggedFileEvent.emit(r))})("cdkDragReleased",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.draggedFileEvent.emit(void 0))}),e.YNc(1,cs,2,4,"ng-container",5),e.TgZ(2,"div",6)(3,"div",7),e.YNc(4,ds,1,3,"img",8),e.TgZ(5,"div",9),e._UZ(6,"app-svg-icon",10),e.qZA()(),e.TgZ(7,"div",11)(8,"div",12)(9,"a",13),e._UZ(10,"div",14)(11,"div",15),e.qZA(),e.TgZ(12,"div",16),e.YNc(13,ps,1,0,"ng-container",17),e.YNc(14,hs,1,0,"ng-container",17),e.qZA()(),e.TgZ(15,"div",18),e.YNc(16,us,1,0,"ng-container",17),e.qZA()()()()}if(2&i){const t=s.$implicit,n=e.oxw(2);e.Q6J("ngClass",e.WLB(15,gs,t.pending,t.selected))("cdkDragDisabled",n.touchDevice||t.pending),e.xp6(4),e.Q6J("ngIf",t.isImage),e.xp6(2),e.Q6J("setKey",n.iconSetKeys.FILE_ICONS)("iconType",t.ext)("width",64),e.xp6(3),e.Q6J("href",t.url,e.LSH),e.xp6(1),e.Q6J("innerText",t.filename),e.xp6(1),e.Q6J("innerText","."+t.ext),e.xp6(2),e.Q6J("ngTemplateOutlet",n.templates.size)("ngTemplateOutletContext",e.VKq(18,ms,t.size)),e.xp6(1),e.Q6J("ngTemplateOutlet",n.templates.time)("ngTemplateOutletContext",e.VKq(20,Fi,t.time)),e.xp6(2),e.Q6J("ngTemplateOutlet",n.templates.dropdown)("ngTemplateOutletContext",e.VKq(22,_s,t))}}function vs(i,s){if(1&i&&(e.ynx(0),e.YNc(1,fs,17,24,"li",3),e.BQk()),2&i){const t=s.$implicit;e.xp6(1),e.Q6J("ngForOf",t)}}const Cs=function(i){return{"touch-device":i}};let xs=(()=>{class i{constructor(t){this.breakpointObserver=t,this.sortedList=[],this.rightClickEvent=new e.vpe,this.draggedFileEvent=new e.vpe,this.touchDevice=Z.eX,this.filterCallback=n=>!n.isFiltered,this.filesPerRow=1,this.fileListGap=16,this.iconSetKeys=ti.C,this.filesPerRowMap=new Map([[v.Ky.W_768_I_1,1],[v.Ky.W_933_I_2,2],[v.Ky.W_960_I_3,3],[v.Ky.W_1226_I_2,2],[v.Ky.W_1540_I_3,3],[v.Ky.W_1854_I_4,4],[v.Ky.W_2168_I_5,5],[v.Ky.W_2482_I_6,6],[v.Ky.W_2796_I_7,7],[v.Ky.W_3110_I_8,8],[v.Ky.W_3424_I_9,9],[v.Ky.W_3738_I_10,10]])}ngOnInit(){this.breakpointObserverSubscription=this.breakpointObserver.observe(Object.values(v.Ky)).subscribe(t=>{for(const n of Object.keys(t.breakpoints))t.breakpoints[n]&&(this.filesPerRow=this.filesPerRowMap.get(n)??1);this.fileListGap=t.breakpoints[v.Ky.W_768_I_1]||t.breakpoints[v.Ky.W_933_I_2]||t.breakpoints[v.Ky.W_960_I_3]?16:24})}emitRightClick(t,n,o,r){t.preventDefault(),!(!Z.eX&&o||Z.eX&&!o)&&this.rightClickEvent.emit({file:n,isTap:r||!1})}ngOnDestroy(){this.breakpointObserverSubscription?.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(To.Yg))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-upload-file-grid-list"]],inputs:{templates:"templates",sortedList:"sortedList"},outputs:{rightClickEvent:"rightClickEvent",draggedFileEvent:"draggedFileEvent"},decls:5,vars:12,consts:[["scrollWindow","",1,"file-grid-scroll",3,"itemSize","ngClass"],["cdkDropList","","cdkDropListSortingDisabled","",1,"list-unstyled","mb-0","d-grid","file-list","file-grid-list",3,"cdkDropListData"],[4,"cdkVirtualFor","cdkVirtualForOf"],["class","min-w-0 file-item","cdkDrag","",3,"ngClass","cdkDragDisabled","contextmenu","press","tap","cdkDragStarted","cdkDragReleased",4,"ngFor","ngForOf"],["cdkDrag","",1,"min-w-0","file-item",3,"ngClass","cdkDragDisabled","contextmenu","press","tap","cdkDragStarted","cdkDragReleased"],[4,"cdkDragPreview"],[1,"flat-container","overflow-hidden","h-100","d-flex","flex-column"],[1,"file-preview","border-bottom","overflow-hidden","text-center","position-relative"],["src","data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D","class","mw-100",3,"lazyLoad","offset","alt",4,"ngIf"],[1,"position-absolute","svg-container"],[1,"d-block",3,"setKey","iconType","width"],[1,"file-info","py-3","ps-3","pe-2","d-flex","align-items-center","flex-grow-1"],[1,"d-flex","flex-column","min-w-0","flex-grow-1","pe-2"],["target","_blank","rel","noreferrer",1,"file-link","d-flex","fw-bold","me-auto","mw-100",3,"href"],[1,"text-truncate",3,"innerText"],[3,"innerText"],[1,"text-muted","fs-xs","d-flex","align-items-center"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"dropdown-tpl"],["src","data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D",1,"mw-100",3,"lazyLoad","offset","alt"]],template:function(t,n){1&t&&(e.TgZ(0,"cdk-virtual-scroll-viewport",0)(1,"ul",1),e.YNc(2,vs,2,1,"ng-container",2),e.ALo(3,"arrayChunk"),e.ALo(4,"arrayFilter"),e.qZA()()),2&t&&(e.Q6J("itemSize",228+n.fileListGap)("ngClass",e.VKq(10,Cs,n.touchDevice)),e.xp6(1),e.Q6J("cdkDropListData",n.sortedList),e.xp6(1),e.Q6J("cdkVirtualForOf",e.xi3(3,4,e.xi3(4,7,n.sortedList,n.filterCallback),n.filesPerRow)))},dependencies:[m.mk,m.sg,m.O5,m.tP,Yn,Jn,qn,ss,ie.xd,ie.x0,ie.N7,ie.LO,Ai.b,as.K,Di],styles:[".file-item.pending[_ngcontent-%COMP%]{opacity:.5}.file-item.pending[_ngcontent-%COMP%]   .dropdown-tpl[_ngcontent-%COMP%]{display:none!important}.file-item.pending[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{pointer-events:none}.cdk-drag-placeholder[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{opacity:.4}.drag-multiple-files[_nghost-%COMP%]   .file-item.selected[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{opacity:.4;pointer-events:none}.cdk-drag-preview[_ngcontent-%COMP%]{min-width:150px}.cdk-drag-dragging[_ngcontent-%COMP%]{display:none}",".file-grid-scroll[_ngcontent-%COMP%]{margin-bottom:-16px!important}[_nghost-%COMP%]:not(.drag-multiple-files)   .file-grid-scroll[_ngcontent-%COMP%]:not(.touch-device)   .file-item[_ngcontent-%COMP%]:not(.pending):hover, .drag-multiple-files[_nghost-%COMP%]   .file-grid-scroll[_ngcontent-%COMP%]:not(.touch-device)   .file-item[_ngcontent-%COMP%]:not(.pending):not(.selected):hover{box-shadow:0 .375rem .25rem #00000013}.file-grid-list[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:16px;padding-bottom:16px!important}.file-item[_ngcontent-%COMP%]{transition:opacity .2s,box-shadow .2s;height:228px}.file-item.selected[_ngcontent-%COMP%]   .flat-container[_ngcontent-%COMP%]{border-color:#c6cfff}.file-item.selected[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]{background-color:#dae0ff}.file-item.selected[_ngcontent-%COMP%]   .file-link[_ngcontent-%COMP%]{text-shadow:0 1px #fff}.flat-container[_ngcontent-%COMP%]{transition:border-color .2s}.file-info[_ngcontent-%COMP%]{transition:background-color .2s}.file-preview[_ngcontent-%COMP%]{height:150px;background-color:rgb(var(--bs-light-rgb))}.file-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{opacity:0;transition:opacity .3s}.file-preview[_ngcontent-%COMP%]   img.ng-lazyloaded[_ngcontent-%COMP%]:not(.ng-failed-lazyloaded){opacity:1}.file-preview[_ngcontent-%COMP%]   img.ng-failed-lazyloaded[_ngcontent-%COMP%]{display:none}.ng-lazyloaded[_ngcontent-%COMP%]:not(.ng-failed-lazyloaded) + .svg-container[_ngcontent-%COMP%], .ng-lazyloading[_ngcontent-%COMP%] + .svg-container[_ngcontent-%COMP%]{display:none}.svg-container[_ngcontent-%COMP%]{left:50%;top:50%;transform:translate(-50%,-50%);background-color:inherit}.file-item[_ngcontent-%COMP%]:not(.cdk-drag-placeholder)   .svg-container[_ngcontent-%COMP%]{opacity:0;animation:_ngcontent-%COMP%_fadeIn07 .3s linear forwards}.cdk-drag-placeholder[_ngcontent-%COMP%]   .svg-container[_ngcontent-%COMP%]{opacity:.7}@keyframes _ngcontent-%COMP%_fadeIn07{0%{opacity:0}to{opacity:.7}}@media (min-width: 768px){.file-grid-list[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(290px,1fr))}}@media (min-width: 960px){.file-grid-list[_ngcontent-%COMP%]{gap:24px;padding-bottom:24px!important}.file-grid-scroll[_ngcontent-%COMP%]{margin-bottom:-24px!important}.file-grid-scroll[_ngcontent-%COMP%]:not(.touch-device){margin-left:-.5rem!important;margin-right:-.5rem!important}.file-grid-scroll[_ngcontent-%COMP%]:not(.touch-device)   .file-list[_ngcontent-%COMP%]{padding-left:.5rem!important;padding-right:.5rem!important}}@media (min-width: 3738px){.file-grid-list[_ngcontent-%COMP%]{grid-template-columns:repeat(10,1fr)}}"]}),i})();function bs(i,s){1&i&&e.GkF(0)}const Wn=function(i){return{$implicit:i}};function ys(i,s){if(1&i&&(e.ynx(0),e.YNc(1,bs,1,0,"ng-container",12),e.BQk()),2&i){const t=e.oxw().$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngTemplateOutlet",n.templates.cdkPreview)("ngTemplateOutletContext",e.VKq(2,Wn,t.name))}}function Ts(i,s){1&i&&e.GkF(0)}function Ms(i,s){1&i&&e.GkF(0)}function ws(i,s){1&i&&e.GkF(0)}const Ss=function(i,s){return{pending:i,selected:s}},Os=function(i){return{$implicit:i,firstPlacement:"left-top"}};function Ps(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"li",4),e.NdJ("contextmenu",function(o){const a=e.CHM(t).$implicit,d=e.oxw();return e.KtG(d.emitRightClick(o,a,!1))})("press",function(o){const a=e.CHM(t).$implicit,d=e.oxw();return e.KtG(d.emitRightClick(o,a,!0,!1))})("tap",function(o){const a=e.CHM(t).$implicit,d=e.oxw();return e.KtG(d.emitRightClick(o,a,!0,!0))})("cdkDragStarted",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.draggedFileEvent.emit(r))})("cdkDragReleased",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.draggedFileEvent.emit(void 0))}),e.YNc(1,ys,2,4,"ng-container",5),e._UZ(2,"app-svg-icon",6),e.TgZ(3,"a",7),e._UZ(4,"div",8)(5,"div",9),e.qZA(),e._UZ(6,"div",10),e.TgZ(7,"div",11),e.YNc(8,Ts,1,0,"ng-container",12),e.qZA(),e.TgZ(9,"div",13),e.YNc(10,Ms,1,0,"ng-container",12),e.qZA(),e.TgZ(11,"div",14),e.YNc(12,ws,1,0,"ng-container",12),e.qZA()()}if(2&i){const t=s.$implicit,n=e.oxw();e.Q6J("ngClass",e.WLB(15,Ss,t.pending,t.selected))("cdkDragDisabled",n.touchDevice||t.pending),e.xp6(2),e.Q6J("setKey",n.iconSetKeys.FILE_ICONS)("iconType",t.ext)("width",24),e.xp6(1),e.Q6J("href",t.url,e.LSH),e.xp6(1),e.Q6J("innerText",t.filename),e.xp6(1),e.Q6J("innerText","."+t.ext),e.xp6(1),e.Q6J("innerText",t.ext),e.xp6(2),e.Q6J("ngTemplateOutlet",n.templates.size)("ngTemplateOutletContext",e.VKq(18,Wn,t.size)),e.xp6(2),e.Q6J("ngTemplateOutlet",n.templates.time)("ngTemplateOutletContext",e.VKq(20,Wn,t.time)),e.xp6(2),e.Q6J("ngTemplateOutlet",n.templates.dropdown)("ngTemplateOutletContext",e.VKq(22,Os,t))}}const Es=function(i){return{"touch-device":i}};let Is=(()=>{class i{constructor(){this.sortedList=[],this.rightClickEvent=new e.vpe,this.draggedFileEvent=new e.vpe,this.touchDevice=Z.eX,this.filterCallback=t=>!t.isFiltered,this.iconSetKeys=ti.C}ngOnInit(){}emitRightClick(t,n,o,r){t.preventDefault(),!(!Z.eX&&o||Z.eX&&!o)&&this.rightClickEvent.emit({file:n,isTap:r||!1})}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-upload-file-simple-list"]],inputs:{templates:"templates",sortedList:"sortedList"},outputs:{rightClickEvent:"rightClickEvent",draggedFileEvent:"draggedFileEvent"},decls:5,vars:9,consts:[[1,"flat-container","overflow-hidden"],["scrollWindow","",1,"file-simple-scroll",3,"itemSize","ngClass"],["cdkDropList","","cdkDropListSortingDisabled","",1,"list-unstyled","mb-0","file-list","file-simple-list",3,"cdkDropListData"],["class","file-item d-grid ps-3 ps-md-4 pe-2 pe-md-3","cdkDrag","",3,"ngClass","cdkDragDisabled","contextmenu","press","tap","cdkDragStarted","cdkDragReleased",4,"cdkVirtualFor","cdkVirtualForOf"],["cdkDrag","",1,"file-item","d-grid","ps-3","ps-md-4","pe-2","pe-md-3",3,"ngClass","cdkDragDisabled","contextmenu","press","tap","cdkDragStarted","cdkDragReleased"],[4,"cdkDragPreview"],[1,"me-3","me-md-4","text-center","mx-auto","d-block",3,"setKey","iconType","width"],["target","_blank","rel","noreferrer",1,"filename","fw-bold","d-flex","me-auto","min-w-0","mw-100",3,"href"],[1,"mw-100","text-truncate",3,"innerText"],[1,"flex-shrink-0","pe-2",3,"innerText"],[1,"text-uppercase","file-extension","text-center","mx-auto",3,"innerText"],[1,"size-tpl","text-center","mx-auto"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"time-tpl","text-center","mx-auto"],[1,"dropdown-tpl","d-flex","flex-end"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"cdk-virtual-scroll-viewport",1)(2,"ul",2),e.YNc(3,Ps,13,24,"li",3),e.ALo(4,"arrayFilter"),e.qZA()()()),2&t&&(e.xp6(1),e.Q6J("itemSize",57)("ngClass",e.VKq(7,Es,n.touchDevice)),e.xp6(1),e.Q6J("cdkDropListData",n.sortedList),e.xp6(1),e.Q6J("cdkVirtualForOf",e.xi3(4,4,n.sortedList,n.filterCallback)))},dependencies:[m.mk,m.tP,Yn,Jn,qn,ie.xd,ie.x0,ie.N7,ie.LO,Ai.b,Di],styles:[".file-item.pending[_ngcontent-%COMP%]{opacity:.5}.file-item.pending[_ngcontent-%COMP%]   .dropdown-tpl[_ngcontent-%COMP%]{display:none!important}.file-item.pending[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{pointer-events:none}.cdk-drag-placeholder[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{opacity:.4}.drag-multiple-files[_nghost-%COMP%]   .file-item.selected[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{opacity:.4;pointer-events:none}.cdk-drag-preview[_ngcontent-%COMP%]{min-width:150px}.cdk-drag-dragging[_ngcontent-%COMP%]{display:none}",".file-simple-scroll[_ngcontent-%COMP%]:not(.touch-device)   .file-item[_ngcontent-%COMP%]:not(.selected):hover{background-color:rgb(var(--bs-light-rgb))}.file-item[_ngcontent-%COMP%]{grid-template-columns:calc(24px + 1rem) calc(100% - 48px - 1rem) 24px;align-items:center;transition:opacity .2s,background-color .2s;background-color:#fff;height:57px}.file-item[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:not(.dropdown-tpl){font-size:.875rem}.file-item[_ngcontent-%COMP%]:not(:first-of-type){border-top:1px solid transparent}.file-item[_ngcontent-%COMP%]:not(:first-of-type):not(.selected){border-color:#dee2e6}.file-item[_ngcontent-%COMP%]:not(:first-of-type).selected, .file-item[_ngcontent-%COMP%]:not(:first-of-type).selected + .file-item[_ngcontent-%COMP%]{border-color:#c6cfff}.file-item.selected[_ngcontent-%COMP%]{background-color:#dae0ff}.file-extension[_ngcontent-%COMP%], .size-tpl[_ngcontent-%COMP%], .time-tpl[_ngcontent-%COMP%]{display:none}app-svg-icon[_ngcontent-%COMP%]{color:#495057}@media (min-width: 768px){.file-simple-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]{grid-template-columns:calc(24px + 1.5rem) calc(58% - 24px - 1.5rem) repeat(2,18%) 6%}.file-simple-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .size-tpl[_ngcontent-%COMP%], .file-simple-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .time-tpl[_ngcontent-%COMP%]{display:initial}}@media (min-width: 1200px){.file-simple-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]{grid-template-columns:calc(24px + 1.5rem) calc(52% - 24px - 1.5rem) repeat(3,14%) 6%}.file-simple-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .file-extension[_ngcontent-%COMP%]{display:initial}}"]}),i})(),dn=(()=>{class i{transform(t,n=2){if(!+t)return"0 Bytes";const r=n<0?0:n,d=Math.floor(Math.log(t)/Math.log(1024));return`${parseFloat((t/Math.pow(1024,d)).toFixed(r))} ${["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][d]}`}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275pipe=e.Yjl({name:"formatBytes",type:i,pure:!0}),i})();const Ui=function(i){return{"drag-multiple-files":i}},Zi=function(i,s,t,n){return{size:i,time:s,dropdown:t,cdkPreview:n}};function As(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"app-upload-file-grid-list",11),e.NdJ("rightClickEvent",function(o){e.CHM(t);const r=e.oxw(4);return e.KtG(r.onRightClick(o))})("draggedFileEvent",function(o){e.CHM(t);const r=e.oxw(4);return e.KtG(r.pushDraggedFile(o))}),e.qZA()}if(2&i){const t=e.oxw(4),n=e.MAs(2),o=e.MAs(4),r=e.MAs(6),a=e.MAs(8);e.Q6J("ngClass",e.VKq(3,Ui,t.isDraggingSelectedFiles))("sortedList",t.sortedList)("templates",e.l5B(5,Zi,n,o,r,a))}}function Ds(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"app-upload-file-simple-list",12),e.NdJ("rightClickEvent",function(o){e.CHM(t);const r=e.oxw(4);return e.KtG(r.onRightClick(o))})("draggedFileEvent",function(o){e.CHM(t);const r=e.oxw(4);return e.KtG(r.pushDraggedFile(o))}),e.qZA()}if(2&i){const t=e.oxw(4),n=e.MAs(2),o=e.MAs(4),r=e.MAs(6),a=e.MAs(8);e.Q6J("sortedList",t.sortedList)("ngClass",e.VKq(3,Ui,t.isDraggingSelectedFiles))("templates",e.l5B(5,Zi,n,o,r,a))}}function Fs(i,s){if(1&i&&(e.ynx(0),e.YNc(1,As,1,10,"app-upload-file-grid-list",9),e.YNc(2,Ds,1,10,"ng-template",null,10,e.W1O),e.BQk()),2&i){const t=e.MAs(3),n=e.oxw(3);e.xp6(1),e.Q6J("ngIf",n.layoutOptions.type===n.layoutTypes.GRID)("ngIfElse",t)}}function Us(i,s){1&i&&e._UZ(0,"app-upload-all-file-filtered")}function Zs(i,s){if(1&i&&(e.ynx(0),e.YNc(1,Fs,4,2,"ng-container",6),e.YNc(2,Us,1,0,"ng-template",null,8,e.W1O),e.BQk()),2&i){const t=e.MAs(3),n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.filteredElementsCount<n.sortedList.length)("ngIfElse",t)}}function ks(i,s){1&i&&e._UZ(0,"app-upload-empty-file-list")}function Ls(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"div",5),e._uU(2,"File e Immagini"),e.qZA(),e.YNc(3,Zs,4,2,"ng-container",6),e.YNc(4,ks,1,0,"ng-template",null,7,e.W1O),e.BQk()),2&i){const t=e.MAs(5),n=e.oxw();e.xp6(3),e.Q6J("ngIf",n.sortedList.length>0)("ngIfElse",t)}}const Rs=function(i){return{"me-1 after-content":i}};function Ns(i,s){if(1&i&&(e._UZ(0,"div",13),e.ALo(1,"formatBytes")),2&i){const n=s.addAfterContent;e.Q6J("innerText",e.lcZ(1,2,s.$implicit))("ngClass",e.VKq(4,Rs,n))}}const zs=function(){return[0,5]},Hs=function(i){return{offset:i}};function qs(i,s){if(1&i&&(e.TgZ(0,"div",14),e.ALo(1,"date"),e._UZ(2,"span",15),e.qZA()),2&i){const t=s.$implicit;e.Q6J("appTippy",e.xi3(1,3,t,"dd-MM-YY HH:mm")||"")("tippyProps",e.VKq(7,Hs,e.DdM(6,zs))),e.xp6(2),e.Q6J("date",t)}}function Js(i,s){if(1&i&&e._UZ(0,"app-upload-file-menu",21),2&i){const t=e.oxw().$implicit,n=e.MAs(1);e.Q6J("file",t)("isSelected",t.selected)("dropdownRef",n)}}const Qs=function(i){return{"touch-device":i}},Ys=function(i){return[i,"left-bottom","auto"]};function Vs(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",16,17),e.NdJ("openChange",function(o){const a=e.CHM(t).$implicit,d=e.oxw();return e.KtG(d.onDropdownOpenChange(o,a))}),e.TgZ(2,"div",18),e._uU(3,"more_vert"),e.qZA(),e.TgZ(4,"div",19),e.YNc(5,Js,1,3,"app-upload-file-menu",20),e.qZA()()}if(2&i){const t=s.$implicit,n=s.firstPlacement,o=e.oxw();e.Q6J("ngClass",e.VKq(3,Qs,o.touchDevice))("placement",e.VKq(5,Ys,n)),e.xp6(5),e.Q6J("ngIf",t.hasDropdown)}}function Gs(i,s){if(1&i&&e._UZ(0,"div",22),2&i){const t=s.$implicit,n=e.oxw();e.Q6J("innerHTML",n.isDraggingSelectedFiles&&n.selectedFileCounter>1?n.selectedFileCounter+" file selezionati":t,e.oJD)}}let Bs=(()=>{class i{constructor(t,n){this.uploadObservablesService=t,this.uploadPreferencesService=n,this.fileList=[],this.filter="",this.loading=!0,this.sortedList=[],this.layoutTypes=v.c5,this.filteredElementsCount=0,this.isDraggingSelectedFiles=!1,this.selectedFileCounter=0,this.touchDevice=Z.eX,this.currentFilter="",this.sortedBy=v.gG.FILENAME,this.sortOrder=1,this.subscriptions=[],this.layoutOptions=this.uploadPreferencesService.layoutOptions}ngOnInit(){this.setSortOption(this.layoutOptions.orderBy,this.layoutOptions.asc),this.copyList(),this.sort(),this.setSubscriptions()}updateListAfterChange(){this.sortedList=[...this.sortedList]}setSubscriptions(){this.subscriptions.push(this.uploadObservablesService.layoutOptionsObservable.subscribe(t=>{this.layoutOptions=t,this.setSortOption(t.orderBy,t.asc),this.sort(),this.updateListAfterChange()}),this.uploadObservablesService.renameEntityObservable.subscribe(t=>{if(t.newEntity.type!==v.VC.FILE)return;const n=this.sortedList.findIndex(o=>o.name===t.oldName);n>-1&&(this.sortedList[n]={...t.newEntity,isFiltered:!1,pending:!1,selected:this.sortedList[n].selected,hasDropdown:this.sortedList[n].hasDropdown}),this.updateListAfterChange()}),this.uploadObservablesService.deleteFileObservable.subscribe(t=>{for(const n of t){const o=this.sortedList.findIndex(r=>r.name===n);o>-1&&this.sortedList.splice(o,1)}this.updateListAfterChange()}),this.uploadObservablesService.uploadedFileObservable.subscribe(t=>{this.sortedList.unshift(...t.map(n=>({...n,isFiltered:!1,pending:!1,selected:!1,hasDropdown:!1}))),this.sort(),this.filterList(),this.updateListAfterChange()}),this.uploadObservablesService.entityPendingObservable.subscribe(t=>{t.forEach(n=>{if(n.type!==v.VC.FILE)return;const o=this.sortedList.findIndex(r=>r.name===n.name);o>-1&&(this.sortedList[o].pending=n.start)})}),this.uploadObservablesService.selectedFileListObservable.subscribe(t=>{const n=t.map(o=>o.name);this.sortedList.filter(o=>o.selected||n.includes(o.name)).forEach(o=>{o.selected=n.includes(o.name)}),this.selectedFileCounter=t.length}))}ngOnChanges(t){t.fileList&&!t.fileList.firstChange&&(this.copyList(),this.sortedList.length&&(this.sort(),this.currentFilter="",this.filterList())),t.filter&&!t.filter.firstChange&&(this.filterList(),this.updateListAfterChange())}setSortOption(t,n){this.sortedBy=t,this.sortOrder=n?1:-1}sort(){this.sortedList.sort((t,n)=>this.sortOrder*(t[this.sortedBy]>n[this.sortedBy]?1:-1)),this.sortedBy===v.gG.TIME&&this.sortedList.reverse()}copyList(){this.sortedList=this.fileList.map(t=>({...t,isFiltered:!1,pending:!1,selected:!1,hasDropdown:!1}))}filterList(){if(this.currentFilter===this.filter)return;if(this.currentFilter=this.filter,this.filteredElementsCount=0,0===this.filter.length)return void this.sortedList.filter(n=>n.isFiltered).forEach(n=>n.isFiltered=!1);const t=this.filter.toLowerCase();for(const n of this.sortedList)n.isFiltered=!n.name.toLowerCase().includes(t),this.filteredElementsCount+=+n.isFiltered}pushDraggedFile(t){if(this.isDraggingSelectedFiles=!1,t)return t.selected?(this.uploadObservablesService.pushDraggedFileList(this.sortedList.filter(n=>n.selected)),void(this.isDraggingSelectedFiles=!0)):void this.uploadObservablesService.pushDraggedFileList([t]);this.uploadObservablesService.pushDraggedFileList([])}onRightClick(t){if(!t.isTap||0!==this.selectedFileCounter)return this.uploadObservablesService.pushSelectedFile({name:t.file.name,selected:!t.file.selected}),!1}onDropdownOpenChange(t,n){t&&!n.hasDropdown&&(n.hasDropdown=!0)}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(K.r),e.Y36(jn.p))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-upload-file-list"]],inputs:{fileList:"fileList",filter:"filter",loading:"loading"},features:[e.TTD],decls:9,vars:1,consts:[[4,"ngIf"],["fileSizeTemplate",""],["fileTimeTemplate",""],["fileDropdownTemplate",""],["fileCdkPreview",""],[1,"px-md-1","mb-2","fv-small-caps","container-fluid"],[4,"ngIf","ngIfElse"],["noFiles",""],["allFilesFilteredMessage",""],[3,"ngClass","sortedList","templates","rightClickEvent","draggedFileEvent",4,"ngIf","ngIfElse"],["listLayout",""],[3,"ngClass","sortedList","templates","rightClickEvent","draggedFileEvent"],[3,"sortedList","ngClass","templates","rightClickEvent","draggedFileEvent"],[1,"file-size",3,"innerText","ngClass"],[1,"file-time",3,"appTippy","tippyProps"],["timeago","",3,"date"],["ngbDropdown","","display","dynamic","container","body",1,"dropdown-no-caret","ms-auto","flex-shrink-0",3,"ngClass","placement","openChange"],["fileDropdown","ngbDropdown"],["ngbDropdownToggle","",1,"material-icons-outlined","d-block","cursor-pointer","dropdown-icon"],["ngbDropdownMenu",""],[3,"file","isSelected","dropdownRef",4,"ngIf"],[3,"file","isSelected","dropdownRef"],[1,"flat-container","p-3",3,"innerHTML"]],template:function(t,n){1&t&&(e.YNc(0,Ls,6,2,"ng-container",0),e.YNc(1,Ns,2,6,"ng-template",null,1,e.W1O),e.YNc(3,qs,3,9,"ng-template",null,2,e.W1O),e.YNc(5,Vs,6,7,"ng-template",null,3,e.W1O),e.YNc(7,Gs,1,1,"ng-template",null,4,e.W1O)),2&t&&e.Q6J("ngIf",!n.loading)},dependencies:[m.mk,m.O5,F.jt,F.iD,F.Vi,Lt,He.$,ei,bo,yo,xs,Is,m.uU,dn],styles:['.file-size.after-content[_ngcontent-%COMP%]:after{content:" - "}.dropdown-no-caret[_ngcontent-%COMP%]:not(.touch-device)   .dropdown-icon[_ngcontent-%COMP%]{opacity:.7;transition:opacity .2s}.dropdown-no-caret[_ngcontent-%COMP%]:not(.touch-device)   .dropdown-icon[_ngcontent-%COMP%]:hover{opacity:1}']}),i})();function Ws(i,s){1&i&&e.GkF(0)}function Ks(i,s){1&i&&e.GkF(0)}const $s=function(i,s,t){return{$implicit:i,index:s,last:t}};function Xs(i,s){if(1&i&&(e.ynx(0),e.YNc(1,Ks,1,0,"ng-container",1),e.BQk()),2&i){const t=s.$implicit,n=s.index,o=s.last;e.oxw();const r=e.MAs(4);e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.kEZ(2,$s,t,n+1,o))}}function js(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"a",7),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().index,r=e.oxw();return e.KtG(r.navigateEvent.emit(o))}),e.qZA()}if(2&i){const t=e.oxw().$implicit;e.Q6J("innerText",t)}}function er(i,s){if(1&i&&e._UZ(0,"span",8),2&i){const t=e.oxw().$implicit;e.Q6J("innerText",t)}}const tr=function(i){return{active:i}};function nr(i,s){if(1&i&&(e.TgZ(0,"li",4),e.YNc(1,js,1,1,"a",5),e.YNc(2,er,1,1,"ng-template",null,6,e.W1O),e.qZA()),2&i){const t=s.last,n=e.MAs(3);e.Q6J("ngClass",e.VKq(3,tr,t)),e.xp6(1),e.Q6J("ngIf",!t)("ngIfElse",n)}}const ir=function(i,s){return{$implicit:i,index:0,last:s}};let or=(()=>{class i{constructor(){this.currentFolderPath=[],this.navigateEvent=new e.vpe,this.rootName="Il mio spazio"}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-upload-breadcrumb"]],inputs:{currentFolderPath:"currentFolderPath"},outputs:{navigateEvent:"navigateEvent"},decls:5,vars:6,consts:[[1,"breadcrumb","folders-breadcrumb","mb-0"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngFor","ngForOf"],["breadcrumbItem",""],[1,"breadcrumb-item","small","text-break",3,"ngClass"],["role","button",3,"innerText","click",4,"ngIf","ngIfElse"],["lastItem",""],["role","button",3,"innerText","click"],[3,"innerText"]],template:function(t,n){if(1&t&&(e.TgZ(0,"ol",0),e.YNc(1,Ws,1,0,"ng-container",1),e.YNc(2,Xs,2,6,"ng-container",2),e.YNc(3,nr,4,5,"ng-template",null,3,e.W1O),e.qZA()),2&t){const o=e.MAs(4);e.xp6(1),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.WLB(3,ir,n.rootName,0===n.currentFolderPath.length)),e.xp6(1),e.Q6J("ngForOf",n.currentFolderPath)}},dependencies:[m.mk,m.sg,m.O5,m.tP],styles:[".folders-breadcrumb[_ngcontent-%COMP%]{--bs-breadcrumb-divider: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8'%3E%3Cpath d='M2.5 0L1 1.5 3.5 4 1 6.5 2.5 8l4-4-4-4z' fill='%236c757d'/%3E%3C/svg%3E\")}"]}),i})(),sr=(()=>{class i{constructor(t){this.uploadObservablesService=t,this.createNewFolderEvent=new e.vpe,this.actionNames=v.In}ngOnInit(){}pushAction(t){this.uploadObservablesService.pushAction({name:t,payload:{entities:[{name:this.folder.name,type:v.VC.FOLDER,ext:"",url:this.folder.url,embedUrl:this.folder.url,isImage:!1}]}})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(K.r))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-upload-folder-menu"]],inputs:{folder:"folder"},outputs:{createNewFolderEvent:"createNewFolderEvent"},decls:27,vars:0,consts:[[1,"list-unstyled","mb-0","dropdown-material-icons"],["role","button",1,"dropdown-item","d-flex","align-items-center",3,"click"],[1,"material-icons-outlined","d-block"],[1,"dropdown-divider"]],template:function(t,n){1&t&&(e.TgZ(0,"ul",0)(1,"li")(2,"a",1),e.NdJ("click",function(){return n.createNewFolderEvent.emit()}),e.TgZ(3,"div",2),e._uU(4,"add_circle_outline"),e.qZA(),e.TgZ(5,"div"),e._uU(6,"Nuova cartella"),e.qZA()()(),e.TgZ(7,"li")(8,"a",1),e.NdJ("click",function(){return n.pushAction(n.actionNames.MOVE)}),e.TgZ(9,"div",2),e._uU(10,"drive_file_move"),e.qZA(),e.TgZ(11,"div"),e._uU(12,"Sposta"),e.qZA()()(),e.TgZ(13,"li")(14,"a",1),e.NdJ("click",function(){return n.pushAction(n.actionNames.RENAME)}),e.TgZ(15,"div",2),e._uU(16,"drive_file_rename_outline"),e.qZA(),e.TgZ(17,"div"),e._uU(18,"Rinomina"),e.qZA()()(),e.TgZ(19,"li"),e._UZ(20,"hr",3),e.qZA(),e.TgZ(21,"li")(22,"a",1),e.NdJ("click",function(){return n.pushAction(n.actionNames.DELETE)}),e.TgZ(23,"div",2),e._uU(24,"delete"),e.qZA(),e.TgZ(25,"div"),e._uU(26,"Elimina"),e.qZA()()()())}}),i})();const rr=["modal"];function ar(i,s){1&i&&(e.ynx(0),e._uU(1," Il nome non pu\xf2 essere vuoto! "),e.BQk())}function lr(i,s){if(1&i&&e._UZ(0,"span",18),2&i){const t=e.oxw(3);e.Q6J("innerHTML",t.errorMessage,e.oJD)}}function cr(i,s){1&i&&e._uU(0,"Questo nome \xe8 gi\xe0 usato da un'altra cartella!")}function dr(i,s){if(1&i&&(e.YNc(0,lr,1,1,"span",16),e.YNc(1,cr,1,0,"ng-template",null,17,e.W1O)),2&i){const t=e.MAs(2),n=e.oxw(2);e.Q6J("ngIf",!n.nameValidationErrors.alreadyUsed)("ngIfElse",t)}}function pr(i,s){if(1&i&&(e.TgZ(0,"div",13),e.YNc(1,ar,2,0,"ng-container",14),e.YNc(2,dr,3,2,"ng-template",null,15,e.W1O),e.qZA()),2&i){const t=e.MAs(3),n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.nameValidationErrors.invalidLength)("ngIfElse",t)}}const hr=function(i,s){return{"is-valid":i,"is-invalid":s}};let ur=(()=>{class i{constructor(){this.reservedNames=[],this.createFolderEvent=new e.vpe,this.nameRegex=be.er,this.name="",this.openFolderOnCreation=!1,this.isNameValid=!1,this.nameValidationErrors=be.xt,this.errorMessage="",this.opened=!1}ngOnInit(){}open(){this.opened=!0,this.modalComponent.open()}onHidden(t){this.opened=!1,t.reset(""),this.openFolderOnCreation=!1,this.isNameValid=!1,this.errorMessage="",this.nameValidationErrors=be.xt}checkNameValidity(){this.nameValidationErrors=(0,A.rc)(this.name,"",v.VC.FOLDER,this.reservedNames),this.isNameValid=!Object.values(this.nameValidationErrors).some(t=>t),this.nameValidationErrors.invalidStartOrEnd?this.errorMessage="Il nome non pu\xf2 iniziare o finire con un punto o uno spazio!":this.isNameValid||(this.errorMessage="Il nome pu\xf2 contenere solo i caratteri <em>a-z</em>, i trattini alti e bassi <em>-_</em>, gli spazi e i numeri!")}create(){!this.opened||!this.isNameValid||(this.createFolderEvent.emit({name:this.name,open:this.openFolderOnCreation}),this.modalComponent.close())}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-upload-newfolder-modal"]],viewQuery:function(t,n){if(1&t&&e.Gf(rr,5),2&t){let o;e.iGM(o=e.CRH())&&(n.modalComponent=o.first)}},inputs:{reservedNames:"reservedNames"},outputs:{createFolderEvent:"createFolderEvent"},decls:31,vars:10,consts:[["title","Crea nuova cartella",3,"disableCloseButton","hidden"],["modal",""],[1,"mt-2"],["for","folder-name",1,"fs-sm"],["type","text","id","folder-name","required","",1,"form-control",3,"ngClass","pattern","ngModel","ngModelChange"],["newNameInput","ngModel"],["class","invalid-feedback",4,"ngIf"],[1,"form-check","mt-2","mb-0","fs-sm"],["type","checkbox","id","open-folder",1,"form-check-input",3,"ngModel","ngModelChange"],["for","open-folder",1,"form-check-label"],["footer",""],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[1,"invalid-feedback"],[4,"ngIf","ngIfElse"],["invalidName",""],[3,"innerHTML",4,"ngIf","ngIfElse"],["alreadyUsed",""],[3,"innerHTML"]],template:function(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"app-modal",0,1),e.NdJ("hidden",function(){e.CHM(o);const a=e.MAs(20);return e.KtG(n.onHidden(a))}),e.TgZ(2,"p"),e._uU(3," Tramite questo modal \xe8 possibile "),e.TgZ(4,"strong"),e._uU(5,"creare una nuova cartella"),e.qZA(),e._uU(6," nella posizione corrente. Il nome della nuova cartella far\xe0 "),e.TgZ(7,"strong"),e._uU(8,"parte dell'url"),e.qZA(),e._uU(9," di tutti i file che la cartella stessa conterr\xe0. Per questo motivo, \xe8 bene che includa esclusivamente dei caratteri facilmente inseribili nei link di un file: in particolare, sono accettati i caratteri "),e.TgZ(10,"em"),e._uU(11,"a-z"),e.qZA(),e._uU(12,", sia maiuscoli che minuscoli, i trattini alti e bassi "),e.TgZ(13,"em"),e._uU(14,"-_"),e.qZA(),e._uU(15," e i numeri. "),e.qZA(),e.TgZ(16,"div",2)(17,"label",3),e._uU(18,"Nome della nuova cartella:"),e.qZA(),e.TgZ(19,"input",4,5),e.NdJ("ngModelChange",function(a){return n.name=a})("ngModelChange",function(){return n.checkNameValidity()}),e.qZA(),e.YNc(21,pr,4,2,"div",6),e.qZA(),e.TgZ(22,"div",7)(23,"input",8),e.NdJ("ngModelChange",function(a){return n.openFolderOnCreation=a}),e.qZA(),e.TgZ(24,"label",9),e._uU(25,"Apri la cartella dopo la creazione"),e.qZA()(),e.ynx(26,10),e.TgZ(27,"button",11),e.NdJ("click",function(){e.CHM(o);const a=e.MAs(1);return e.KtG(a.close("Close click"))}),e._uU(28,"Annulla"),e.qZA(),e.TgZ(29,"button",12),e.NdJ("click",function(){return n.create()}),e._uU(30,"Crea"),e.qZA(),e.BQk(),e.qZA()}if(2&t){const o=e.MAs(20);e.Q6J("disableCloseButton",!0),e.xp6(19),e.Q6J("ngClass",e.WLB(7,hr,o.dirty&&n.isNameValid,o.dirty&&!n.isNameValid))("pattern",n.nameRegex)("ngModel",n.name),e.xp6(2),e.Q6J("ngIf",!n.isNameValid),e.xp6(2),e.Q6J("ngModel",n.openFolderOnCreation),e.xp6(6),e.Q6J("disabled",!n.isNameValid)}},dependencies:[m.mk,m.O5,T.Fj,T.Wl,T.JJ,T.Q7,T.c5,T.On,B.z]}),i})(),ki=(()=>{class i{transform(t,n){return t.includes(n)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275pipe=e.Yjl({name:"arrayIncludes",type:i,pure:!0}),i})();function gr(i,s){1&i&&(e.TgZ(0,"div",4),e._UZ(1,"app-loader",5),e.qZA())}function mr(i,s){1&i&&(e.O4$(),e.ynx(0),e._UZ(1,"path",21)(2,"path",22),e.BQk())}function _r(i,s){1&i&&(e.O4$(),e._UZ(0,"path",23))}const fr=function(i,s){return{"is-entered":i,"flat-container px-3":s}};function vr(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"li",17),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.navigateUp(-1))})("mouseenter",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.setFolderEntered(null,!0))})("mouseleave",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.setFolderEntered(void 0))}),e.O4$(),e.TgZ(1,"svg",13),e.YNc(2,mr,3,0,"ng-container",18),e.YNc(3,_r,1,0,"ng-template",null,19,e.W1O),e.qZA(),e.kcU(),e.TgZ(5,"div",20),e._uU(6,"cartella superiore"),e.qZA()()}if(2&i){const t=e.MAs(4),n=e.oxw(2);e.Q6J("ngClass",e.WLB(3,fr,null===n.currentFolderEnteredName,n.currentLayout===n.layouts.GRID)),e.xp6(2),e.Q6J("ngIf",n.currentLayout===n.layouts.GRID)("ngIfElse",t)}}function Cr(i,s){1&i&&(e.O4$(),e._UZ(0,"path",32))}function xr(i,s){1&i&&(e.O4$(),e._UZ(0,"path",33))}const br=function(i,s,t){return{pending:i,"is-entered":s,"flat-container":t}},yr=function(){return["left-top","auto"]};function Tr(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"li",24),e.NdJ("mouseenter",function(){const r=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.setFolderEntered(r.name))})("mouseleave",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.setFolderEntered(void 0))}),e.ALo(1,"arrayIncludes"),e.TgZ(2,"div",25),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.navigateDown(r.name))}),e.O4$(),e.TgZ(3,"svg",26),e.YNc(4,Cr,1,0,"path",27),e.YNc(5,xr,1,0,"ng-template",null,19,e.W1O),e.qZA(),e.kcU(),e._UZ(7,"div",28),e.qZA(),e.TgZ(8,"div",29)(9,"div",30),e._uU(10,"more_vert"),e.qZA(),e.TgZ(11,"app-upload-folder-menu",31),e.NdJ("createNewFolderEvent",function(){e.CHM(t),e.oxw(2);const o=e.MAs(4);return e.KtG(o.open())}),e.qZA()()()}if(2&i){const t=s.$implicit,n=e.MAs(6),o=e.oxw(2);e.Q6J("ngClass",e.kEZ(9,br,e.xi3(1,6,o.pendingFolders,t.name),o.currentFolderEnteredName===t.name,o.currentLayout===o.layouts.GRID)),e.xp6(4),e.Q6J("ngIf",o.currentLayout===o.layouts.GRID)("ngIfElse",n),e.xp6(3),e.Q6J("innerText",t.name),e.xp6(1),e.Q6J("placement",e.DdM(13,yr)),e.xp6(3),e.Q6J("folder",t)}}function Mr(i,s){1&i&&(e.O4$(),e.kcU(),e.TgZ(0,"div",34),e._uU(1,"nuova cartella"),e.qZA())}const wr=function(i,s,t){return{"touch-device":i,"d-grid grid-list":s,"simple-list flat-container d-flex flex-column":t}};function Sr(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",6)(1,"div",7),e._uU(2,"Cartelle"),e.qZA(),e.TgZ(3,"app-upload-breadcrumb",8),e.NdJ("navigateEvent",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.navigateUp(o))}),e.qZA()(),e.TgZ(4,"ul",9),e.YNc(5,vr,7,6,"li",10),e.YNc(6,Tr,12,14,"li",11),e.TgZ(7,"li",12),e.NdJ("click",function(){e.CHM(t),e.oxw();const o=e.MAs(4);return e.KtG(o.open())}),e.O4$(),e.TgZ(8,"svg",13),e._UZ(9,"path",14)(10,"path",15),e.qZA(),e.YNc(11,Mr,2,0,"div",16),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(3),e.Q6J("currentFolderPath",t.currentFolderPath),e.xp6(1),e.Q6J("ngClass",e.kEZ(5,wr,t.touchDevice,t.currentLayout===t.layouts.GRID,t.currentLayout===t.layouts.LIST)),e.xp6(1),e.Q6J("ngIf",t.currentFolderPath.length>0),e.xp6(1),e.Q6J("ngForOf",t.filteredAndSortedList),e.xp6(5),e.Q6J("ngIf",t.currentLayout===t.layouts.LIST)}}let Or=(()=>{class i{constructor(t,n,o){this.uploadService=t,this.uploadObservablesService=n,this.toastService=o,this.folderList=[],this.currentFolderPath=[],this.loading=!0,this.filter="",this.newFolderEvent=new e.vpe,this.filteredAndSortedList=[],this.order=1,this.layouts=v.c5,this.currentLayout=v.c5.GRID,this.touchDevice=Z.eX,this.actionNames=v.In,this.pendingFolders=[],this.currentFolderEnteredName="",this.folderNamesList=[],this.currentDraggedFileList=[]}ngOnInit(){this.folderNamesList=this.folderList.map(t=>t.name),this.filterList(),this.order=this.uploadService.preferences.layoutOptions.asc?1:-1,this.currentLayout=this.uploadService.preferences.layoutOptions.type,this.orderList(),this.layoutOptionsSubscription=this.uploadObservablesService.layoutOptionsObservable.subscribe(t=>{this.currentLayout=t.type,this.order=t.asc?1:-1,this.orderList()}),this.draggedFileSubscription=this.uploadObservablesService.draggedFileListObservable.subscribe(t=>{void 0!==this.currentFolderEnteredPath&&0===t.length&&this.currentDraggedFileList.length&&(this.uploadObservablesService.pushStartMove({entities:(0,A.jL)(this.currentDraggedFileList),destPath:[...this.currentFolderEnteredPath],originPath:[...this.currentFolderPath]}),this.currentFolderEnteredName=""),this.currentDraggedFileList=[...t]}),this.entityPendingSubscription=this.uploadObservablesService.entityPendingObservable.subscribe(t=>{t.forEach(n=>{n.type===v.VC.FOLDER&&(n.start?this.pendingFolders.includes(n.name)||(this.pendingFolders=[...this.pendingFolders,n.name]):this.pendingFolders.indexOf(n.name)>-1&&(this.pendingFolders=this.pendingFolders.filter(r=>n.name!==r)))})}),this.renameFolderSubscription=this.uploadObservablesService.renameEntityObservable.subscribe(t=>{t.newEntity.type===v.VC.FOLDER&&(this.folderNamesList=this.folderList.map(n=>n.name))})}ngOnChanges(t){t.folderList&&!t.folderList.firstChange&&(this.folderNamesList=this.folderList.map(n=>n.name),this.filterList(),this.orderList()),t.filter&&!t.filter.firstChange&&(this.filterList(),this.orderList())}filterList(){if(0===this.filter.length)return void(this.filteredAndSortedList=this.folderList);const t=this.filter.toLowerCase();this.filteredAndSortedList=this.folderList.filter(n=>n.name.toLowerCase().includes(t))}orderList(){this.filteredAndSortedList.sort((t,n)=>(t.name>n.name?1:-1)*this.order)}navigateUp(t){this.uploadObservablesService.pushCurrentFolderPath(this.currentFolderPath.slice(0,t))}navigateDown(t){this.pendingFolders.includes(t)||this.uploadObservablesService.pushCurrentFolderPath([...this.currentFolderPath,t])}createFolder(t){var n=this;return(0,q.Z)(function*(){const o=t.name,r=[...n.currentFolderPath],a=yield n.uploadService.createDirectory([...r,o]);if(a){const u={name:(0,A.Lv)(a).name,url:a,type:v.VC.FOLDER};return n.newFolderEvent.emit({list:[u],destPath:r,opened:t.open}),n.toastService.show({content:`Cartella <strong>${o}</strong> creata con successo!`}),void(t.open&&n.navigateDown(o))}n.toastService.show({content:"La creazione della cartella ha <strong>riscontrato un errore!</strong><br>Prova a ricaricare la pagina ed a rieseguirla.",level:it.m.ERROR})})()}setFolderEntered(t,n=!1){if(void 0===t)return this.currentFolderEnteredPath=void 0,void(this.currentFolderEnteredName="");if(0!==this.currentDraggedFileList.length){if(this.currentFolderEnteredName=t,n)return void(this.currentFolderEnteredPath=this.currentFolderPath.length<2?[]:this.currentFolderPath.slice(0,-1));this.currentFolderEnteredPath=[...this.currentFolderPath,t]}}ngOnDestroy(){this.layoutOptionsSubscription?.unsubscribe(),this.draggedFileSubscription?.unsubscribe(),this.entityPendingSubscription?.unsubscribe(),this.renameFolderSubscription?.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(qe.C),e.Y36(K.r),e.Y36(Ie.k))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-upload-folder-list"]],inputs:{folderList:"folderList",currentFolderPath:"currentFolderPath",loading:"loading",filter:"filter"},outputs:{newFolderEvent:"newFolderEvent"},features:[e.TTD],decls:5,vars:3,consts:[["class","d-flex justify-content-center",4,"ngIf","ngIfElse"],["dataList",""],[3,"reservedNames","createFolderEvent"],["modal",""],[1,"d-flex","justify-content-center"],["message","Recupero dei file in corso"],[1,"px-md-1","mb-2","d-flex","flex-wrap","flex-column","flex-md-row","align-items-md-center","container-fluid"],[1,"fv-small-caps"],[1,"d-block","ms-md-auto",3,"currentFolderPath","navigateEvent"],[1,"folders","list-unstyled",3,"ngClass"],["class","d-flex align-items-center cursor-pointer navigate-upper-level",3,"ngClass","click","mouseenter","mouseleave",4,"ngIf"],["class","d-flex align-items-center min-w-0",3,"ngClass","mouseenter","mouseleave",4,"ngFor","ngForOf"],[1,"new-folder","d-flex","align-items-center","cursor-pointer",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 16 16",1,"d-block"],["d","m.5 3 .04.87a1.99 1.99 0 0 0-.342 1.311l.637 7A2 2 0 0 0 2.826 14H9v-1H2.826a1 1 0 0 1-.995-.91l-.637-7A1 1 0 0 1 2.19 4h11.62a1 1 0 0 1 .996 1.09L14.54 8h1.005l.256-2.819A2 2 0 0 0 13.81 3H9.828a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 6.172 1H2.5a2 2 0 0 0-2 2zm5.672-1a1 1 0 0 1 .707.293L7.586 3H2.19c-.24 0-.47.042-.683.12L1.5 2.98a1 1 0 0 1 1-.98h3.672z"],["d","M13.5 10a.5.5 0 0 1 .5.5V12h1.5a.5.5 0 1 1 0 1H14v1.5a.5.5 0 1 1-1 0V13h-1.5a.5.5 0 0 1 0-1H13v-1.5a.5.5 0 0 1 .5-.5z"],["class","new-folder-description fst-italic",4,"ngIf"],[1,"d-flex","align-items-center","cursor-pointer","navigate-upper-level",3,"ngClass","click","mouseenter","mouseleave"],[4,"ngIf","ngIfElse"],["folderFilled",""],[1,"folder-name","fst-italic"],["d","m11.798 8.271-3.182 1.97c-.27.166-.616-.036-.616-.372V9.1s-2.571-.3-4 2.4c.571-4.8 3.143-4.8 4-4.8v-.769c0-.336.346-.538.616-.371l3.182 1.969c.27.166.27.576 0 .742z"],["d","m.5 3 .04.87a1.99 1.99 0 0 0-.342 1.311l.637 7A2 2 0 0 0 2.826 14h10.348a2 2 0 0 0 1.991-1.819l.637-7A2 2 0 0 0 13.81 3H9.828a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 6.172 1H2.5a2 2 0 0 0-2 2zm.694 2.09A1 1 0 0 1 2.19 4h11.62a1 1 0 0 1 .996 1.09l-.636 7a1 1 0 0 1-.996.91H2.826a1 1 0 0 1-.995-.91l-.637-7zM6.172 2a1 1 0 0 1 .707.293L7.586 3H2.19c-.24 0-.47.042-.683.12L1.5 2.98a1 1 0 0 1 1-.98h3.672z"],["d","M13.81 3H9.828a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 6.172 1H2.5a2 2 0 0 0-2 2l.04.87a1.99 1.99 0 0 0-.342 1.311l.637 7A2 2 0 0 0 2.826 14h10.348a2 2 0 0 0 1.991-1.819l.637-7A2 2 0 0 0 13.81 3zM2.19 3c-.24 0-.47.042-.683.12L1.5 2.98a1 1 0 0 1 1-.98h3.672a1 1 0 0 1 .707.293L7.586 3H2.19zm9.608 5.271-3.182 1.97c-.27.166-.616-.036-.616-.372V9.1s-2.571-.3-4 2.4c.571-4.8 3.143-4.8 4-4.8v-.769c0-.336.346-.538.616-.371l3.182 1.969c.27.166.27.576 0 .742z"],[1,"d-flex","align-items-center","min-w-0",3,"ngClass","mouseenter","mouseleave"],[1,"d-flex","align-items-center","min-w-0","navigate-item","flex-grow-1","h-100","pe-1",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 16 16",1,"d-block","flex-shrink-0"],["d","M.54 3.87.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3h3.982a2 2 0 0 1 1.992 2.181l-.637 7A2 2 0 0 1 13.174 14H2.826a2 2 0 0 1-1.991-1.819l-.637-7a1.99 1.99 0 0 1 .342-1.31zM2.19 4a1 1 0 0 0-.996 1.09l.637 7a1 1 0 0 0 .995.91h10.348a1 1 0 0 0 .995-.91l.637-7A1 1 0 0 0 13.81 4H2.19zm4.69-1.707A1 1 0 0 0 6.172 2H2.5a1 1 0 0 0-1 .981l.006.139C1.72 3.042 1.95 3 2.19 3h5.396l-.707-.707z",4,"ngIf","ngIfElse"],[1,"folder-name","text-truncate",3,"innerText"],["ngbDropdown","","display","dynamic","container","body",1,"dropdown-no-caret","ms-auto",3,"placement"],["ngbDropdownToggle","",1,"material-icons-outlined","d-block","cursor-pointer","dropdown-toggle"],["ngbDropdownMenu","",1,"dropdown-menu",3,"folder","createNewFolderEvent"],["d","M.54 3.87.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3h3.982a2 2 0 0 1 1.992 2.181l-.637 7A2 2 0 0 1 13.174 14H2.826a2 2 0 0 1-1.991-1.819l-.637-7a1.99 1.99 0 0 1 .342-1.31zM2.19 4a1 1 0 0 0-.996 1.09l.637 7a1 1 0 0 0 .995.91h10.348a1 1 0 0 0 .995-.91l.637-7A1 1 0 0 0 13.81 4H2.19zm4.69-1.707A1 1 0 0 0 6.172 2H2.5a1 1 0 0 0-1 .981l.006.139C1.72 3.042 1.95 3 2.19 3h5.396l-.707-.707z"],["d","M9.828 3h3.982a2 2 0 0 1 1.992 2.181l-.637 7A2 2 0 0 1 13.174 14H2.825a2 2 0 0 1-1.991-1.819l-.637-7a1.99 1.99 0 0 1 .342-1.31L.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3zm-8.322.12C1.72 3.042 1.95 3 2.19 3h5.396l-.707-.707A1 1 0 0 0 6.172 2H2.5a1 1 0 0 0-1 .981l.006.139z"],[1,"new-folder-description","fst-italic"]],template:function(t,n){if(1&t&&(e.YNc(0,gr,2,0,"div",0),e.YNc(1,Sr,12,9,"ng-template",null,1,e.W1O),e.TgZ(3,"app-upload-newfolder-modal",2,3),e.NdJ("createFolderEvent",function(r){return n.createFolder(r)}),e.qZA()),2&t){const o=e.MAs(2);e.Q6J("ngIf",n.loading)("ngIfElse",o),e.xp6(3),e.Q6J("reservedNames",n.folderNamesList)}},dependencies:[m.mk,m.sg,m.O5,Jt.R,F.jt,F.iD,F.Vi,or,sr,ur,ki],styles:[".folders[_ngcontent-%COMP%]{margin-bottom:1.5rem}.folders[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{transition:opacity .2s,background-color .2s}.folders[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .navigate-item[_ngcontent-%COMP%]{cursor:pointer}.folders[_ngcontent-%COMP%] > li.pending[_ngcontent-%COMP%]{opacity:.5}.folders[_ngcontent-%COMP%] > li.pending[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]{display:none!important}.folders[_ngcontent-%COMP%] > li.pending[_ngcontent-%COMP%]   .navigate-item[_ngcontent-%COMP%]{cursor:default!important;pointer-events:none}.folders[_ngcontent-%COMP%] > li.is-entered[_ngcontent-%COMP%]{background-color:#dae0ff;border-color:#c6cfff}.folders[_ngcontent-%COMP%]:not(.touch-device)   .dropdown-toggle[_ngcontent-%COMP%]{opacity:.7;transition:opacity .2s}.folders[_ngcontent-%COMP%]:not(.touch-device)   .dropdown-toggle[_ngcontent-%COMP%]:hover{opacity:1}.folders[_ngcontent-%COMP%]:not(.touch-device).simple-list > li[_ngcontent-%COMP%]:not(.is-entered):hover{background-color:rgb(var(--bs-light-rgb))}.grid-list[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}.grid-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{min-height:75px}.grid-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:32px;height:32px}.grid-list[_ngcontent-%COMP%]   .navigate-item[_ngcontent-%COMP%]{padding-left:1rem}.grid-list[_ngcontent-%COMP%]   .dropdown-no-caret[_ngcontent-%COMP%]{margin-right:.5rem}.grid-list[_ngcontent-%COMP%]   .folder-name[_ngcontent-%COMP%]{margin-left:.75rem}.grid-list[_ngcontent-%COMP%]   .new-folder[_ngcontent-%COMP%]{color:var(--bs-gray-600);border-top:1px dashed;border-bottom:1px dashed;border-radius:.25rem;justify-content:center}.simple-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{height:57px;padding-right:.5rem}.simple-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:not(:first-of-type){border-top:1px solid #dee2e6}.simple-list[_ngcontent-%COMP%] > li.is-entered[_ngcontent-%COMP%], .simple-list[_ngcontent-%COMP%] > li.is-entered[_ngcontent-%COMP%] + li[_ngcontent-%COMP%]{border-color:#c6cfff}.simple-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px;color:#4864fe}.simple-list[_ngcontent-%COMP%]   .navigate-item[_ngcontent-%COMP%], .simple-list[_ngcontent-%COMP%]   .folder-name[_ngcontent-%COMP%], .simple-list[_ngcontent-%COMP%]   .navigate-upper-level[_ngcontent-%COMP%], .simple-list[_ngcontent-%COMP%]   .new-folder[_ngcontent-%COMP%], .simple-list[_ngcontent-%COMP%]   .new-folder-description[_ngcontent-%COMP%]{padding-left:1rem}app-loader[_ngcontent-%COMP%]{margin-top:1rem}@media (min-width: 768px){.folders[_ngcontent-%COMP%]{margin-bottom:2rem}.grid-list[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(250px,1fr))}.grid-list[_ngcontent-%COMP%]   .new-folder[_ngcontent-%COMP%]{border:1px dashed}.simple-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{padding-right:1rem}.simple-list[_ngcontent-%COMP%]   .navigate-item[_ngcontent-%COMP%], .simple-list[_ngcontent-%COMP%]   .folder-name[_ngcontent-%COMP%], .simple-list[_ngcontent-%COMP%]   .navigate-upper-level[_ngcontent-%COMP%], .simple-list[_ngcontent-%COMP%]   .new-folder[_ngcontent-%COMP%], .simple-list[_ngcontent-%COMP%]   .new-folder-description[_ngcontent-%COMP%]{padding-left:1.5rem}app-loader[_ngcontent-%COMP%]{margin-top:0}}@media (min-width: 960px){.grid-list[_ngcontent-%COMP%]{gap:1.5rem}}"]}),i})();const Pr=["scrollerContainer"],Er=["app-hidden-scroller",""],Ir=function(i,s){return{"max-height":i,height:s}},Ar=["*"];let Li=(()=>{class i{ngAfterViewInit(){const t=this.scrollerContainer.nativeElement;t.style.marginRight=-(t.offsetWidth-t.clientWidth)+"px"}constructor(){this.touchDevice=Z.eX}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["","app-hidden-scroller",""]],viewQuery:function(t,n){if(1&t&&e.Gf(Pr,5),2&t){let o;e.iGM(o=e.CRH())&&(n.scrollerContainer=o.first)}},inputs:{maxHeight:"maxHeight",height:"height"},attrs:Er,ngContentSelectors:Ar,decls:3,vars:4,consts:[[1,"scroller-container",3,"ngStyle"],["scrollerContainer",""]],template:function(t,n){1&t&&(e.F$t(),e.TgZ(0,"div",0,1),e.Hsn(2),e.qZA()),2&t&&e.Q6J("ngStyle",e.WLB(1,Ir,n.maxHeight||null,n.height||null))},dependencies:[m.PC],styles:[".scroller-container[_ngcontent-%COMP%]{overflow-y:scroll}[_nghost-%COMP%]{overflow:hidden}"]}),i})();function Dr(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",5),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return o.textModel="",e.KtG(o.keyupEvent(!0))}),e._uU(1,"clear"),e.qZA()}}let Fr=(()=>{class i{constructor(){this.disabled=!1,this.enterKeyOnly=!1,this.textEvent=new e.vpe,this.textModel="",this.textEmitted=""}ngOnInit(){}keyupEvent(t=!1){if(this.disabled)return;const n=this.textModel.trim();n.length>0&&!t&&this.enterKeyOnly||n!==this.textEmitted&&(this.textEmitted=n,this.textEvent.emit(this.textEmitted))}labelClick(t){0!==this.textModel.trim().length&&(t.preventDefault(),t.stopPropagation(),this.keyupEvent(!0))}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-input-filter-text"]],inputs:{disabled:"disabled",enterKeyOnly:"enterKeyOnly"},outputs:{textEvent:"textEvent"},decls:6,vars:3,consts:[[1,"input-group","position-relative"],[1,"input-group-text"],["for","text-input",1,"d-block","material-icons-outlined","text-muted","cursor-pointer",3,"click"],["class","material-icons d-block icon-small text-danger position-absolute reset-text-input cursor-pointer",3,"click",4,"ngIf"],["type","text","placeholder","Cerca...","id","text-input",1,"form-control",3,"disabled","ngModel","ngModelChange","keyup","keyup.enter"],[1,"material-icons","d-block","icon-small","text-danger","position-absolute","reset-text-input","cursor-pointer",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"label",2),e.NdJ("click",function(r){return n.labelClick(r)}),e._uU(3,"search"),e.qZA()(),e.YNc(4,Dr,2,0,"div",3),e.TgZ(5,"input",4),e.NdJ("ngModelChange",function(r){return n.textModel=r})("keyup",function(){return n.keyupEvent()})("keyup.enter",function(){return n.keyupEvent(!0)}),e.qZA()()),2&t&&(e.xp6(4),e.Q6J("ngIf",n.textModel.trim().length>0),e.xp6(1),e.Q6J("disabled",n.disabled)("ngModel",n.textModel))},dependencies:[m.O5,T.Fj,T.JJ,T.On],styles:["#text-input[_ngcontent-%COMP%]{padding-right:calc(.5rem + 26px)}label[_ngcontent-%COMP%]{transform:rotateY(180deg);position:relative;top:1px}.reset-text-input[_ngcontent-%COMP%]{top:calc(50% - 10px);right:5px;z-index:6}.input-group[_ngcontent-%COMP%]{box-shadow:0 .125rem .25rem #00000013}"]}),i})();const Ur=["supportedFilesContainer"];function Zr(i,s){if(1&i&&(e.TgZ(0,"tr"),e._UZ(1,"td",29),e.ALo(2,"arrayJoin"),e._UZ(3,"td",30),e.ALo(4,"formatBytes"),e.qZA()),2&i){const t=s.$implicit;e.xp6(1),e.Q6J("innerText","."+e.xi3(2,2,t.ext,", .")),e.xp6(2),e.Q6J("innerText",e.lcZ(4,5,t.maxSize))}}function kr(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",31),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.scrollDiv())}),e._uU(1,"expand_circle_down"),e.qZA()}}function Lr(i,s){1&i&&(e.O4$(),e.ynx(0),e._UZ(1,"path",32)(2,"path",33),e.BQk())}function Rr(i,s){1&i&&(e.O4$(),e._UZ(0,"path",32)(1,"path",34))}function Nr(i,s){1&i&&e.GkF(0)}function zr(i,s){1&i&&e.GkF(0)}function Hr(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"li")(2,"a",43),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(3);return e.KtG(o.pushMassiveAction(o.actionNames.FILE_SHOW_LINKS))}),e.TgZ(3,"div",26),e._uU(4,"construction"),e.qZA(),e.TgZ(5,"div"),e._uU(6,"Visualizza codici"),e.qZA()()(),e.TgZ(7,"li")(8,"a",43),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(3);return e.KtG(o.pushMassiveAction(o.actionNames.MOVE))}),e.TgZ(9,"div",26),e._uU(10,"drive_file_move"),e.qZA(),e.TgZ(11,"div"),e._uU(12,"Sposta selezionati"),e.qZA()()(),e.TgZ(13,"li"),e._UZ(14,"hr",46),e.qZA(),e.TgZ(15,"li")(16,"a",43),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(3);return e.KtG(o.pushMassiveAction(o.actionNames.DELETE))}),e.TgZ(17,"div",26),e._uU(18,"delete"),e.qZA(),e.TgZ(19,"div"),e._uU(20,"Elimina selezionati"),e.qZA()()(),e.BQk()}}const qr=function(i){return{"position-fixed fixed-dropdown rounded-circle":i}},Jr=function(){return["start-bottom","top-end","auto"]},Ri=function(){return["bottom-end","top-end","auto"]},Qr=function(i,s){return{"rounded-circle btn-success":i,"btn-outline-success":s}};function Yr(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",36,37)(2,"button",38),e.O4$(),e.TgZ(3,"svg",16),e._UZ(4,"path",39)(5,"path",40),e.qZA()(),e.kcU(),e.TgZ(6,"div",41)(7,"ul",42)(8,"li")(9,"h6",24),e._uU(10,"Azioni massive"),e.qZA()(),e.TgZ(11,"li")(12,"a",43),e.NdJ("click",function(){e.CHM(t);const o=e.MAs(1),r=e.oxw(2);return e.KtG(r.selectOrDeselectAll(o))}),e._UZ(13,"div",44)(14,"div",30),e.qZA()(),e.YNc(15,Hr,21,0,"ng-container",45),e.qZA()()()}if(2&i){const t=e.oxw().$implicit,n=e.oxw();e.Q6J("ngClass",e.VKq(7,qr,t))("placement",t?e.DdM(9,Jr):e.DdM(10,Ri)),e.xp6(2),e.Q6J("ngClass",e.WLB(11,Qr,t,!t))("disabled",n.loading),e.xp6(11),e.Q6J("innerText",n.selectedFiles.length?"unpublished":"check_circle_outline"),e.xp6(1),e.Q6J("innerText",n.selectedFiles.length?"Deseleziona tutti":"Seleziona tutti"),e.xp6(1),e.Q6J("ngIf",n.selectedFiles.length)}}function Vr(i,s){if(1&i&&e.YNc(0,Yr,16,14,"div",35),2&i){const t=s.$implicit,n=e.oxw();e.Q6J("ngIf",!t||n.touchDevice&&n.selectedFiles.length)}}const pn=function(i){return{disabled:i}},Gr=function(){return{$implicit:!1}},Br=function(){return{$implicit:!0}};let Wr=(()=>{class i{constructor(t,n,o){this.uploadPreferencesService=t,this.uploadObservablesService=n,this.ngZone=o,this.loading=!0,this.fileList=[],this.filterEvent=new e.vpe,this.selectAllFilesEvent=new e.vpe,this.openInfoModal=new e.vpe,this.touchDevice=Z.eX,this.supportedFiles=be.O8,this.showSupportedFilesScrollIcon=!1,this.layoutParams=v.gG,this.layoutTypes=v.c5,this.selectedFiles=[],this.actionNames=v.In,this.layoutOptions=this.uploadPreferencesService.layoutOptions}ngOnInit(){this.showSupportedFilesScrollIcon=!Z.eX,this.selectedFileListSubscription=this.uploadObservablesService.selectedFileListObservable.subscribe(t=>{this.selectedFiles=t.map(n=>n.name)})}ngAfterViewInit(){this.supportedFilesScroller=this.supportedFilesDiv.nativeElement.parentElement,Z.eX||this.setScrollIconCheck()}scrollDiv(){this.supportedFilesScroller.scroll({top:this.supportedFilesScroller.scrollTop+100,left:0,behavior:"smooth"})}setScrollIconCheck(){this.ngZone.runOutsideAngular(()=>{this.supportedFilesScroller.addEventListener("scroll",()=>{const n=this.supportedFilesScroller.scrollHeight-this.supportedFilesScroller.clientHeight>this.supportedFilesScroller.scrollTop;this.showSupportedFilesScrollIcon!==n&&this.ngZone.run(()=>{this.showSupportedFilesScrollIcon=n})})})}pushLayoutOptions(){this.uploadObservablesService.pushLayoutOptions(this.layoutOptions)}toggleLayoutOrder(){this.layoutOptions.asc=!this.layoutOptions.asc,this.pushLayoutOptions()}setLayoutType(){this.layoutOptions.type=this.layoutOptions.type===v.c5.GRID?v.c5.LIST:v.c5.GRID,this.pushLayoutOptions()}setLayoutOrder(t){this.layoutOptions.orderBy=t,this.pushLayoutOptions()}selectOrDeselectAll(t){t.close(),this.selectedFiles.length?this.uploadObservablesService.pushSelectedFile([]):this.selectAllFilesEvent.emit()}pushMassiveAction(t){const n=this.fileList.filter(o=>this.selectedFiles.includes(o.name));this.uploadObservablesService.pushAction({name:t,payload:{entities:(0,A.jL)(n)}})}ngOnDestroy(){this.selectedFileListSubscription?.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(jn.p),e.Y36(K.r),e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-upload-filter"]],viewQuery:function(t,n){if(1&t&&e.Gf(Ur,5),2&t){let o;e.iGM(o=e.CRH())&&(n.supportedFilesDiv=o.first)}},inputs:{loading:"loading",fileList:"fileList"},outputs:{filterEvent:"filterEvent",selectAllFilesEvent:"selectAllFilesEvent",openInfoModal:"openInfoModal"},decls:60,vars:30,consts:[[1,"flat-container","py-2","px-3","flex-grow-1","position-relative","supported-files-container"],[1,"d-flex","align-items-end","mb-2"],[1,"fv-small-caps","fs-lg"],[1,"material-icons-outlined","d-block","ms-auto","text-primary","cursor-pointer",3,"click"],["app-hidden-scroller","","maxHeight","130px",1,"position-relative"],["supportedFilesContainer",""],[1,"table","table-striped","text-center","mb-0"],[4,"ngFor","ngForOf"],["class","material-icons d-block position-absolute cursor-pointer text-muted scroll-icon user-select-none",3,"click",4,"ngIf"],[1,"d-flex","utilities"],[1,"d-block","flex-grow-1","input-filter",3,"disabled","enterKeyOnly","textEvent"],[1,"flex-shrink-0","ms-auto","btn-container","d-flex","align-items-stretch"],[1,"btn","btn-outline-indigo","shadow-none","d-flex","align-items-center",3,"disabled","click"],[1,"material-icons",3,"innerText"],[1,"btn-group","mx-3"],[1,"btn","btn-outline-primary","py-1","shadow-none",3,"disabled","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","currentColor","viewBox","0 0 16 16"],[4,"ngIf","ngIfElse"],["desc",""],["ngbDropdown","","display","dynamic",1,"dropdown-no-caret","btn-group",3,"placement"],["ngbDropdownToggle","",1,"btn","btn-outline-primary","px-1","shadow-none",3,"disabled"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16"],["d","M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"],["ngbDropdownMenu","",1,"list-unstyled","mb-0","dropdown-menu","dropdown-material-icons"],[1,"dropdown-header","text-center"],["role","button",1,"dropdown-item","d-flex","align-items-center",3,"ngClass","click"],[1,"material-icons-outlined","d-block"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["massiveActionsButton",""],[1,"fst-italic",3,"innerText"],[3,"innerText"],[1,"material-icons","d-block","position-absolute","cursor-pointer","text-muted","scroll-icon","user-select-none",3,"click"],["fill-rule","evenodd","d","M10.082 5.629 9.664 7H8.598l1.789-5.332h1.234L13.402 7h-1.12l-.419-1.371h-1.781zm1.57-.785L11 2.687h-.047l-.652 2.157h1.351z"],["d","M12.96 14H9.028v-.691l2.579-3.72v-.054H9.098v-.867h3.785v.691l-2.567 3.72v.054h2.645V14zM4.5 2.5a.5.5 0 0 0-1 0v9.793l-1.146-1.147a.5.5 0 0 0-.708.708l2 1.999.007.007a.497.497 0 0 0 .7-.006l2-2a.5.5 0 0 0-.707-.708L4.5 12.293V2.5z"],["d","M12.96 14H9.028v-.691l2.579-3.72v-.054H9.098v-.867h3.785v.691l-2.567 3.72v.054h2.645V14zm-8.46-.5a.5.5 0 0 1-1 0V3.707L2.354 4.854a.5.5 0 1 1-.708-.708l2-1.999.007-.007a.498.498 0 0 1 .7.006l2 2a.5.5 0 1 1-.707.708L4.5 3.707V13.5z"],["class","dropdown-no-caret btn-group","ngbDropdown","","display","dynamic",3,"ngClass","placement",4,"ngIf"],["ngbDropdown","","display","dynamic",1,"dropdown-no-caret","btn-group",3,"ngClass","placement"],["actionsDropdown","ngbDropdown"],["ngbDropdownToggle","",1,"btn","py-1","h-100","shadow-none",3,"ngClass","disabled"],["d","M3 14.5A1.5 1.5 0 0 1 1.5 13V3A1.5 1.5 0 0 1 3 1.5h8a.5.5 0 0 1 0 1H3a.5.5 0 0 0-.5.5v10a.5.5 0 0 0 .5.5h10a.5.5 0 0 0 .5-.5V8a.5.5 0 0 1 1 0v5a1.5 1.5 0 0 1-1.5 1.5H3z"],["d","m8.354 10.354 7-7a.5.5 0 0 0-.708-.708L8 9.293 5.354 6.646a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0z"],["ngbDropdownMenu","",1,"dropdown-menu","dropdown-material-icons"],[1,"list-unstyled","mb-0"],["role","button",1,"dropdown-item","d-flex","align-items-center",3,"click"],[1,"material-icons-outlined","d-block",3,"innerText"],[4,"ngIf"],[1,"dropdown-divider"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3,"File accettati"),e.qZA(),e.TgZ(4,"div",3),e.NdJ("click",function(){return n.openInfoModal.emit()}),e._uU(5,"info"),e.qZA()(),e.TgZ(6,"div",4)(7,"div",null,5)(9,"table",6)(10,"tbody"),e.YNc(11,Zr,5,7,"tr",7),e.qZA()(),e.YNc(12,kr,2,0,"div",8),e.qZA()()(),e.TgZ(13,"div",9)(14,"app-input-filter-text",10),e.NdJ("textEvent",function(r){return n.filterEvent.emit(r)}),e.qZA(),e.TgZ(15,"div",11)(16,"button",12),e.NdJ("click",function(){return n.setLayoutType()}),e._UZ(17,"span",13),e.qZA(),e.TgZ(18,"div",14)(19,"button",15),e.NdJ("click",function(){return n.toggleLayoutOrder()}),e.O4$(),e.TgZ(20,"svg",16),e.YNc(21,Lr,3,0,"ng-container",17),e.YNc(22,Rr,2,0,"ng-template",null,18,e.W1O),e.qZA()(),e.kcU(),e.TgZ(24,"div",19)(25,"button",20),e.O4$(),e.TgZ(26,"svg",21),e._UZ(27,"path",22),e.qZA()(),e.kcU(),e.TgZ(28,"ul",23)(29,"li")(30,"h6",24),e._uU(31,"Criterio di ordinamento"),e.qZA()(),e.TgZ(32,"li")(33,"a",25),e.NdJ("click",function(){return n.setLayoutOrder(n.layoutParams.FILENAME)}),e.TgZ(34,"div",26),e._uU(35,"account_box"),e.qZA(),e.TgZ(36,"div"),e._uU(37,"Nome"),e.qZA()()(),e.TgZ(38,"li")(39,"a",25),e.NdJ("click",function(){return n.setLayoutOrder(n.layoutParams.TIME)}),e.TgZ(40,"div",26),e._uU(41,"history"),e.qZA(),e.TgZ(42,"div"),e._uU(43,"Ultima modifica"),e.qZA()()(),e.TgZ(44,"li")(45,"a",25),e.NdJ("click",function(){return n.setLayoutOrder(n.layoutParams.SIZE)}),e.TgZ(46,"div",26),e._uU(47,"balance"),e.qZA(),e.TgZ(48,"div"),e._uU(49,"Dimensione"),e.qZA()()(),e.TgZ(50,"li")(51,"a",25),e.NdJ("click",function(){return n.setLayoutOrder(n.layoutParams.EXTENSION)}),e.TgZ(52,"div",26),e._uU(53,"description"),e.qZA(),e.TgZ(54,"div"),e._uU(55,"Estensione"),e.qZA()()()()()(),e.YNc(56,Nr,1,0,"ng-container",27),e.qZA()(),e.YNc(57,zr,1,0,"ng-container",27),e.YNc(58,Vr,1,1,"ng-template",null,28,e.W1O)),2&t){const o=e.MAs(23),r=e.MAs(59);e.xp6(11),e.Q6J("ngForOf",n.supportedFiles),e.xp6(1),e.Q6J("ngIf",n.showSupportedFilesScrollIcon),e.xp6(2),e.Q6J("disabled",n.loading)("enterKeyOnly",!0),e.xp6(2),e.Q6J("disabled",n.loading),e.xp6(1),e.Q6J("innerText",n.layoutOptions.type===n.layoutTypes.GRID?"space_dashboard":"view_list"),e.xp6(2),e.Q6J("disabled",n.loading),e.xp6(2),e.Q6J("ngIf",n.layoutOptions.asc)("ngIfElse",o),e.xp6(3),e.Q6J("placement",e.DdM(19,Ri)),e.xp6(1),e.Q6J("disabled",n.loading),e.xp6(8),e.Q6J("ngClass",e.VKq(20,pn,n.layoutOptions.orderBy===n.layoutParams.FILENAME)),e.xp6(6),e.Q6J("ngClass",e.VKq(22,pn,n.layoutOptions.orderBy===n.layoutParams.TIME)),e.xp6(6),e.Q6J("ngClass",e.VKq(24,pn,n.layoutOptions.orderBy===n.layoutParams.SIZE)),e.xp6(6),e.Q6J("ngClass",e.VKq(26,pn,n.layoutOptions.orderBy===n.layoutParams.EXTENSION)),e.xp6(5),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.DdM(28,Gr)),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.DdM(29,Br))}},dependencies:[m.mk,m.sg,m.O5,m.tP,Li,Fr,F.jt,F.iD,F.Vi,xt.J,dn],styles:[".supported-files-container[_ngcontent-%COMP%]{display:none}.utilities[_ngcontent-%COMP%]{margin:0 1rem;flex-wrap:wrap}.utilities[_ngcontent-%COMP%]   .btn-container[_ngcontent-%COMP%]{margin-top:1rem}.input-filter[_ngcontent-%COMP%]{width:100%}.fixed-dropdown[_ngcontent-%COMP%]{bottom:calc(53px + 1rem);right:1rem;z-index:1000;width:56px;height:56px;box-shadow:0 .125rem .25rem #00000040}@media (min-width: 500px){.input-filter[_ngcontent-%COMP%]{width:auto}.utilities[_ngcontent-%COMP%]{flex-wrap:nowrap}.utilities[_ngcontent-%COMP%]   .btn-container[_ngcontent-%COMP%]{margin-top:initial}.utilities[_ngcontent-%COMP%]   .btn-outline-indigo[_ngcontent-%COMP%]{margin-left:1rem}}@media (min-width: 960px){.fixed-dropdown[_ngcontent-%COMP%]{bottom:1rem}}@media (min-width: 768px){.utilities[_ngcontent-%COMP%]{margin:initial}}@media (min-width: 1100px){.supported-files-container[_ngcontent-%COMP%]{display:initial}.utilities[_ngcontent-%COMP%]{margin-top:1.5rem}.scroll-icon[_ngcontent-%COMP%]{right:0;bottom:0;transition:opacity .2s;opacity:.7}.scroll-icon[_ngcontent-%COMP%]:hover{opacity:1}}"]}),i})();const Kr=["modal"];function $r(i,s){if(1&i&&(e.TgZ(0,"tr"),e._UZ(1,"td",8),e.ALo(2,"arrayJoin"),e._UZ(3,"td",9),e.ALo(4,"formatBytes"),e.qZA()),2&i){const t=s.$implicit;e.xp6(1),e.Q6J("innerText","."+e.xi3(2,2,t.ext,", .")),e.xp6(2),e.Q6J("innerText",e.lcZ(4,5,t.maxSize))}}let Xr=(()=>{class i{constructor(){this.appName=Z.lW,this.supportedFiles=be.O8}ngOnInit(){}open(){this.modalComponent.open()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-upload-info-modal"]],viewQuery:function(t,n){if(1&t&&e.Gf(Kr,5),2&t){let o;e.iGM(o=e.CRH())&&(n.modalComponent=o.first)}},decls:192,vars:2,consts:[["title","Servizio Upload"],["modal",""],[1,"fst-italic"],[1,"mb-1"],[1,"mb-3"],[1,"table","table-striped","text-center","border"],[4,"ngFor","ngForOf"],[1,"mb-0"],[1,"fst-italic",3,"innerText"],[3,"innerText"]],template:function(t,n){1&t&&(e.TgZ(0,"app-modal",0,1)(2,"p"),e._uU(3," Il servizio "),e.TgZ(4,"strong"),e._uU(5,"Upload"),e.qZA(),e._uU(6),e.TgZ(7,"strong"),e._uU(8,"spazio gestito e amministrato"),e.qZA(),e._uU(9," dagli utenti per caricare immagini e file da condividere e utilizzare sui circuiti ForumFree, ForumCommunity e BlogFree. Grazie all'elevato livello di sicurezza e alle numerose funzioni disponibili, il servizio si presenta come alternativa "),e.TgZ(10,"strong"),e._uU(11,"valida e affidabile"),e.qZA(),e._uU(12," agli altri "),e.TgZ(13,"em"),e._uU(14,"hosting"),e.qZA(),e._uU(15," disponibili. "),e.qZA(),e.TgZ(16,"h6",2),e._uU(17,"Metodi di caricamento"),e.qZA(),e.TgZ(18,"p",3),e._uU(19," Sono possibili i seguenti metodi di upload: "),e.qZA(),e.TgZ(20,"ul")(21,"li")(22,"em"),e._uU(23,"caricare file da memoria"),e.qZA(),e._uU(24,": cliccando sull'apposita area, \xe8 possibile "),e.TgZ(25,"strong"),e._uU(26,"selezionare"),e.qZA(),e._uU(27," uno o pi\xf9 file da caricare direttamente dalla memoria del dispositivo in uso. Nel caso di dispositivi mobile, \xe8 necessario che sia presente l'autorizzazione del browser ad accedere ai file presenti in locale; "),e.qZA(),e.TgZ(28,"li")(29,"em"),e._uU(30,"drag & drop"),e.qZA(),e._uU(31,": \xe8 possibile "),e.TgZ(32,"strong"),e._uU(33,"trascinare"),e.qZA(),e._uU(34," nell'apposita area i file che si desiderano caricare. Una volta rilasciati i file, l'upload inizier\xe0 immediatamente senza ulteriori conferme; "),e.qZA(),e.TgZ(35,"li")(36,"em"),e._uU(37,"clipboard"),e.qZA(),e._uU(38,": \xe8 consentito "),e.TgZ(39,"strong"),e._uU(40,"copincollare"),e.qZA(),e._uU(41," un file che si vuole aggiungere al proprio spazio. Per fare ci\xf2, occorre dapprima copiare (ad esempio premendo "),e.TgZ(42,"em"),e._uU(43,"ctrl + c"),e.qZA(),e._uU(44,") il file e in seguito, rimanendo sulla pagina di upload, incollarlo (ad esempio premendo "),e.TgZ(45,"em"),e._uU(46,"ctrl + v"),e.qZA(),e._uU(47,"). Se ci\xf2 che \xe8 stato copiato e incollato soddisfa i requisiti richiesti, l'upload inizier\xe0 senza ulteriori conferme. Questa tecnica pu\xf2 essere utilizzata come valida alternativa per caricare file da indirizzo remoto: \xe8 infatti sufficiente aprire il file da caricare in una finestra del browser, copiarlo e infine incollarlo nella pagina di upload. "),e.qZA()(),e.TgZ(48,"h6",2),e._uU(49,"File accettati"),e.qZA(),e.TgZ(50,"p",4),e._uU(51," Vengono accettati differenti tipi di file, ciascuno con un limite massimo di dimensione: "),e.qZA(),e.TgZ(52,"table",5)(53,"thead")(54,"tr")(55,"th"),e._uU(56,"Estensione"),e.qZA(),e.TgZ(57,"th"),e._uU(58,"Dimensione"),e.qZA()()(),e.TgZ(59,"tbody"),e.YNc(60,$r,5,7,"tr",6),e.qZA()(),e.TgZ(61,"h6",2),e._uU(62,"Azioni disponibili"),e.qZA(),e.TgZ(63,"p",3),e._uU(64," Il servizio Upload consente di eseguire diverse azioni su singoli file o cartelle. Per aprire il men\xf9 con le opzioni disponibili, \xe8 sufficiente cliccare sui tre pallini verticali presenti vicino ad ogni file e cartella. In particolare, i pulsanti a disposizione sono: "),e.qZA(),e.TgZ(65,"ul")(66,"li")(67,"em"),e._uU(68,"sposta"),e.qZA(),e._uU(69,": questa azione, disponibile sia per file che per cartelle, consente, tramite l'apposito modal, di "),e.TgZ(70,"strong"),e._uU(71,"muovere"),e.qZA(),e._uU(72," l'elemento selezionato verso un'altra destinazione; "),e.qZA(),e.TgZ(73,"li")(74,"em"),e._uU(75,"rinomina"),e.qZA(),e._uU(76,": questa azione, disponibile sia per file che per cartelle, consente, tramite l'apposito modal, di assegnare un "),e.TgZ(77,"strong"),e._uU(78,"nuovo nome"),e.qZA(),e._uU(79," all'elemento selezionato; "),e.qZA(),e.TgZ(80,"li")(81,"em"),e._uU(82,"elimina"),e.qZA(),e._uU(83,": questa azione, disponibile sia per file che per cartelle, consente, tramite l'apposito modal, di "),e.TgZ(84,"strong"),e._uU(85,"rimuovere"),e.qZA(),e._uU(86," completamente e senza possibilit\xe0 di ripristino l'elemento selezionato. Nel caso in cui si agisca su una cartella, la rimozione viene estesa anche a tutto il suo contenuto, comprese eventuali sottocartelle; "),e.qZA(),e.TgZ(87,"li")(88,"em"),e._uU(89,"nuova cartella"),e.qZA(),e._uU(90,": premendo questo pulsante, presente solo tra le opzioni di una cartella, \xe8 possibile aggiungere una "),e.TgZ(91,"strong"),e._uU(92,"nuova cartella"),e.qZA(),e._uU(93,"; "),e.qZA(),e.TgZ(94,"li")(95,"em"),e._uU(96,"codici"),e.qZA(),e._uU(97,": questo pulsante, presente solo per i file, consente di aprire un modal contenente i vari "),e.TgZ(98,"strong"),e._uU(99,"codici"),e.qZA(),e._uU(100," del file stesso, tra cui i link per condividerlo ed eventualmente per incorporarlo come immagine; "),e.qZA(),e.TgZ(101,"li")(102,"em"),e._uU(103,"scarica"),e.qZA(),e._uU(104,": questo pulsante, presente solo per i file, permette di "),e.TgZ(105,"strong"),e._uU(106,"scaricare"),e.qZA(),e._uU(107," il file selezionato; "),e.qZA(),e.TgZ(108,"li")(109,"em"),e._uU(110,"modifica"),e.qZA(),e._uU(111,": questa azione, abilitata solo per i file supportati, permette di "),e.TgZ(112,"strong"),e._uU(113,"modificare"),e.qZA(),e._uU(114," (ritagliare, ingrandire, rimpicciolire, ruotare) il file selezionato; "),e.qZA(),e.TgZ(115,"li")(116,"em"),e._uU(117,"seleziona"),e.qZA(),e._uU(118,": questo pulsante consente di "),e.TgZ(119,"strong"),e._uU(120,"selezionare"),e.qZA(),e._uU(121," il file per eseguire in seguito un'azione massiva. "),e.qZA()(),e.TgZ(122,"h6",2),e._uU(123,"Azioni massive"),e.qZA(),e.TgZ(124,"p",3),e._uU(125," Tramite il pulsante verde con il simbolo del checkbox, \xe8 possibile aprire l'elenco delle azioni massive disponibili. Un'azione massiva \xe8 un'operazione che coinvolge contemporaneamente e allo stesso modo due o pi\xf9 file. Sono effettuabili le seguenti azioni massive: "),e.qZA(),e.TgZ(126,"ul")(127,"li")(128,"em"),e._uU(129,"seleziona tutti"),e.qZA(),e._uU(130,": questo pulsante, visibile solo se non \xe8 ancora stato selezionato alcun file, consente di "),e.TgZ(131,"strong"),e._uU(132,"selezionare tutti"),e.qZA(),e._uU(133," i file presente nella cartella corrente; "),e.qZA(),e.TgZ(134,"li")(135,"em"),e._uU(136,"deseleziona tutti"),e.qZA(),e._uU(137,": questo pulsante, visibile solo se \xe8 stato selezionato almeno un file, consente di "),e.TgZ(138,"strong"),e._uU(139,"rimuovere la selezione"),e.qZA(),e._uU(140," da tutti i file in precedenza selezionati; "),e.qZA(),e.TgZ(141,"li")(142,"em"),e._uU(143,"visualizza codici"),e.qZA(),e._uU(144,": questa azione, visibile solo se \xe8 stato selezionato almeno un file, consente di aprire un modal contenente i vari "),e.TgZ(145,"strong"),e._uU(146,"codici"),e.qZA(),e._uU(147," di tutti i file selezionati, tra cui i link per condividerli insieme ed eventualmente per incorporarli come immagine; "),e.qZA(),e.TgZ(148,"li")(149,"em"),e._uU(150,"sposta selezionati"),e.qZA(),e._uU(151,": questa azione, visibile solo se \xe8 stato selezionato almeno un file, consente di "),e.TgZ(152,"strong"),e._uU(153,"spostare"),e.qZA(),e._uU(154," verso un'unica destinazione tutti i file selezionati; "),e.qZA(),e.TgZ(155,"li")(156,"em"),e._uU(157,"elimina selezionati"),e.qZA(),e._uU(158,": questa azione, visibile solo se \xe8 stato selezionato almeno un file, consente di "),e.TgZ(159,"strong"),e._uU(160,"eliminare"),e.qZA(),e._uU(161," in modo definitivo tutti i file selezionati. "),e.qZA()(),e.TgZ(162,"h6",2),e._uU(163,"Ricerca e opzioni di layout"),e.qZA(),e.TgZ(164,"p",3),e._uU(165," Nell'apposito input "),e.TgZ(166,"em"),e._uU(167,"Cerca"),e.qZA(),e._uU(168," \xe8 possibile inserire una parola che verr\xe0 usata per filtrare la lista dei file e delle cartelle sulla base del nome e dell'estensione degli stessi. Il pulsante viola accanto all'input di ricerca consente di modificare il layout dell'elenco di cartelle e file, scegliendo tra griglia e lista. I due pulsanti blu permettono infine di personalizzare l'ordinamento degli elementi presenti nella cartella corrente: "),e.qZA(),e.TgZ(169,"ul",7)(170,"li"),e._uU(171," il pulsante "),e.TgZ(172,"em"),e._uU(173,"a-z"),e.qZA(),e._uU(174," e "),e.TgZ(175,"em"),e._uU(176,"z-a"),e.qZA(),e._uU(177," consente di ordinare gli elementi seguendo un criterio rispettivamente crescente o decrescente; "),e.qZA(),e.TgZ(178,"li"),e._uU(179," il secondo pulsante apre un men\xf9 in cui \xe8 possibile scegliere un criterio di ordinamento tra "),e.TgZ(180,"em"),e._uU(181,"nome"),e.qZA(),e._uU(182,", "),e.TgZ(183,"em"),e._uU(184,"data di ultima modifica"),e.qZA(),e._uU(185,", che per i file non modificati coincide con la data di caricamento, "),e.TgZ(186,"em"),e._uU(187,"dimensione"),e.qZA(),e._uU(188,", cio\xe8 peso in byte del file, ed "),e.TgZ(189,"em"),e._uU(190,"estensione"),e.qZA(),e._uU(191,". "),e.qZA()()()),2&t&&(e.xp6(6),e.hij(" di ",n.appName," si pone come obiettivo fornire uno "),e.xp6(54),e.Q6J("ngForOf",n.supportedFiles))},dependencies:[m.sg,B.z,xt.J,dn]}),i})();const jr=function(i){return{"mb-2":i}};function ea(i,s){1&i&&e._UZ(0,"li",6),2&i&&e.Q6J("ngClass",e.VKq(1,jr,!s.last))}const ta=function(){return[]};function na(i,s){1&i&&(e.ynx(0),e.TgZ(1,"ul",4),e.YNc(2,ea,1,3,"li",5),e.qZA(),e.BQk()),2&i&&(e.xp6(2),e.Q6J("ngForOf",e.DdM(1,ta).constructor(3)))}function ia(i,s){1&i&&(e.ynx(0),e.TgZ(1,"div",9),e._uU(2,"Non ci sono file recenti!"),e.qZA(),e.BQk())}const oa=function(i){return{rotating:i}},sa=function(i){return{width:i}};function ra(i,s){if(1&i&&(e.TgZ(0,"li",16),e._UZ(1,"div",17),e.TgZ(2,"div",18)(3,"div",19),e._UZ(4,"div",20)(5,"div",21),e.TgZ(6,"div",22),e._uU(7),e.qZA()(),e.TgZ(8,"div",23),e._UZ(9,"div",24),e.qZA()()()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngClass",e.VKq(6,oa,t.progress>0&&t.progress<100))("innerText",t.progress>0?t.progress<100?"sync":"check_circle":"schedule"),e.xp6(3),e.Q6J("innerText",t.file.filename),e.xp6(1),e.Q6J("innerText","."+t.file.ext),e.xp6(2),e.hij("",t.progress,"%"),e.xp6(2),e.Q6J("ngStyle",e.VKq(8,sa,t.progress+"%"))}}function aa(i,s){if(1&i&&(e.ynx(0),e.YNc(1,ra,10,10,"li",15),e.BQk()),2&i){const t=s.$implicit;e.xp6(1),e.Q6J("ngIf",!t.error)}}function la(i,s){if(1&i&&(e.TgZ(0,"li",25)(1,"div",26),e._uU(2,"cancel"),e.qZA(),e.TgZ(3,"div",18)(4,"div",27),e._UZ(5,"div",20)(6,"div",21),e.qZA(),e.TgZ(7,"div",28),e._uU(8,"Errore durante il caricamento"),e.qZA()()()),2&i){const t=s.$implicit;e.xp6(5),e.Q6J("innerText",t.file.filename),e.xp6(1),e.Q6J("innerText","."+t.file.ext)}}const ca=function(i,s){return{pending:i,selected:s}},da=function(){return[0,5]},pa=function(i){return{offset:i,appendTo:"parent"}};function ha(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"li",29),e.ALo(1,"arrayIncludes"),e.ALo(2,"arrayIncludes"),e.TgZ(3,"button",30),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw(3);return e.KtG(a.unselectFile(r.name))}),e.O4$(),e.TgZ(4,"svg",31),e._UZ(5,"path",32)(6,"path",33),e.qZA()(),e.kcU(),e.TgZ(7,"a",34),e._uU(8,"wallpaper"),e.qZA(),e.TgZ(9,"div",35)(10,"a",36),e._UZ(11,"div",20)(12,"div",37),e.qZA(),e.TgZ(13,"div",38)(14,"div",39),e._uU(15),e.ALo(16,"formatBytes"),e.qZA(),e.TgZ(17,"div",40),e.ALo(18,"date"),e._UZ(19,"span",41),e.qZA()()(),e.TgZ(20,"div",42,43),e.NdJ("openChange",function(o){e.CHM(t);const r=e.MAs(21);e.oxw();const a=e.MAs(1),d=e.oxw(2);return e.KtG(d.saveDropdown(r,a,o))}),e.TgZ(22,"div",44),e._uU(23,"more_vert"),e.qZA(),e.TgZ(24,"div",45),e._UZ(25,"app-upload-file-menu",46),e.ALo(26,"arrayIncludes"),e.qZA()()()}if(2&i){const t=s.$implicit,n=e.MAs(21),o=e.oxw(3);e.Q6J("ngClass",e.WLB(26,ca,e.xi3(1,12,o.pendingFiles,t.name),e.xi3(2,15,o.selectedFiles,t.name))),e.xp6(7),e.Q6J("href",t.url,e.LSH),e.xp6(3),e.Q6J("href",t.url,e.LSH),e.xp6(1),e.Q6J("innerText",t.filename),e.xp6(1),e.Q6J("innerText","."+t.ext),e.xp6(3),e.Oqu(e.lcZ(16,18,t.size)),e.xp6(2),e.Q6J("appTippy",e.xi3(18,20,t.time,"dd-MM-YY HH:mm")||"")("tippyProps",e.VKq(30,pa,e.DdM(29,da))),e.xp6(2),e.Q6J("date",t.time),e.xp6(6),e.Q6J("file",t)("isSelected",e.xi3(26,23,o.selectedFiles,t.name))("dropdownRef",n)}}function ua(i,s){if(1&i&&(e.TgZ(0,"ul",10,11),e.YNc(2,aa,2,1,"ng-container",12),e.YNc(3,la,9,2,"li",13),e.YNc(4,ha,27,32,"li",14),e.ALo(5,"slice"),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",t.uploadingFileList),e.xp6(1),e.Q6J("ngForOf",t.uploadedFileWithErrors),e.xp6(1),e.Q6J("ngForOf",e.Dn7(5,3,t.fileList,0,5))}}function ga(i,s){if(1&i&&(e.TgZ(0,"div",7),e.YNc(1,ia,3,0,"ng-container",2),e.YNc(2,ua,6,7,"ng-template",null,8,e.W1O),e.qZA()),2&i){const t=e.MAs(3),n=e.oxw();e.xp6(1),e.Q6J("ngIf",0===n.fileList.length&&0===n.uploadingFileList.length&&0===n.uploadedFileWithErrors.length)("ngIfElse",t)}}const ma=function(i){return{"touch-device":i}};let _a=(()=>{class i{constructor(t,n){this.uploadObservablesService=t,this.renderer=n,this.fileList=[],this.loading=!0,this.touchDevice=Z.eX,this.uploadingFileList=[],this.uploadedFileWithErrors=[],this.pendingFiles=[],this.selectedFiles=[],this.openedDropdown=[],this.checkOpenedDropdownEvent=!1}ngOnInit(){this.uploadingListSubscription=this.uploadObservablesService.uploadingFileQueueObservable.subscribe(t=>{this.uploadingFileList=[...t].reverse()}),this.uploadingErrorSubscription=this.uploadObservablesService.uploadingFileErrorObservable.subscribe(t=>{this.uploadedFileWithErrors.unshift(t)}),this.entityPendingSubscription=this.uploadObservablesService.entityPendingObservable.subscribe(t=>{t.forEach(n=>{n.type===v.VC.FILE&&(this.pendingFiles=[...this.updatePendingFileList(this.pendingFiles,n.name,n.start)])})}),this.selectedFileListSubscription=this.uploadObservablesService.selectedFileListObservable.subscribe(t=>{this.selectedFiles=t.map(n=>n.name)})}updatePendingFileList(t,n,o){if(o)t.includes(n)||t.push(n);else{const r=t.indexOf(n);r>-1&&t.splice(r,1)}return t}saveDropdown(t,n,o){if(!o||(this.openedDropdown.push(t),this.checkOpenedDropdownEvent))return;this.checkOpenedDropdownEvent=!0;const r=this.renderer.listen(n,"scroll",()=>{this.openedDropdown.forEach(a=>{a.isOpen()&&a.close()}),this.openedDropdown=[],this.checkOpenedDropdownEvent=!1,r()})}unselectFile(t){this.uploadObservablesService.pushSelectedFile({name:t,selected:!1})}ngOnDestroy(){this.uploadingListSubscription?.unsubscribe(),this.uploadingErrorSubscription?.unsubscribe(),this.entityPendingSubscription?.unsubscribe(),this.selectedFileListSubscription?.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(K.r),e.Y36(e.Qsj))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-upload-recent-files"]],inputs:{fileList:"fileList",loading:"loading"},decls:6,vars:5,consts:[[1,"flat-container","py-2","px-3","h-100","d-flex","flex-column",3,"ngClass"],[1,"fv-small-caps","fs-lg","mb-2"],[4,"ngIf","ngIfElse"],["listContainer",""],[1,"list-unstyled","mb-1","placeholder-glow"],["class","placeholder col-12 rounded",3,"ngClass",4,"ngFor","ngForOf"],[1,"placeholder","col-12","rounded",3,"ngClass"],["app-hidden-scroller","","height","100%",1,"file-list-container","mb-1"],["listContent",""],[1,"alert","alert-primary","mb-0","text-center"],[1,"list-unstyled","mb-0","file-list"],["list",""],[4,"ngFor","ngForOf"],["class","file-container rounded bg-danger text-white",4,"ngFor","ngForOf"],["class","file-container rounded position-relative",3,"ngClass",4,"ngFor","ngForOf"],["class","file-container rounded uploading",4,"ngIf"],[1,"file-container","rounded","uploading"],[1,"d-block","material-icons-outlined","text-primary",3,"ngClass","innerText"],[1,"ms-3","flex-grow-1","min-w-0"],[1,"d-flex","align-items-end"],[1,"text-truncate",3,"innerText"],[1,"me-3",3,"innerText"],[1,"ms-auto","fs-sm"],[1,"progress","bg-white","mt-1"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar",3,"ngStyle"],[1,"file-container","rounded","bg-danger","text-white"],[1,"d-block","material-icons-outlined"],[1,"d-flex"],[1,"fs-xs"],[1,"file-container","rounded","position-relative",3,"ngClass"],[1,"btn","btn-primary","shadow-none","pre-button","d-flex","justify-content-center","align-items-center","p-0","position-absolute",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","currentColor","viewBox","0 0 16 16"],["d","M2.5 8a5.5 5.5 0 0 1 8.25-4.764.5.5 0 0 0 .5-.866A6.5 6.5 0 1 0 14.5 8a.5.5 0 0 0-1 0 5.5 5.5 0 1 1-11 0z"],["d","M15.354 3.354a.5.5 0 0 0-.708-.708L8 9.293 5.354 6.646a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0l7-7z"],["target","_blank","rel","noreferrer",1,"material-icons-outlined","d-block","text-primary",3,"href"],[1,"mx-3","flex-grow-1","min-w-0"],["target","_blank","rel","noreferrer",1,"text-reset","d-inline-flex","mw-100",3,"href"],[3,"innerText"],[1,"text-muted","fs-xs","d-flex","flex-wrap","align-items-center","position-relative"],[1,"file-size","me-1"],[1,"file-time",3,"appTippy","tippyProps"],["timeago","",3,"date"],["ngbDropdown","","placement","left-top","display","dynamic","container","body",1,"dropdown-no-caret","ms-auto",3,"openChange"],["dropdownRef","ngbDropdown"],["ngbDropdownToggle","",1,"material-icons-outlined","d-block","text-primary","cursor-pointer","dropdown-icon"],["ngbDropdownMenu","",1,"dropdown-menu"],[3,"file","isSelected","dropdownRef"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2,"File recenti"),e.qZA(),e.YNc(3,na,3,2,"ng-container",2),e.YNc(4,ga,4,2,"ng-template",null,3,e.W1O),e.qZA()),2&t){const o=e.MAs(5);e.Q6J("ngClass",e.VKq(3,ma,n.touchDevice)),e.xp6(3),e.Q6J("ngIf",n.loading)("ngIfElse",o)}},dependencies:[m.mk,m.sg,m.O5,m.PC,Li,F.jt,F.iD,F.Vi,Lt,He.$,ei,ki,m.OU,m.uU,dn],styles:['.placeholder[_ngcontent-%COMP%]{height:59px;background-color:var(--bs-gray-500)}.file-list-container[_ngcontent-%COMP%]{overflow:hidden;height:calc(177px + 1rem)}.file-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.5rem 1rem;transition:opacity .2s,margin-left .2s;height:59px}.file-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .pre-button[_ngcontent-%COMP%]{width:40px;left:-10px;transform:translate(-100%);height:70%}.file-list[_ngcontent-%COMP%] > li.selected[_ngcontent-%COMP%]{margin-left:50px}.file-list[_ngcontent-%COMP%] > li.pending[_ngcontent-%COMP%]{opacity:.5}.file-list[_ngcontent-%COMP%] > li.pending[_ngcontent-%COMP%]   .dropdown-icon[_ngcontent-%COMP%]{display:none!important}.file-list[_ngcontent-%COMP%] > li.pending[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{pointer-events:none}.file-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:not(:last-of-type){margin-bottom:.5rem}.file-container[_ngcontent-%COMP%]{background-color:#dae0ff;min-height:59px}.file-container.uploading[_ngcontent-%COMP%]   .rotating[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fullRotation 1s linear infinite}.file-container.uploading[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{height:.5rem;border-radius:.15rem}.touch-device[_ngcontent-%COMP%]   .file-time[_ngcontent-%COMP%]{cursor:pointer}.file-size[_ngcontent-%COMP%]:after{content:" - "}@keyframes _ngcontent-%COMP%_fullRotation{0%{transform:rotate(0)}to{transform:rotate(-360deg)}}']}),i})();const fa=["fileLinksModal"],va=["renameModal"],Ca=["deleteModal"],xa=["moveModal"],ba=["cropModal"];let ya=(()=>{class i{constructor(t,n,o,r,a){this.uploadService=t,this.uploadObservablesService=n,this.cookieService=o,this.uploadActionsService=r,this.uploadSubscriptionsService=a,this.fileList=[],this.folderList=[],this.loading=!0,this.currentFolderPath=[],this.currentFilter="",this.currentActionEntities=[],this.currentActionReservedNames=[]}ngOnInit(){var t=this;return(0,q.Z)(function*(){t.uploadService.setGqlIdHeader(),t.currentFolderPath=t.uploadService.preferences.lastFolderPath,t.uploadActionsService.currentFolderPath=[...t.currentFolderPath],yield t.getFiles(),t.setSubscriptions(),yield t.subscribeForChanges(),t.loading=!1})()}subscribeForChanges(){var t=this;return(0,q.Z)(function*(){t.graphqlChangesSubscriptionDispose=yield t.uploadService.subscribeForChanges(function(){var n=(0,q.Z)(function*(o){const r=(a,d)=>{a&&t.closeActionModal(),d&&t.uploadObservablesService.pushCurrentFolderPath([])};switch(o.type){case St.UPLOAD:{const a=t.uploadSubscriptionsService.parseUploadEvent(o.message);a&&t.uploadedFiles(a)}break;case St.NEW_DIR:{const a=t.uploadSubscriptionsService.parseCreateFolderEvent(o.message);a&&t.createFolder(a)}break;case St.DELETE:{const a=t.uploadSubscriptionsService.parseDeleteEntityEvent(o.message,t.currentFolderPath,t.currentActionEntities);a&&(r(a.entityCompromised,a.pathCompromised),t.removeEntitiesFromList(a.event))}break;case St.MOVE:{const a=t.uploadSubscriptionsService.parseMoveEntityEvent(o.message,t.currentFolderPath,t.currentActionEntities);if(!a)break;r(a.entityCompromised,a.pathCompromised);const d={name:a.source.name,type:a.type};a.isRename?t.renameEntityInList({list:[d],destPath:a.target.paths,newEntityData:a.newEntity}):(t.removeEntitiesFromList({destPath:a.source.paths,list:[d]}),t.moveEntitiesInList({list:[d],destPath:a.target.paths,originPath:a.source.paths,results:[{data:a.newEntity,type:d.type}]}))}}});return function(o){return n.apply(this,arguments)}}())})()}setSubscriptions(){var t=this;this.actionSubscription=this.uploadObservablesService.actionObservable.subscribe(n=>{if(n.payload.entities[0]){switch(n.name){case v.In.FILE_SHOW_LINKS:this.currentActionModalRef=this.fileLinksModalComponent.open();break;case v.In.RENAME:this.currentActionReservedNames=n.payload.entities[0].type===v.VC.FILE?this.fileList.map(o=>o.name):this.folderList.map(o=>o.name),this.currentActionModalRef=this.renameModalComponent.open();break;case v.In.MOVE:this.currentActionModalRef=this.fileMoveModalComponent.open();break;case v.In.DELETE:this.currentActionModalRef=this.deleteModalComponent.open();break;case v.In.FILE_EDIT:this.currentActionModalRef=this.fileCropModalComponent.open()}this.currentActionEntities=n.payload.entities}}),this.currentFolderPathSubscription=this.uploadObservablesService.currentFolderPathObservable.subscribe(function(){var n=(0,q.Z)(function*(o){t.loading=!0,t.uploadObservablesService.pushSelectedFile([]),t.uploadObservablesService.pushUploadingFileQueue([]),t.closeActionModal(),t.currentFolderPath=o,t.uploadActionsService.currentFolderPath=[...o],yield t.getFiles(),t.loading=!1});return function(o){return n.apply(this,arguments)}}())}closeActionModal(){this.currentActionModalRef&&(this.currentActionModalRef.close(),this.currentActionModalRef=void 0)}getFiles(){var t=this;return(0,q.Z)(function*(){const n=yield t.uploadService.getFileList(t.currentFolderPath);t.fileList=n.files.map(o=>({...o})),t.folderList=n.folders.map(o=>({...o})),t.sortListByTime()})()}sortListByTime(){this.fileList.sort((t,n)=>t.time>n.time?-1:1)}removeEntitiesFromList(t){const n=(0,A.rQ)(t.list);for(const[o,r]of Object.entries(n)){if(0===r.length)continue;const a=this.uploadActionsService.removeEntitiesCallback(t.destPath,r.map(d=>d.name),o);if(a.success&&a.payload){const d=o===v.VC.FILE,u=d?this.fileList:this.folderList;for(const f of a.payload.list){const x=u.findIndex(b=>b.name===f);x>-1&&u.splice(x,1)}d?(this.uploadObservablesService.pushDeleteFile(a.payload.list),this.deselectFiles(a.payload.list)):this.folderList=[...u]}}}renameEntityInList(t){const n=t.list[0],o=this.uploadActionsService.renameEntityCallback(t.destPath,n,t.newEntityData);if(!o.payload)return;const r=o.payload.list[0],a=n.type===v.VC.FILE?this.fileList:this.folderList,d=a.findIndex(u=>u.name===n.name);d<0||(a[d]=r,this.uploadObservablesService.pushRenameEntity({oldName:n.name,newEntity:r}),n.type===v.VC.FILE&&this.sortListByTime())}moveEntitiesInList(t){const n=this.uploadActionsService.moveEntitiesCallback(t.results);n.payload&&(n.payload.list.files.length&&this.uploadedFiles({destPath:t.destPath,list:n.payload.list.files,rewrite:!1}),n.payload.list.folders.length&&this.createFolder({destPath:t.destPath,list:n.payload.list.folders,opened:!1}))}uploadedFiles(t){t.rewrite&&this.removeEntitiesFromList({destPath:t.destPath,list:t.list.map(o=>({name:o.name,type:v.VC.FILE}))});const n=this.uploadActionsService.addEntitiesCallback(t.destPath,t.list,v.VC.FILE);n.success&&n.payload&&(this.fileList.unshift(...n.payload.list),this.uploadObservablesService.pushUploadedFile(n.payload.list))}createFolder(t){const n=this.uploadActionsService.addEntitiesCallback(t.destPath,t.list,v.VC.FOLDER);!t.opened&&n.success&&n.payload&&(this.folderList=[...this.folderList,...n.payload.list])}selectAllFiles(){this.uploadObservablesService.pushSelectedFile(this.fileList.map(t=>({name:t.name,selected:!0})))}deselectFiles(t){this.uploadObservablesService.pushSelectedFile(t.map(n=>({name:n,selected:!1})))}ngOnDestroy(){this.actionSubscription?.unsubscribe(),this.currentFolderPathSubscription?.unsubscribe(),this.graphqlChangesSubscriptionDispose&&this.graphqlChangesSubscriptionDispose(),this.uploadService.removeGqlIdHeader()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(qe.C),e.Y36(K.r),e.Y36(_o.N),e.Y36(ze),e.Y36(mo))},i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],viewQuery:function(t,n){if(1&t&&(e.Gf(fa,5),e.Gf(va,5),e.Gf(Ca,5),e.Gf(xa,5),e.Gf(ba,5)),2&t){let o;e.iGM(o=e.CRH())&&(n.fileLinksModalComponent=o.first),e.iGM(o=e.CRH())&&(n.renameModalComponent=o.first),e.iGM(o=e.CRH())&&(n.deleteModalComponent=o.first),e.iGM(o=e.CRH())&&(n.fileMoveModalComponent=o.first),e.iGM(o=e.CRH())&&(n.fileCropModalComponent=o.first)}},decls:19,vars:22,consts:[["pageTitle","Gestione file"],[1,"d-grid","upload-header"],[3,"loading","currentFolderPath","fileUploadedEvent","openInfoModal"],[1,"min-w-0",3,"fileList","loading"],[1,"d-flex","flex-column",3,"loading","fileList","filterEvent","selectAllFilesEvent","openInfoModal"],[3,"loading","folderList","currentFolderPath","filter","newFolderEvent"],[3,"loading","fileList","filter"],[3,"entities"],["fileLinksModal",""],[3,"currentFolderPath","entity","reservedNames","renameEvent"],["renameModal",""],[3,"entities","currentFolderPath","deleteEvent"],["deleteModal",""],[3,"entities","currentFolderPath","moveEvent","deleteBeforeMovingEvent"],["moveModal",""],[3,"entity"],["cropModal",""],["infoModal",""]],template:function(t,n){if(1&t){const o=e.EpF();e._UZ(0,"app-breadcrumb",0),e.TgZ(1,"div",1)(2,"app-uploader",2),e.NdJ("fileUploadedEvent",function(a){return n.uploadedFiles(a)})("openInfoModal",function(){e.CHM(o);const a=e.MAs(18);return e.KtG(a.open())}),e.qZA(),e._UZ(3,"app-upload-recent-files",3),e.TgZ(4,"app-upload-filter",4),e.NdJ("filterEvent",function(a){return n.currentFilter=a})("selectAllFilesEvent",function(){return n.selectAllFiles()})("openInfoModal",function(){e.CHM(o);const a=e.MAs(18);return e.KtG(a.open())}),e.qZA()(),e.TgZ(5,"app-upload-folder-list",5),e.NdJ("newFolderEvent",function(a){return n.createFolder(a)}),e.qZA(),e._UZ(6,"app-upload-file-list",6)(7,"app-upload-file-links-modal",7,8),e.TgZ(9,"app-upload-rename-modal",9,10),e.NdJ("renameEvent",function(a){return n.renameEntityInList(a)}),e.qZA(),e.TgZ(11,"app-upload-delete-modal",11,12),e.NdJ("deleteEvent",function(a){return n.removeEntitiesFromList(a)}),e.qZA(),e.TgZ(13,"app-upload-move-modal",13,14),e.NdJ("moveEvent",function(a){return n.moveEntitiesInList(a)})("deleteBeforeMovingEvent",function(a){return n.removeEntitiesFromList(a)}),e.qZA(),e._UZ(15,"app-upload-crop-modal",15,16)(17,"app-upload-info-modal",null,17)}2&t&&(e.xp6(2),e.Q6J("loading",n.loading)("currentFolderPath",n.currentFolderPath),e.xp6(1),e.Q6J("fileList",n.fileList)("loading",n.loading),e.xp6(1),e.Q6J("loading",n.loading)("fileList",n.fileList),e.xp6(1),e.Q6J("loading",n.loading)("folderList",n.folderList)("currentFolderPath",n.currentFolderPath)("filter",n.currentFilter),e.xp6(1),e.Q6J("loading",n.loading)("fileList",n.fileList)("filter",n.currentFilter),e.xp6(1),e.Q6J("entities",n.currentActionEntities),e.xp6(2),e.Q6J("currentFolderPath",n.currentFolderPath)("entity",n.currentActionEntities[0])("reservedNames",n.currentActionReservedNames),e.xp6(2),e.Q6J("entities",n.currentActionEntities)("currentFolderPath",n.currentFolderPath),e.xp6(2),e.Q6J("entities",n.currentActionEntities)("currentFolderPath",n.currentFolderPath),e.xp6(2),e.Q6J("entity",n.currentActionEntities[0]))},dependencies:[fo.L,vo.B,Bs,Or,ft,Qe,bt,Wr,Xr,$i,_a,go],styles:[".upload-header[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem;margin-bottom:1rem}@media (min-width: 500px){.upload-header[_ngcontent-%COMP%]{margin-bottom:1.5rem}}@media (min-width: 768px){.upload-header[_ngcontent-%COMP%]{margin-bottom:2rem}}@media (min-width: 960px){.upload-header[_ngcontent-%COMP%]{gap:1.5rem}}@media (min-width: 1100px) and (max-width: 1499.98px){.upload-header[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.upload-header[_ngcontent-%COMP%]   app-uploader[_ngcontent-%COMP%]{grid-column:span 2}}@media (min-width: 1500px){.upload-header[_ngcontent-%COMP%]{grid-template-columns:calc(38% - 1rem) calc(28% - 1rem) calc(34% - 1rem)}.upload-header[_ngcontent-%COMP%]   app-uploader[_ngcontent-%COMP%]{grid-column:initial;min-height:250px}}"]}),i})();var Ta=_(529),Ma=_(3746);let wa=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[m.ez]}),i})();var Sa=_(1679);let Ni=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[m.ez]}),i})();var Kn=_(7271);Kn.defaults.touchAction="",Kn.defaults.cssProps.userSelect="",Z.eX&&(Kn.defaults.cssProps.userSelect="none");let Oa=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[Ma.P,wa,m.ez,Ho,Be,rs,F.XC,ie.Cl,Sa.Y,me.forChild(),H.G,Ni]}),i})(),Pa=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[pe,m.ez,T.u5,M.q,k.z,F.XC]}),i})();var Ea=_(5778);const Ia=[{path:"",component:ya}];let Aa=(()=>{class i{constructor(t){this.timeagoIntl=t,this.timeagoIntl.strings=Ze,this.timeagoIntl.changes.next()}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(Ne))},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[pe,Fe.r,S.w,he.Iq,m.ez,Ue.b,Be,T.u5,re,w,W,M.q,k.z,F._A,F.lQ,F.XC,G.Bz.forChild(Ia),me.forRoot({intl:{provide:Ne},formatter:{provide:Oe,useClass:gn},clock:{provide:ge,useClass:L}}),H.G,Ta.M,Oa,Ni,Pa,Ea.g]}),i})()},7271:(ht,fe,_)=>{var m;!function(e,pe,Fe,S){"use strict";var G,he=["","webkit","Moz","MS","ms","o"],Ue=pe.createElement("div"),Be="function",T=Math.round,re=Math.abs,w=Date.now;function W(l,c,p){return setTimeout(ve(l,p),c)}function M(l,c,p){return!!Array.isArray(l)&&(k(l,p[c],p),!0)}function k(l,c,p){var h;if(l)if(l.forEach)l.forEach(c,p);else if(l.length!==S)for(h=0;h<l.length;)c.call(p,l[h],h,l),h++;else for(h in l)l.hasOwnProperty(h)&&c.call(p,l[h],h,l)}function F(l,c,p){var h="DEPRECATED METHOD: "+c+"\n"+p+" AT \n";return function(){var g=new Error("get-stack-trace"),C=g&&g.stack?g.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",y=e.console&&(e.console.warn||e.console.log);return y&&y.call(e.console,h,C),l.apply(this,arguments)}}G="function"!=typeof Object.assign?function(c){if(c===S||null===c)throw new TypeError("Cannot convert undefined or null to object");for(var p=Object(c),h=1;h<arguments.length;h++){var g=arguments[h];if(g!==S&&null!==g)for(var C in g)g.hasOwnProperty(C)&&(p[C]=g[C])}return p}:Object.assign;var Ze=F(function(c,p,h){for(var g=Object.keys(p),C=0;C<g.length;)(!h||h&&c[g[C]]===S)&&(c[g[C]]=p[g[C]]),C++;return c},"extend","Use `assign`."),Te=F(function(c,p){return Ze(c,p,!0)},"merge","Use `assign`.");function U(l,c,p){var g,h=c.prototype;(g=l.prototype=Object.create(h)).constructor=l,g._super=h,p&&G(g,p)}function ve(l,c){return function(){return l.apply(c,arguments)}}function We(l,c){return typeof l==Be?l.apply(c&&c[0]||S,c):l}function ke(l,c){return l===S?c:l}function Le(l,c,p){k(Ke(c),function(h){l.addEventListener(h,p,!1)})}function Re(l,c,p){k(Ke(c),function(h){l.removeEventListener(h,p,!1)})}function O(l,c){for(;l;){if(l==c)return!0;l=l.parentNode}return!1}function ae(l,c){return l.indexOf(c)>-1}function Ke(l){return l.trim().split(/\s+/g)}function Me(l,c,p){if(l.indexOf&&!p)return l.indexOf(c);for(var h=0;h<l.length;){if(p&&l[h][p]==c||!p&&l[h]===c)return h;h++}return-1}function $e(l){return Array.prototype.slice.call(l,0)}function we(l,c,p){for(var h=[],g=[],C=0;C<l.length;){var y=c?l[C][c]:l[C];Me(g,y)<0&&h.push(l[C]),g[C]=y,C++}return p&&(h=c?h.sort(function(N,J){return N[c]>J[c]}):h.sort()),h}function ue(l,c){for(var p,h,g=c[0].toUpperCase()+c.slice(1),C=0;C<he.length;){if((h=(p=he[C])?p+g:c)in l)return h;C++}return S}var Se=1;function ut(l){var c=l.ownerDocument||l;return c.defaultView||c.parentWindow||e}var Ne="ontouchstart"in e,Zt=ue(e,"PointerEvent")!==S,Oe=Ne&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),Pe="touch",ge="mouse",Lt=25,Q=1,L=4,H=8,q=1,v=2,A=4,Ee=8,ze=16,j=v|A,B=Ee|ze,Rt=j|B,K=["x","y"],Xe=["clientX","clientY"];function I(l,c){var p=this;this.manager=l,this.callback=c,this.element=l.element,this.target=l.options.inputTarget,this.domHandler=function(h){We(l.options.enable,[l])&&p.handler(h)},this.init()}function _n(l,c,p){var h=p.pointers.length,g=p.changedPointers.length,C=c&Q&&h-g==0,y=c&(L|H)&&h-g==0;p.isFirst=!!C,p.isFinal=!!y,C&&(l.session={}),p.eventType=c,function fn(l,c){var p=l.session,h=c.pointers,g=h.length;p.firstInput||(p.firstInput=zt(c)),g>1&&!p.firstMultiple?p.firstMultiple=zt(c):1===g&&(p.firstMultiple=!1);var C=p.firstInput,y=p.firstMultiple,R=y?y.center:C.center,N=c.center=gt(h);c.timeStamp=w(),c.deltaTime=c.timeStamp-C.timeStamp,c.angle=mt(R,N),c.distance=et(R,N),function je(l,c){var p=c.center,h=l.offsetDelta||{},g=l.prevDelta||{},C=l.prevInput||{};(c.eventType===Q||C.eventType===L)&&(g=l.prevDelta={x:C.deltaX||0,y:C.deltaY||0},h=l.offsetDelta={x:p.x,y:p.y}),c.deltaX=g.x+(p.x-h.x),c.deltaY=g.y+(p.y-h.y)}(p,c),c.offsetDirection=qt(c.deltaX,c.deltaY);var J=Ht(c.deltaTime,c.deltaX,c.deltaY);c.overallVelocityX=J.x,c.overallVelocityY=J.y,c.overallVelocity=re(J.x)>re(J.y)?J.x:J.y,c.scale=y?function Cn(l,c){return et(c[0],c[1],Xe)/et(l[0],l[1],Xe)}(y.pointers,h):1,c.rotation=y?function vn(l,c){return mt(c[1],c[0],Xe)+mt(l[1],l[0],Xe)}(y.pointers,h):0,c.maxPointers=p.prevInput?c.pointers.length>p.prevInput.maxPointers?c.pointers.length:p.prevInput.maxPointers:c.pointers.length,function Nt(l,c){var g,C,y,R,p=l.lastInterval||c,h=c.timeStamp-p.timeStamp;if(c.eventType!=H&&(h>Lt||p.velocity===S)){var N=c.deltaX-p.deltaX,J=c.deltaY-p.deltaY,ne=Ht(h,N,J);C=ne.x,y=ne.y,g=re(ne.x)>re(ne.y)?ne.x:ne.y,R=qt(N,J),l.lastInterval=c}else g=p.velocity,C=p.velocityX,y=p.velocityY,R=p.direction;c.velocity=g,c.velocityX=C,c.velocityY=y,c.direction=R}(p,c);var ne=l.element;O(c.srcEvent.target,ne)&&(ne=c.srcEvent.target),c.target=ne}(l,p),l.emit("hammer.input",p),l.recognize(p),l.session.prevInput=p}function zt(l){for(var c=[],p=0;p<l.pointers.length;)c[p]={clientX:T(l.pointers[p].clientX),clientY:T(l.pointers[p].clientY)},p++;return{timeStamp:w(),pointers:c,center:gt(c),deltaX:l.deltaX,deltaY:l.deltaY}}function gt(l){var c=l.length;if(1===c)return{x:T(l[0].clientX),y:T(l[0].clientY)};for(var p=0,h=0,g=0;g<c;)p+=l[g].clientX,h+=l[g].clientY,g++;return{x:T(p/c),y:T(h/c)}}function Ht(l,c,p){return{x:c/l||0,y:p/l||0}}function qt(l,c){return l===c?q:re(l)>=re(c)?l<0?v:A:c<0?Ee:ze}function et(l,c,p){p||(p=K);var h=c[p[0]]-l[p[0]],g=c[p[1]]-l[p[1]];return Math.sqrt(h*h+g*g)}function mt(l,c,p){return p||(p=K),180*Math.atan2(c[p[1]]-l[p[1]],c[p[0]]-l[p[0]])/Math.PI}I.prototype={handler:function(){},init:function(){this.evEl&&Le(this.element,this.evEl,this.domHandler),this.evTarget&&Le(this.target,this.evTarget,this.domHandler),this.evWin&&Le(ut(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&Re(this.element,this.evEl,this.domHandler),this.evTarget&&Re(this.target,this.evTarget,this.domHandler),this.evWin&&Re(ut(this.element),this.evWin,this.domHandler)}};var xn={mousedown:Q,mousemove:2,mouseup:L},bn="mousedown",yn="mousemove mouseup";function tt(){this.evEl=bn,this.evWin=yn,this.pressed=!1,I.apply(this,arguments)}U(tt,I,{handler:function(c){var p=xn[c.type];p&Q&&0===c.button&&(this.pressed=!0),2&p&&1!==c.which&&(p=L),this.pressed&&(p&L&&(this.pressed=!1),this.callback(this.manager,p,{pointers:[c],changedPointers:[c],pointerType:ge,srcEvent:c}))}});var Jt={pointerdown:Q,pointermove:2,pointerup:L,pointercancel:H,pointerout:H},He={2:Pe,3:"pen",4:ge,5:"kinect"},Qt="pointerdown",Yt="pointermove pointerup pointercancel";function _t(){this.evEl=Qt,this.evWin=Yt,I.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}e.MSPointerEvent&&!e.PointerEvent&&(Qt="MSPointerDown",Yt="MSPointerMove MSPointerUp MSPointerCancel"),U(_t,I,{handler:function(c){var p=this.store,h=!1,g=c.type.toLowerCase().replace("ms",""),C=Jt[g],y=He[c.pointerType]||c.pointerType,R=y==Pe,N=Me(p,c.pointerId,"pointerId");C&Q&&(0===c.button||R)?N<0&&(p.push(c),N=p.length-1):C&(L|H)&&(h=!0),!(N<0)&&(p[N]=c,this.callback(this.manager,C,{pointers:p,changedPointers:[c],pointerType:y,srcEvent:c}),h&&p.splice(N,1))}});var Tn={touchstart:Q,touchmove:2,touchend:L,touchcancel:H};function Vt(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,I.apply(this,arguments)}function wn(l,c){var p=$e(l.touches),h=$e(l.changedTouches);return c&(L|H)&&(p=we(p.concat(h),"identifier",!0)),[p,h]}U(Vt,I,{handler:function(c){var p=Tn[c.type];if(p===Q&&(this.started=!0),this.started){var h=wn.call(this,c,p);p&(L|H)&&h[0].length-h[1].length==0&&(this.started=!1),this.callback(this.manager,p,{pointers:h[0],changedPointers:h[1],pointerType:Pe,srcEvent:c})}}});var Gt={touchstart:Q,touchmove:2,touchend:L,touchcancel:H},Sn="touchstart touchmove touchend touchcancel";function nt(){this.evTarget=Sn,this.targetIds={},I.apply(this,arguments)}function On(l,c){var p=$e(l.touches),h=this.targetIds;if(c&(2|Q)&&1===p.length)return h[p[0].identifier]=!0,[p,p];var g,C,y=$e(l.changedTouches),R=[],N=this.target;if(C=p.filter(function(J){return O(J.target,N)}),c===Q)for(g=0;g<C.length;)h[C[g].identifier]=!0,g++;for(g=0;g<y.length;)h[y[g].identifier]&&R.push(y[g]),c&(L|H)&&delete h[y[g].identifier],g++;return R.length?[we(C.concat(R),"identifier",!0),R]:void 0}U(nt,I,{handler:function(c){var p=Gt[c.type],h=On.call(this,c,p);h&&this.callback(this.manager,p,{pointers:h[0],changedPointers:h[1],pointerType:Pe,srcEvent:c})}});var Pn=2500;function ft(){I.apply(this,arguments);var l=ve(this.handler,this);this.touch=new nt(this.manager,l),this.mouse=new tt(this.manager,l),this.primaryTouch=null,this.lastTouches=[]}function it(l,c){l&Q?(this.primaryTouch=c.changedPointers[0].identifier,Ie.call(this,c)):l&(L|H)&&Ie.call(this,c)}function Ie(l){var c=l.changedPointers[0];if(c.identifier===this.primaryTouch){var p={x:c.clientX,y:c.clientY};this.lastTouches.push(p);var h=this.lastTouches;setTimeout(function(){var C=h.indexOf(p);C>-1&&h.splice(C,1)},Pn)}}function qe(l){for(var c=l.srcEvent.clientX,p=l.srcEvent.clientY,h=0;h<this.lastTouches.length;h++){var g=this.lastTouches[h],C=Math.abs(c-g.x),y=Math.abs(p-g.y);if(C<=25&&y<=25)return!0}return!1}U(ft,I,{handler:function(c,p,h){var C=h.pointerType==ge;if(!(C&&h.sourceCapabilities&&h.sourceCapabilities.firesTouchEvents)){if(h.pointerType==Pe)it.call(this,p,h);else if(C&&qe.call(this,h))return;this.callback(c,p,h)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Wt=ue(Ue.style,"touchAction"),Kt=Wt!==S,$t="compute",vt="manipulation",Ce="none",Je="pan-x",Qe="pan-y",Z=function En(){if(!Kt)return!1;var l={},c=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(p){l[p]=!c||e.CSS.supports("touch-action",p)}),l}();function Ct(l,c){this.manager=l,this.set(c)}Ct.prototype={set:function(l){l==$t&&(l=this.compute()),Kt&&this.manager.element.style&&Z[l]&&(this.manager.element.style[Wt]=l),this.actions=l.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var l=[];return k(this.manager.recognizers,function(c){We(c.options.enable,[c])&&(l=l.concat(c.getTouchAction()))}),function xt(l){if(ae(l,Ce))return Ce;var c=ae(l,Je),p=ae(l,Qe);return c&&p?Ce:c||p?c?Je:Qe:ae(l,vt)?vt:"auto"}(l.join(" "))},preventDefaults:function(l){var c=l.srcEvent,p=l.offsetDirection;if(!this.manager.session.prevented){var h=this.actions,g=ae(h,Ce)&&!Z[Ce],C=ae(h,Qe)&&!Z[Qe],y=ae(h,Je)&&!Z[Je];if(g&&1===l.pointers.length&&l.distance<2&&l.deltaTime<250)return;return y&&C||!(g||C&&p&j||y&&p&B)?void 0:this.preventSrc(c)}c.preventDefault()},preventSrc:function(l){this.manager.session.prevented=!0,l.preventDefault()}};var ot=1;function de(l){this.options=G({},this.defaults,l||{}),this.id=function Ft(){return Se++}(),this.manager=null,this.options.enable=ke(this.options.enable,!0),this.state=ot,this.simultaneous={},this.requireFail=[]}function jt(l){return 16&l?"cancel":8&l?"end":4&l?"move":2&l?"start":""}function en(l){return l==ze?"down":l==Ee?"up":l==v?"left":l==A?"right":""}function Ve(l,c){var p=c.manager;return p?p.get(l):l}function X(){de.apply(this,arguments)}function st(){X.apply(this,arguments),this.pX=null,this.pY=null}function bt(){X.apply(this,arguments)}function yt(){de.apply(this,arguments),this._timer=null,this._input=null}function Tt(){X.apply(this,arguments)}function Mt(){X.apply(this,arguments)}function rt(){de.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function xe(l,c){return(c=c||{}).recognizers=ke(c.recognizers,xe.defaults.preset),new wt(l,c)}function wt(l,c){this.options=G({},xe.defaults,c||{}),this.options.inputTarget=this.options.inputTarget||l,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=l,this.input=function mn(l){return new(l.options.inputClass||(Zt?_t:Oe?nt:Ne?ft:tt))(l,_n)}(this),this.touchAction=new Ct(this,this.options.touchAction),tn(this,!0),k(this.options.recognizers,function(p){var h=this.add(new p[0](p[1]));p[2]&&h.recognizeWith(p[2]),p[3]&&h.requireFailure(p[3])},this)}function tn(l,c){var h,p=l.element;p.style&&(k(l.options.cssProps,function(g,C){h=ue(p.style,C),c?(l.oldCssProps[h]=p.style[h],p.style[h]=g):p.style[h]=l.oldCssProps[h]||""}),c||(l.oldCssProps={}))}de.prototype={defaults:{},set:function(l){return G(this.options,l),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(l){if(M(l,"recognizeWith",this))return this;var c=this.simultaneous;return c[(l=Ve(l,this)).id]||(c[l.id]=l,l.recognizeWith(this)),this},dropRecognizeWith:function(l){return M(l,"dropRecognizeWith",this)||(l=Ve(l,this),delete this.simultaneous[l.id]),this},requireFailure:function(l){if(M(l,"requireFailure",this))return this;var c=this.requireFail;return-1===Me(c,l=Ve(l,this))&&(c.push(l),l.requireFailure(this)),this},dropRequireFailure:function(l){if(M(l,"dropRequireFailure",this))return this;l=Ve(l,this);var c=Me(this.requireFail,l);return c>-1&&this.requireFail.splice(c,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(l){return!!this.simultaneous[l.id]},emit:function(l){var c=this,p=this.state;function h(g){c.manager.emit(g,l)}p<8&&h(c.options.event+jt(p)),h(c.options.event),l.additionalEvent&&h(l.additionalEvent),p>=8&&h(c.options.event+jt(p))},tryEmit:function(l){if(this.canEmit())return this.emit(l);this.state=32},canEmit:function(){for(var l=0;l<this.requireFail.length;){if(!(this.requireFail[l].state&(32|ot)))return!1;l++}return!0},recognize:function(l){var c=G({},l);if(!We(this.options.enable,[this,c]))return this.reset(),void(this.state=32);56&this.state&&(this.state=ot),this.state=this.process(c),30&this.state&&this.tryEmit(c)},process:function(l){},getTouchAction:function(){},reset:function(){}},U(X,de,{defaults:{pointers:1},attrTest:function(l){var c=this.options.pointers;return 0===c||l.pointers.length===c},process:function(l){var c=this.state,p=l.eventType,h=6&c,g=this.attrTest(l);return h&&(p&H||!g)?16|c:h||g?p&L?8|c:2&c?4|c:2:32}}),U(st,X,{defaults:{event:"pan",threshold:10,pointers:1,direction:Rt},getTouchAction:function(){var l=this.options.direction,c=[];return l&j&&c.push(Qe),l&B&&c.push(Je),c},directionTest:function(l){var c=this.options,p=!0,h=l.distance,g=l.direction,C=l.deltaX,y=l.deltaY;return g&c.direction||(c.direction&j?(g=0===C?q:C<0?v:A,p=C!=this.pX,h=Math.abs(l.deltaX)):(g=0===y?q:y<0?Ee:ze,p=y!=this.pY,h=Math.abs(l.deltaY))),l.direction=g,p&&h>c.threshold&&g&c.direction},attrTest:function(l){return X.prototype.attrTest.call(this,l)&&(2&this.state||!(2&this.state)&&this.directionTest(l))},emit:function(l){this.pX=l.deltaX,this.pY=l.deltaY;var c=en(l.direction);c&&(l.additionalEvent=this.options.event+c),this._super.emit.call(this,l)}}),U(bt,X,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Ce]},attrTest:function(l){return this._super.attrTest.call(this,l)&&(Math.abs(l.scale-1)>this.options.threshold||2&this.state)},emit:function(l){1!==l.scale&&(l.additionalEvent=this.options.event+(l.scale<1?"in":"out")),this._super.emit.call(this,l)}}),U(yt,de,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(l){var c=this.options,p=l.pointers.length===c.pointers,h=l.distance<c.threshold,g=l.deltaTime>c.time;if(this._input=l,!h||!p||l.eventType&(L|H)&&!g)this.reset();else if(l.eventType&Q)this.reset(),this._timer=W(function(){this.state=8,this.tryEmit()},c.time,this);else if(l.eventType&L)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(l){8===this.state&&(l&&l.eventType&L?this.manager.emit(this.options.event+"up",l):(this._input.timeStamp=w(),this.manager.emit(this.options.event,this._input)))}}),U(Tt,X,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Ce]},attrTest:function(l){return this._super.attrTest.call(this,l)&&(Math.abs(l.rotation)>this.options.threshold||2&this.state)}}),U(Mt,X,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:j|B,pointers:1},getTouchAction:function(){return st.prototype.getTouchAction.call(this)},attrTest:function(l){var p,c=this.options.direction;return c&(j|B)?p=l.overallVelocity:c&j?p=l.overallVelocityX:c&B&&(p=l.overallVelocityY),this._super.attrTest.call(this,l)&&c&l.offsetDirection&&l.distance>this.options.threshold&&l.maxPointers==this.options.pointers&&re(p)>this.options.velocity&&l.eventType&L},emit:function(l){var c=en(l.offsetDirection);c&&this.manager.emit(this.options.event+c,l),this.manager.emit(this.options.event,l)}}),U(rt,de,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[vt]},process:function(l){var c=this.options,p=l.pointers.length===c.pointers,h=l.distance<c.threshold,g=l.deltaTime<c.time;if(this.reset(),l.eventType&Q&&0===this.count)return this.failTimeout();if(h&&g&&p){if(l.eventType!=L)return this.failTimeout();var C=!this.pTime||l.timeStamp-this.pTime<c.interval,y=!this.pCenter||et(this.pCenter,l.center)<c.posThreshold;if(this.pTime=l.timeStamp,this.pCenter=l.center,y&&C?this.count+=1:this.count=1,this._input=l,0==this.count%c.taps)return this.hasRequireFailures()?(this._timer=W(function(){this.state=8,this.tryEmit()},c.interval,this),2):8}return 32},failTimeout:function(){return this._timer=W(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),xe.VERSION="2.0.7",xe.defaults={domEvents:!1,touchAction:$t,enable:!0,inputTarget:null,inputClass:null,preset:[[Tt,{enable:!1}],[bt,{enable:!1},["rotate"]],[Mt,{direction:j}],[st,{direction:j},["swipe"]],[rt],[rt,{event:"doubletap",taps:2},["tap"]],[yt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},wt.prototype={set:function(l){return G(this.options,l),l.touchAction&&this.touchAction.update(),l.inputTarget&&(this.input.destroy(),this.input.target=l.inputTarget,this.input.init()),this},stop:function(l){this.session.stopped=l?2:1},recognize:function(l){var c=this.session;if(!c.stopped){this.touchAction.preventDefaults(l);var p,h=this.recognizers,g=c.curRecognizer;(!g||g&&8&g.state)&&(g=c.curRecognizer=null);for(var C=0;C<h.length;)p=h[C],2===c.stopped||g&&p!=g&&!p.canRecognizeWith(g)?p.reset():p.recognize(l),!g&&14&p.state&&(g=c.curRecognizer=p),C++}},get:function(l){if(l instanceof de)return l;for(var c=this.recognizers,p=0;p<c.length;p++)if(c[p].options.event==l)return c[p];return null},add:function(l){if(M(l,"add",this))return this;var c=this.get(l.options.event);return c&&this.remove(c),this.recognizers.push(l),l.manager=this,this.touchAction.update(),l},remove:function(l){if(M(l,"remove",this))return this;if(l=this.get(l)){var c=this.recognizers,p=Me(c,l);-1!==p&&(c.splice(p,1),this.touchAction.update())}return this},on:function(l,c){if(l!==S&&c!==S){var p=this.handlers;return k(Ke(l),function(h){p[h]=p[h]||[],p[h].push(c)}),this}},off:function(l,c){if(l!==S){var p=this.handlers;return k(Ke(l),function(h){c?p[h]&&p[h].splice(Me(p[h],c),1):delete p[h]}),this}},emit:function(l,c){this.options.domEvents&&function An(l,c){var p=pe.createEvent("Event");p.initEvent(l,!0,!0),p.gesture=c,c.target.dispatchEvent(p)}(l,c);var p=this.handlers[l]&&this.handlers[l].slice();if(p&&p.length){c.type=l,c.preventDefault=function(){c.srcEvent.preventDefault()};for(var h=0;h<p.length;)p[h](c),h++}},destroy:function(){this.element&&tn(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},G(xe,{INPUT_START:Q,INPUT_MOVE:2,INPUT_END:L,INPUT_CANCEL:H,STATE_POSSIBLE:ot,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:q,DIRECTION_LEFT:v,DIRECTION_RIGHT:A,DIRECTION_UP:Ee,DIRECTION_DOWN:ze,DIRECTION_HORIZONTAL:j,DIRECTION_VERTICAL:B,DIRECTION_ALL:Rt,Manager:wt,Input:I,TouchAction:Ct,TouchInput:nt,MouseInput:tt,PointerEventInput:_t,TouchMouseInput:ft,SingleTouchInput:Vt,Recognizer:de,AttrRecognizer:X,Tap:rt,Pan:st,Swipe:Mt,Pinch:bt,Rotate:Tt,Press:yt,on:Le,off:Re,each:k,merge:Te,extend:Ze,assign:G,inherit:U,bindFn:ve,prefixed:ue}),(typeof e<"u"?e:typeof self<"u"?self:{}).Hammer=xe,(m=function(){return xe}.call(fe,_,fe,ht))!==S&&(ht.exports=m)}(window,document)}}]);