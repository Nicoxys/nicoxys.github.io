"use strict";(self.webpackChunkpages=self.webpackChunkpages||[]).push([[70],{7429:(Me,se,v)=>{v.d(se,{d:()=>X});var d=v(5879),e=v(6223),C=v(5661),b=v(336);let te=(()=>{class L{constructor(){this.allowedProps={$ref:{validator:this.isString},anyOf:{validator:this.validateAnyOf},default:{validator:this.isNestedOfPrimitives},definitions:null,description:null,enum:{validator:this.validateEnum},items:{child:"allProps"},maximum:null,maxItems:null,maxLength:null,minimum:null,minItems:null,minLength:null,multipleOf:null,oneOf:{validator:this.validateOneOf},properties:null,required:{validator:this.validateRequired},title:null,type:{validator:this.isNestedOfPrimitives},uniqueItems:null,widget:{child:{formlyConfig:{child:{props:{child:{placeholder:{validator:this.isString},multiple:{validator:this.isBoolean},pattern:{validator:this.isString},type:{validator:function(_){return"hidden"===_}},minLength:{validator:this.isNumber},maxLength:{validator:this.isNumber},rows:{validator:this.isNumber},keepGroupsWithoutId:{validator:this.isBoolean},fieldsetTemplate:{validator:this.isBoolean}}},type:{validator:function(_){return"radio"===_}}}}}}},this.fieldListKeys=["properties","definitions"]}validateSchema(_){this.isObject(_)&&((!_.hasOwnProperty("type")||!_.hasOwnProperty("properties")||"object"!==_.type)&&(_.type="object",_.properties={}),this.validate(_))}validate(_,p){p||(p=this.allowedProps);for(const[F,x]of Object.entries(_))if(p.hasOwnProperty(F)){if(p[F]?.hasOwnProperty("validator"))p[F].validator.call(this,x)||delete _[F];else if(this.fieldListKeys.includes(F))for(const T of Object.keys(_[F]))this.validate(_[F][T]);else if(!this.isPrimitive(x)){if(!p[F]?.hasOwnProperty("child")||!this.isObject(x)){delete _[F];continue}this.validate(_[F],"allProps"===p[F].child?this.allowedProps:p[F].child)}}else delete _[F]}isObject(_){return null!=_&&"object"==typeof _&&!Array.isArray(_)}isPrimitive(_){return this.isString(_)||this.isNumber(_)||this.isBoolean(_)||null==_}isString(_){return"string"==typeof _}isBoolean(_){return"boolean"==typeof _}isNumber(_){return"number"==typeof _}validateRequired(_){if(!Array.isArray(_))return!1;for(const p of _)if(!this.isString(p))return!1;return!0}validateEnum(_){if(!Array.isArray(_))return!1;for(const p of _)if(!this.isString(p)&&!this.isNumber(p))return!1;return!0}validateOneOf(_){if(Array.isArray(_)&&_[0]?.hasOwnProperty("const")){for(const p of _){if(!this.isObject(p))return!1;this.validate(p,{const:null,title:null})}return!0}return this.validateAnyOf(_)}validateAnyOf(_){if(!Array.isArray(_))return!1;for(const p of _){if(!this.isObject(p))return!1;this.validate(p)}return!0}isNestedOfPrimitives(_){if(this.isPrimitive(_))return!0;if(Array.isArray(_)||this.isObject(_)){for(const p of Object.values(_))if(!this.isNestedOfPrimitives(p))return!1;return!0}return!1}}return L.\u0275fac=function(_){return new(_||L)},L.\u0275prov=d.Yz7({token:L,factory:L.\u0275fac,providedIn:"root"}),L})();var Z=v(5545);const W=["app-custom-form",""],ne=[[["","buttons",""]]],K=["[buttons]"];let X=(()=>{class L{constructor(_,p,F){this.formlyJsonschema=_,this.customFormSchemaService=p,this.toastService=F,this.model={},this.validateSchema=!1,this.enableModelChangeEvent=!1,this.defaultModel={},this.cancelEvent=new d.vpe,this.submitEvent=new d.vpe,this.validityChangeEvent=new d.vpe,this.modelChangeEvent=new d.vpe,this.form=new e.nJ({}),this.fields=[],this.options={},this.isFormCurrentlyValid=!0}ngOnInit(){this.createFields()}ngOnChanges(_){_.schema&&!_.schema.firstChange&&this.createFields()}createFields(){this.customFormSchemaService.isObject(this.schema)||(this.schema={}),this.validateSchema&&this.customFormSchemaService.validateSchema(this.schema),this.fields=[this.formlyJsonschema.toFieldConfig(this.schema)]}showFieldValidation(){this.cycleFields(this.fields)}showFieldValidationWithMessage(){this.showFieldValidation(),this.toastService.show({content:"Tutti i campi sono stati <strong>validati</strong>: quelli con errore sono evidenziati da un <strong>bordo rosso</strong>!"})}cycleFields(_){_.forEach(p=>{this.forceValidation(p),p.fieldGroup&&this.cycleFields(p.fieldGroup)})}forceValidation(_){_.validation||(_.validation={}),_.validation.show=!0}reset(){this.options.resetModel&&this.options.resetModel(this.defaultModel)}cancel(){this.cancelEvent.emit()}submit(){this.form.valid&&(this.log(),this.submitEvent.emit(this.model))}onModelChange(_){this.enableModelChangeEvent&&this.modelChangeEvent.emit(_||{}),this.form.valid!==this.isFormCurrentlyValid&&this.validityChangeEvent.emit(this.isFormCurrentlyValid=this.form.valid)}log(){}}return L.\u0275fac=function(_){return new(_||L)(d.Y36(b.c),d.Y36(te),d.Y36(C.k))},L.\u0275cmp=d.Xpm({type:L,selectors:[["","app-custom-form",""]],inputs:{schema:"schema",model:"model",validateSchema:"validateSchema",enableModelChangeEvent:"enableModelChangeEvent",defaultModel:"defaultModel"},outputs:{cancelEvent:"cancelEvent",submitEvent:"submitEvent",validityChangeEvent:"validityChangeEvent",modelChangeEvent:"modelChangeEvent"},features:[d.TTD],attrs:W,ngContentSelectors:K,decls:3,vars:5,consts:[[3,"formGroup","ngSubmit"],[3,"model","fields","form","options","modelChange"]],template:function(_,p){1&_&&(d.F$t(ne),d.TgZ(0,"form",0),d.NdJ("ngSubmit",function(){return p.submit()}),d.TgZ(1,"formly-form",1),d.NdJ("modelChange",function(x){return p.onModelChange(x)}),d.qZA(),d.Hsn(2),d.qZA()),2&_&&(d.Q6J("formGroup",p.form),d.xp6(1),d.Q6J("model",p.model)("fields",p.fields)("form",p.form)("options",p.options))},dependencies:[Z.T7,e._Y,e.JL,e.sg]}),L})()},337:(Me,se,v)=>{v.d(se,{I:()=>go});var d=v(6814),e=v(5879),C=v(5545),b=v(6223);function te(n,s){1&n&&(e.TgZ(0,"span",9),e._uU(1,"*"),e.qZA())}function Z(n,s){if(1&n&&(e.TgZ(0,"label",7),e._uU(1),e.YNc(2,te,2,0,"span",8),e.qZA()),2&n){const t=e.oxw(2);e.uIk("for",t.id),e.xp6(1),e.hij(" ",t.props.label," "),e.xp6(1),e.Q6J("ngIf",t.props.required&&!0!==t.props.hideRequiredMarker)}}function W(n,s){if(1&n&&e.YNc(0,Z,3,3,"label",6),2&n){const t=e.oxw();e.Q6J("ngIf",t.props.label&&!0!==t.props.hideLabel)}}function ne(n,s){if(1&n&&(e.ynx(0),e.GkF(1,10),e.BQk()),2&n){e.oxw();const t=e.MAs(1);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function K(n,s){}function X(n,s){if(1&n&&(e.ynx(0),e.GkF(1,10),e.BQk()),2&n){e.oxw();const t=e.MAs(1);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function L(n,s){if(1&n&&(e.TgZ(0,"div",11),e._UZ(1,"formly-validation-message",12),e.qZA()),2&n){const t=e.oxw();e.Udp("display","block"),e.xp6(1),e.Q6J("field",t.field)}}function M(n,s){if(1&n&&(e.TgZ(0,"small",13),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.props.description)}}const _=["fieldTypeTemplate"];let p=(()=>{class n extends C.n2{}return n.\u0275fac=function(){let s;return function(a){return(s||(s=e.n5z(n)))(a||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["formly-wrapper-form-field"]],features:[e.qOj],decls:9,vars:8,consts:[["labelTemplate",""],[1,"mb-3"],[4,"ngIf"],["fieldComponent",""],["class","invalid-feedback",3,"display",4,"ngIf"],["class","form-text text-muted",4,"ngIf"],["class","form-label",4,"ngIf"],[1,"form-label"],["aria-hidden","true",4,"ngIf"],["aria-hidden","true"],[3,"ngTemplateOutlet"],[1,"invalid-feedback"],[3,"field"],[1,"form-text","text-muted"]],template:function(t,a){1&t&&(e.YNc(0,W,1,1,"ng-template",null,0,e.W1O),e.TgZ(2,"div",1),e.YNc(3,ne,2,1,"ng-container",2),e.YNc(4,K,0,0,"ng-template",null,3,e.W1O),e.YNc(6,X,2,1,"ng-container",2),e.YNc(7,L,2,3,"div",4),e.YNc(8,M,2,1,"small",5),e.qZA()),2&t&&(e.xp6(2),e.ekj("form-floating","floating"===a.props.labelPosition)("has-error",a.showError),e.xp6(1),e.Q6J("ngIf","floating"!==a.props.labelPosition),e.xp6(3),e.Q6J("ngIf","floating"===a.props.labelPosition),e.xp6(1),e.Q6J("ngIf",a.showError),e.xp6(1),e.Q6J("ngIf",a.props.description))},dependencies:[C.M2,d.O5,d.tP],encapsulation:2}),n})(),F=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.ez,b.UX,C.X0.forChild({wrappers:[{name:"form-field",component:p}]})]]}),n})(),x=(()=>{class n extends C.fS{constructor(t){super(),this.hostContainerRef=t}set content(t){t&&this.hostContainerRef&&this.hostContainerRef.createEmbeddedView(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.s_b,8))},n.\u0275dir=e.lG2({type:n,viewQuery:function(t,a){if(1&t&&e.Gf(_,7),2&t){let f;e.iGM(f=e.CRH())&&(a.content=f.first)}},features:[e.qOj]}),n})();function T(n,s){if(1&n&&e._UZ(0,"input",3),2&n){const t=e.oxw(2);e.ekj("is-invalid",t.showError),e.Q6J("type",t.type)("formControl",t.formControl)("formlyAttributes",t.field)}}function h(n,s){if(1&n&&e._UZ(0,"input",4),2&n){const t=e.oxw(2);e.ekj("is-invalid",t.showError),e.Q6J("formControl",t.formControl)("formlyAttributes",t.field)}}function y(n,s){if(1&n&&(e.YNc(0,T,1,5,"input",1),e.YNc(1,h,1,4,"ng-template",null,2,e.W1O)),2&n){const t=e.MAs(2),a=e.oxw();e.Q6J("ngIf","number"!==a.type)("ngIfElse",t)}}let k=(()=>{class n extends x{get type(){return this.props.type||"text"}}return n.\u0275fac=function(){let s;return function(a){return(s||(s=e.n5z(n)))(a||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["formly-field-input"]],features:[e.qOj],decls:2,vars:0,consts:[["fieldTypeTemplate",""],["class","form-control",3,"type","formControl","formlyAttributes","is-invalid",4,"ngIf","ngIfElse"],["numberTmp",""],[1,"form-control",3,"type","formControl","formlyAttributes"],["type","number",1,"form-control",3,"formControl","formlyAttributes"]],template:function(t,a){1&t&&e.YNc(0,y,3,2,"ng-template",null,0,e.W1O)},dependencies:[d.O5,b.Fj,b.JJ,b.oH,C.JD,b.wV],encapsulation:2,changeDetection:0}),n})(),E=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.ez,b.UX,F,C.X0.forChild({types:[{name:"input",component:k,wrappers:["form-field"]},{name:"string",extends:"input"},{name:"number",extends:"input",defaultOptions:{props:{type:"number"}}},{name:"integer",extends:"input",defaultOptions:{props:{type:"number"}}}]})]]}),n})();function P(n,s){if(1&n&&(e.TgZ(0,"textarea",1),e._uU(1,"      "),e.qZA()),2&n){const t=e.oxw();e.ekj("is-invalid",t.showError),e.Q6J("formControl",t.formControl)("cols",t.props.cols)("rows",t.props.rows)("formlyAttributes",t.field)}}let I=(()=>{class n extends x{constructor(){super(...arguments),this.defaultOptions={props:{cols:1,rows:1}}}}return n.\u0275fac=function(){let s;return function(a){return(s||(s=e.n5z(n)))(a||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["formly-field-textarea"]],features:[e.qOj],decls:2,vars:0,consts:[["fieldTypeTemplate",""],[1,"form-control",3,"formControl","cols","rows","formlyAttributes"]],template:function(t,a){1&t&&e.YNc(0,P,2,6,"ng-template",null,0,e.W1O)},dependencies:[b.Fj,b.JJ,b.oH,C.JD],encapsulation:2,changeDetection:0}),n})(),U=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.ez,b.UX,F,C.X0.forChild({types:[{name:"textarea",component:I,wrappers:["form-field"]}]})]]}),n})();var w=v(5592),D=v(5619),B=v(7398),V=v(2181),oe=v(9397);let H=(()=>{class n{transform(t,a){return t instanceof w.y?this.dispose():t=this.observableOf(t,a),t.pipe((0,B.U)(f=>this.transformOptions(f,a)))}ngOnDestroy(){this.dispose()}transformOptions(t,a){const f=this.transformSelectProps(a),O=[],J={};return t?.forEach(q=>{const Y=this.transformOption(q,f);if(Y.group){const de=J[Y.label];void 0===de?J[Y.label]=O.push(Y)-1:Y.group.forEach(Te=>O[de].group.push(Te))}else O.push(Y)}),O}transformOption(t,a){const f=a.groupProp(t);return Array.isArray(f)?{label:a.labelProp(t),group:f.map(O=>this.transformOption(O,a))}:(t={label:a.labelProp(t),value:a.valueProp(t),disabled:!!a.disabledProp(t)},f?{label:f,group:[t]}:t)}transformSelectProps(t){const a=t?.props||t?.templateOptions||{},f=O=>"function"==typeof O?O:J=>J[O];return{groupProp:f(a.groupProp||"group"),labelProp:f(a.labelProp||"label"),valueProp:f(a.valueProp||"value"),disabledProp:f(a.disabledProp||"disabled")}}dispose(){this._options&&(this._options.complete(),this._options=null),this._subscription&&(this._subscription.unsubscribe(),this._subscription=null)}observableOf(t,a){return this.dispose(),a&&a.options&&a.options.fieldChanges&&(this._subscription=a.options.fieldChanges.pipe((0,V.h)(({property:f,type:O,field:J})=>"expressionChanges"===O&&(0===f.indexOf("templateOptions.options")||0===f.indexOf("props.options"))&&J===a&&Array.isArray(J.props.options)&&!!this._options),(0,oe.b)(()=>this._options.next(a.props.options))).subscribe()),this._options=new D.X(t),this._options.asObservable()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=e.Yjl({name:"formlySelectOptions",type:n,pure:!0}),n})(),$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({}),n})();function z(n,s){if(1&n&&(e.TgZ(0,"div",2),e._UZ(1,"input",3),e.TgZ(2,"label",4),e._uU(3),e.qZA()()),2&n){const t=s.$implicit,a=s.index,f=e.oxw(2);e.ekj("form-check-inline","inline"===f.props.formCheck),e.xp6(1),e.ekj("is-invalid",f.showError),e.Q6J("id",f.id+"_"+a)("name",f.field.name||f.id)("value",t.value)("formControl",t.disabled?f.disabledControl:f.formControl)("formlyAttributes",f.field),e.uIk("value",t.value),e.xp6(1),e.Q6J("for",f.id+"_"+a),e.xp6(1),e.hij(" ",t.label," ")}}function ue(n,s){if(1&n&&(e.YNc(0,z,4,12,"div",1),e.ALo(1,"async"),e.ALo(2,"formlySelectOptions")),2&n){const t=e.oxw();e.Q6J("ngForOf",e.lcZ(1,1,e.xi3(2,3,t.props.options,t.field)))}}let Ee=(()=>{class n extends x{constructor(){super(...arguments),this.defaultOptions={props:{formCheck:"default"}}}get disabledControl(){return new b.NI({value:this.formControl.value,disabled:!0})}}return n.\u0275fac=function(){let s;return function(a){return(s||(s=e.n5z(n)))(a||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["formly-field-radio"]],features:[e.qOj],decls:2,vars:0,consts:[["fieldTypeTemplate",""],["class","form-check",3,"form-check-inline",4,"ngFor","ngForOf"],[1,"form-check"],["type","radio",1,"form-check-input",3,"id","name","value","formControl","formlyAttributes"],[1,"form-check-label",3,"for"]],template:function(t,a){1&t&&e.YNc(0,ue,3,6,"ng-template",null,0,e.W1O)},dependencies:[d.sg,b._,b.Fj,b.JJ,b.oH,C.JD,d.Ov,H],encapsulation:2,changeDetection:0}),n})(),me=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.ez,b.UX,F,$,C.X0.forChild({types:[{name:"radio",component:Ee,wrappers:["form-field"]}]})]]}),n})();function we(n,s){1&n&&(e.TgZ(0,"span",6),e._uU(1,"*"),e.qZA())}function G(n,s){if(1&n&&(e.TgZ(0,"label",4),e._uU(1),e.YNc(2,we,2,0,"span",5),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("for",t.id),e.xp6(1),e.hij(" ",t.props.label," "),e.xp6(1),e.Q6J("ngIf",t.props.required&&!0!==t.props.hideRequiredMarker)}}const Ae=function(n,s){return{"form-check-inline":n,"form-switch":s}};function N(n,s){if(1&n&&(e.TgZ(0,"div",1),e._UZ(1,"input",2),e.YNc(2,G,3,3,"label",3),e.qZA()),2&n){const t=e.oxw();e.Q6J("ngClass",e.WLB(9,Ae,"inline"===t.props.formCheck||"inline-switch"===t.props.formCheck,"switch"===t.props.formCheck||"inline-switch"===t.props.formCheck)),e.xp6(1),e.ekj("is-invalid",t.showError)("position-static","nolabel"===t.props.formCheck),e.Q6J("indeterminate",t.props.indeterminate&&null==t.formControl.value)("formControl",t.formControl)("formlyAttributes",t.field),e.xp6(1),e.Q6J("ngIf","nolabel"!==t.props.formCheck)}}let Q=(()=>{class n extends x{constructor(){super(...arguments),this.defaultOptions={props:{indeterminate:!0,hideLabel:!0,formCheck:"default"}}}}return n.\u0275fac=function(){let s;return function(a){return(s||(s=e.n5z(n)))(a||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["formly-field-checkbox"]],features:[e.qOj],decls:2,vars:0,consts:[["fieldTypeTemplate",""],[1,"form-check",3,"ngClass"],["type","checkbox",1,"form-check-input",3,"indeterminate","formControl","formlyAttributes"],["class","form-check-label",3,"for",4,"ngIf"],[1,"form-check-label",3,"for"],["aria-hidden","true",4,"ngIf"],["aria-hidden","true"]],template:function(t,a){1&t&&e.YNc(0,N,3,12,"ng-template",null,0,e.W1O)},dependencies:[d.mk,b.Wl,b.JJ,b.oH,C.JD,d.O5],encapsulation:2,changeDetection:0}),n})(),he=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.ez,b.UX,F,C.X0.forChild({types:[{name:"checkbox",component:Q,wrappers:["form-field"]},{name:"boolean",extends:"checkbox"}]})]]}),n})();const j=function(n,s){return{"form-check-inline":n,"form-switch":s}};function xe(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",2)(1,"input",3),e.NdJ("change",function(f){const J=e.CHM(t).$implicit,q=e.oxw(2);return e.KtG(q.onChange(J.value,f.target.checked))}),e.qZA(),e.TgZ(2,"label",4),e._uU(3),e.qZA()()}if(2&n){const t=s.$implicit,a=s.index,f=e.oxw(2);e.Q6J("ngClass",e.WLB(8,j,"inline"===f.props.formCheck||"inline-switch"===f.props.formCheck,"switch"===f.props.formCheck||"inline-switch"===f.props.formCheck)),e.xp6(1),e.Q6J("id",f.id+"_"+a)("value",t.value)("checked",f.isChecked(t))("formlyAttributes",f.field)("disabled",f.formControl.disabled||t.disabled),e.xp6(1),e.Q6J("for",f.id+"_"+a),e.xp6(1),e.hij(" ",t.label," ")}}function ve(n,s){if(1&n&&(e.YNc(0,xe,4,11,"div",1),e.ALo(1,"async"),e.ALo(2,"formlySelectOptions")),2&n){const t=e.oxw();e.Q6J("ngForOf",e.lcZ(1,1,e.xi3(2,3,t.props.options,t.field)))}}let le=(()=>{class n extends x{constructor(){super(...arguments),this.defaultOptions={props:{formCheck:"default"}}}onChange(t,a){this.formControl.markAsDirty(),this.formControl.patchValue("array"===this.props.type?a?[...this.formControl.value||[],t]:[...this.formControl.value||[]].filter(f=>f!==t):{...this.formControl.value,[t]:a}),this.formControl.markAsTouched()}isChecked(t){const a=this.formControl.value;return a&&("array"===this.props.type?-1!==a.indexOf(t.value):a[t.value])}}return n.\u0275fac=function(){let s;return function(a){return(s||(s=e.n5z(n)))(a||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["formly-field-multicheckbox"]],features:[e.qOj],decls:2,vars:0,consts:[["fieldTypeTemplate",""],["class","form-check",3,"ngClass",4,"ngFor","ngForOf"],[1,"form-check",3,"ngClass"],["type","checkbox",1,"form-check-input",3,"id","value","checked","formlyAttributes","disabled","change"],[1,"form-check-label",3,"for"]],template:function(t,a){1&t&&e.YNc(0,ve,3,6,"ng-template",null,0,e.W1O)},dependencies:[d.sg,d.mk,C.JD,d.Ov,H],encapsulation:2,changeDetection:0}),n})(),ee=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.ez,b.UX,F,$,C.X0.forChild({types:[{name:"multicheckbox",component:le,wrappers:["form-field"]}]})]]}),n})();var ae=v(8180);function ge(n,s){if(1&n&&(e.TgZ(0,"option",8),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.Q6J("ngValue",t.value)("disabled",t.disabled),e.xp6(1),e.hij(" ",t.label," ")}}function be(n,s){if(1&n&&(e.TgZ(0,"option",8),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("ngValue",t.value)("disabled",t.disabled),e.xp6(1),e.hij(" ",t.label," ")}}function _e(n,s){if(1&n&&(e.TgZ(0,"optgroup",9),e.YNc(1,be,2,3,"option",10),e.qZA()),2&n){const t=e.oxw().$implicit;e.Q6J("label",t.label),e.xp6(1),e.Q6J("ngForOf",t.group)}}function ce(n,s){if(1&n&&(e.ynx(0),e.YNc(1,ge,2,3,"option",6),e.YNc(2,_e,2,2,"ng-template",null,7,e.W1O),e.BQk()),2&n){const t=s.$implicit,a=e.MAs(3);e.xp6(1),e.Q6J("ngIf",!t.group)("ngIfElse",a)}}function Ce(n,s){if(1&n&&(e.ynx(0),e.YNc(1,ce,4,2,"ng-container",5),e.BQk()),2&n){const t=s.ngIf;e.xp6(1),e.Q6J("ngForOf",t)}}function ke(n,s){if(1&n&&(e.TgZ(0,"select",3),e.YNc(1,Ce,2,1,"ng-container",4),e.ALo(2,"async"),e.ALo(3,"formlySelectOptions"),e.qZA()),2&n){const t=e.oxw(2);e.ekj("is-invalid",t.showError),e.Q6J("formControl",t.formControl)("compareWith",t.props.compareWith)("formlyAttributes",t.field),e.xp6(1),e.Q6J("ngIf",e.lcZ(2,6,e.xi3(3,8,t.props.options,t.field)))}}function ye(n,s){if(1&n&&(e.TgZ(0,"option",13),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);e.Q6J("ngValue",void 0),e.xp6(1),e.Oqu(t.props.placeholder)}}function Fe(n,s){if(1&n&&(e.TgZ(0,"option",8),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.Q6J("ngValue",t.value)("disabled",t.disabled),e.xp6(1),e.hij(" ",t.label," ")}}function De(n,s){if(1&n&&(e.TgZ(0,"option",8),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("ngValue",t.value)("disabled",t.disabled),e.xp6(1),e.hij(" ",t.label," ")}}function Ie(n,s){if(1&n&&(e.TgZ(0,"optgroup",9),e.YNc(1,De,2,3,"option",10),e.qZA()),2&n){const t=e.oxw().$implicit;e.Q6J("label",t.label),e.xp6(1),e.Q6J("ngForOf",t.group)}}function pe(n,s){if(1&n&&(e.ynx(0),e.YNc(1,Fe,2,3,"option",6),e.YNc(2,Ie,2,2,"ng-template",null,7,e.W1O),e.BQk()),2&n){const t=s.$implicit,a=e.MAs(3);e.xp6(1),e.Q6J("ngIf",!t.group)("ngIfElse",a)}}function Je(n,s){if(1&n&&(e.ynx(0),e.YNc(1,pe,4,2,"ng-container",5),e.BQk()),2&n){const t=s.ngIf;e.xp6(1),e.Q6J("ngForOf",t)}}function Pe(n,s){if(1&n&&(e.TgZ(0,"select",11),e.YNc(1,ye,2,2,"option",12),e.YNc(2,Je,2,1,"ng-container",4),e.ALo(3,"async"),e.ALo(4,"formlySelectOptions"),e.qZA()),2&n){const t=e.oxw(2);e.ekj("is-invalid",t.showError),e.Q6J("formControl",t.formControl)("compareWith",t.props.compareWith)("formlyAttributes",t.field),e.xp6(1),e.Q6J("ngIf",t.props.placeholder),e.xp6(1),e.Q6J("ngIf",e.lcZ(3,7,e.xi3(4,9,t.props.options,t.field)))}}function Se(n,s){if(1&n&&(e.YNc(0,ke,4,11,"select",1),e.YNc(1,Pe,5,12,"ng-template",null,2,e.W1O)),2&n){const t=e.MAs(2),a=e.oxw();e.Q6J("ngIf",a.props.multiple)("ngIfElse",t)}}let Qe=(()=>{class n extends x{constructor(t,a){super(a),this.ngZone=t,this.defaultOptions={props:{compareWith:(f,O)=>f===O}}}set selectAccessor(t){if(!t)return;const a=t.writeValue.bind(t);null===t._getOptionId(t.value)&&a(t.value),t.writeValue=f=>{const O=t._idCounter;a(f),null===f&&this.ngZone.onStable.asObservable().pipe((0,ae.q)(1)).subscribe(()=>{O!==t._idCounter&&null===t._getOptionId(f)&&-1!==t._elementRef.nativeElement.selectedIndex&&a(f)})}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.R0b),e.Y36(e.s_b))},n.\u0275cmp=e.Xpm({type:n,selectors:[["formly-field-select"]],viewQuery:function(t,a){if(1&t&&e.Gf(b.EJ,5),2&t){let f;e.iGM(f=e.CRH())&&(a.selectAccessor=f.first)}},features:[e.qOj],decls:2,vars:0,consts:[["fieldTypeTemplate",""],["class","form-select","multiple","",3,"formControl","compareWith","is-invalid","formlyAttributes",4,"ngIf","ngIfElse"],["singleSelect",""],["multiple","",1,"form-select",3,"formControl","compareWith","formlyAttributes"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"ngValue","disabled",4,"ngIf","ngIfElse"],["optgroup",""],[3,"ngValue","disabled"],[3,"label"],[3,"ngValue","disabled",4,"ngFor","ngForOf"],[1,"form-select",3,"formControl","compareWith","formlyAttributes"],[3,"ngValue",4,"ngIf"],[3,"ngValue"]],template:function(t,a){1&t&&e.YNc(0,Se,3,2,"ng-template",null,0,e.W1O)},dependencies:[d.O5,b.K7,b.JJ,b.oH,C.JD,d.sg,b.YN,b.Kr,b.EJ,d.Ov,H],encapsulation:2,changeDetection:0}),n})(),Ze=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.ez,b.UX,F,$,C.X0.forChild({types:[{name:"select",component:Qe,wrappers:["form-field"]},{name:"enum",extends:"select"}]})]]}),n})();const Le=["fieldTypeTemplate"];function Ue(n,s){if(1&n&&e._UZ(0,"i",7),2&n){const t=e.oxw(3);e.Q6J("ngClass",t.props.addonLeft.class)}}function je(n,s){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Oqu(t.props.addonLeft.text)}}function Re(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",4),e.NdJ("click",function(f){e.CHM(t);const O=e.oxw(2);return e.KtG(O.addonLeftClick(f))}),e.YNc(1,Ue,1,1,"i",5),e.YNc(2,je,2,1,"span",6),e.qZA()}if(2&n){const t=e.oxw(2);e.ekj("input-group-btn",t.props.addonLeft.onClick),e.xp6(1),e.Q6J("ngIf",t.props.addonLeft.class),e.xp6(1),e.Q6J("ngIf",t.props.addonLeft.text)}}function Ve(n,s){if(1&n&&e._UZ(0,"i",7),2&n){const t=e.oxw(3);e.Q6J("ngClass",t.props.addonRight.class)}}function Ne(n,s){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Oqu(t.props.addonRight.text)}}function Oe(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",4),e.NdJ("click",function(f){e.CHM(t);const O=e.oxw(2);return e.KtG(O.addonRightClick(f))}),e.YNc(1,Ve,1,1,"i",5),e.YNc(2,Ne,2,1,"span",6),e.qZA()}if(2&n){const t=e.oxw(2);e.ekj("input-group-btn",t.props.addonRight.onClick),e.xp6(1),e.Q6J("ngIf",t.props.addonRight.class),e.xp6(1),e.Q6J("ngIf",t.props.addonRight.text)}}function Ye(n,s){if(1&n&&(e.TgZ(0,"div",1),e.YNc(1,Re,3,4,"div",2),e.GkF(2,null,3),e.YNc(4,Oe,3,4,"div",2),e.qZA()),2&n){const t=e.oxw();e.ekj("has-validation",t.showError),e.xp6(1),e.Q6J("ngIf",t.props.addonLeft),e.xp6(3),e.Q6J("ngIf",t.props.addonRight)}}let c=(()=>{class n extends C.n2{constructor(t){super(),this.hostContainerRef=t}set content(t){t&&this.hostContainerRef&&this.hostContainerRef.createEmbeddedView(t)}addonRightClick(t){this.props.addonRight.onClick?.(this.field,t)}addonLeftClick(t){this.props.addonLeft.onClick?.(this.field,t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.s_b))},n.\u0275cmp=e.Xpm({type:n,selectors:[["formly-wrapper-addons"]],viewQuery:function(t,a){if(1&t&&e.Gf(Le,7),2&t){let f;e.iGM(f=e.CRH())&&(a.content=f.first)}},features:[e.qOj],decls:2,vars:0,consts:[["fieldTypeTemplate",""],[1,"input-group"],["class","input-group-text",3,"input-group-btn","click",4,"ngIf"],["fieldComponent",""],[1,"input-group-text",3,"click"],[3,"ngClass",4,"ngIf"],[4,"ngIf"],[3,"ngClass"]],template:function(t,a){1&t&&e.YNc(0,Ye,5,4,"ng-template",null,0,e.W1O)},dependencies:[d.O5,d.mk],styles:["formly-wrapper-form-field .input-group-btn{cursor:pointer}\n"],encapsulation:2}),n})();function r(n){!n.props||n.wrappers&&-1!==n.wrappers.indexOf("addons")||(n.props.addonLeft||n.props.addonRight)&&(n.wrappers=[...n.wrappers||[],"addons"])}let o=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.ez,b.UX,C.X0.forChild({wrappers:[{name:"addons",component:c}],extensions:[{name:"addons",extension:{postPopulate:r}}]})]]}),n})(),i=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[F,E,U,me,he,ee,Ze,o]]}),n})();var l=v(6593);let u=(()=>{class n{constructor(t){this.domSanitizer=t,this.validBBCodes=[{regstring:"\\[b](.+?)\\[/b]",replacement:"<strong>$1</strong>"},{regstring:"\\[i](.+?)\\[/i]",replacement:"<em>$1</em>"},{regstring:"\\[u](.+?)\\[/u]",replacement:"<u>$1</u>"},{regstring:"\\[ul](.+?)\\[/ul]",replacement:"<ul>$1</ul>"},{regstring:"\\[ol](.+?)\\[/ol]",replacement:"<ol>$1</ol>"},{regstring:"\\[li](.+?)\\[/li]",replacement:"<li>$1</li>"},{regstring:"\\[br]",replacement:"<br>"}];for(const a of this.validBBCodes)a.regexp=new RegExp(a.regstring,"gim")}parseBBCode(t){t=t.replace(/</gi,"&lt;").replace(/>/gi,"&gt;"),t=this.domSanitizer.sanitize(e.q3G.HTML,t)||"";for(const a of this.validBBCodes)t=t.replace(a.regexp,a.replacement);return t}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(l.H7))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function m(n,s){1&n&&e.GkF(0)}const g=function(n,s){return{$implicit:n,props:s}};function A(n,s){if(1&n&&(e.ynx(0),e.YNc(1,m,1,0,"ng-container",8),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngTemplateOutlet",t.customLabelTemplate)("ngTemplateOutletContext",e.WLB(2,g,t.id,t.props))}}function R(n,s){1&n&&(e.TgZ(0,"span",11),e._uU(1," *"),e.qZA())}function S(n,s){if(1&n&&(e.TgZ(0,"div"),e._UZ(1,"label",9),e.YNc(2,R,2,0,"span",10),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("innerHTML",t.parsedLabel,e.oJD),e.uIk("for",t.id),e.xp6(1),e.Q6J("ngIf",t.props.required&&!0!==t.props.hideRequiredMarker)}}function re(n,s){if(1&n&&e.YNc(0,S,3,3,"div",2),2&n){const t=e.oxw(2);e.Q6J("ngIf",t.props.label&&!0!==t.props.hideLabel)}}function ie(n,s){if(1&n&&(e.YNc(0,A,2,5,"ng-container",6),e.YNc(1,re,1,1,"ng-template",null,7,e.W1O)),2&n){const t=e.MAs(2),a=e.oxw();e.Q6J("ngIf",a.hasCustomLabelTemplate)("ngIfElse",t)}}function Ke(n,s){if(1&n&&(e.ynx(0),e.GkF(1,12),e.BQk()),2&n){e.oxw();const t=e.MAs(1);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function Xe(n,s){}function ze(n,s){if(1&n&&(e.ynx(0),e.GkF(1,12),e.BQk()),2&n){e.oxw();const t=e.MAs(1);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function et(n,s){if(1&n&&(e.TgZ(0,"div",13),e._UZ(1,"formly-validation-message",14),e.qZA()),2&n){const t=e.oxw();e.Udp("display","block"),e.xp6(1),e.Q6J("field",t.field)}}function tt(n,s){if(1&n&&e._UZ(0,"div",15),2&n){const t=e.oxw();e.Q6J("innerHTML",t.parsedDescription,e.oJD)}}let nt=(()=>{class n extends C.n2{constructor(t){super(),this.customFormUtilsService=t,this.hasCustomLabelTemplate=!1,this.parsedDescription="",this.parsedLabel=""}ngOnInit(){this.hasCustomLabelTemplate=!(!this.props.customLabelTemplate||!this.props.customLabelTemplate.elementRef),this.parsedDescription=this.props.description?this.customFormUtilsService.parseBBCode(this.props.description):"",this.parsedLabel=!this.hasCustomLabelTemplate&&this.props.label?this.customFormUtilsService.parseBBCode(this.props.label):""}get customLabelTemplate(){return this.props.customLabelTemplate}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u))},n.\u0275cmp=e.Xpm({type:n,selectors:[["formly-custom-wrapper-form-field"]],features:[e.qOj],decls:9,vars:8,consts:[["labelTemplate",""],[1,"mb-3"],[4,"ngIf"],["fieldComponent",""],["class","invalid-feedback",3,"display",4,"ngIf"],["class","form-text text-muted",3,"innerHTML",4,"ngIf"],[4,"ngIf","ngIfElse"],["stringLabel",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"form-label",3,"innerHTML"],["aria-hidden","true",4,"ngIf"],["aria-hidden","true"],[3,"ngTemplateOutlet"],[1,"invalid-feedback"],[3,"field"],[1,"form-text","text-muted",3,"innerHTML"]],template:function(t,a){1&t&&(e.YNc(0,ie,3,2,"ng-template",null,0,e.W1O),e.TgZ(2,"div",1),e.YNc(3,Ke,2,1,"ng-container",2),e.YNc(4,Xe,0,0,"ng-template",null,3,e.W1O),e.YNc(6,ze,2,1,"ng-container",2),e.YNc(7,et,2,3,"div",4),e.YNc(8,tt,1,1,"div",5),e.qZA()),2&t&&(e.xp6(2),e.ekj("form-floating","floating"===a.props.labelPosition)("has-error",a.showError),e.xp6(1),e.Q6J("ngIf","floating"!==a.props.labelPosition),e.xp6(3),e.Q6J("ngIf","floating"===a.props.labelPosition),e.xp6(1),e.Q6J("ngIf",a.showError),e.xp6(1),e.Q6J("ngIf",a.parsedDescription))},dependencies:[d.O5,d.tP,C.M2],encapsulation:2}),n})();var Be=v(8595);function ot(n,s){1&n&&e.GkF(0)}function rt(n,s){if(1&n&&(e.ynx(0),e._UZ(1,"div",13),e.TgZ(2,"div",14),e._uU(3,"("),e.YNc(4,ot,1,0,"ng-container",15),e._uU(5,")"),e.qZA(),e.BQk()),2&n){const t=e.oxw(),a=e.MAs(15);e.xp6(1),e.Q6J("innerHTML",t.parsedTitle,e.oJD),e.xp6(3),e.Q6J("ngTemplateOutlet",a)}}function it(n,s){1&n&&e.GkF(0)}function st(n,s){if(1&n&&(e.TgZ(0,"div",16),e._uU(1," Lista di "),e.YNc(2,it,1,0,"ng-container",15),e.qZA()),2&n){e.oxw();const t=e.MAs(15);e.xp6(2),e.Q6J("ngTemplateOutlet",t)}}function lt(n,s){if(1&n&&e._UZ(0,"div",17),2&n){const t=e.oxw();e.Q6J("innerHTML",t.parsedDescription,e.oJD)}}const at=function(n){return{"mt-3":n}};function ct(n,s){if(1&n&&(e.TgZ(0,"div",18),e._UZ(1,"formly-validation-message",19),e.qZA()),2&n){const t=e.oxw();e.Q6J("ngClass",e.VKq(2,at,t.parsedDescription.length)),e.xp6(1),e.Q6J("field",t.field)}}function pt(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"div",30),e.NdJ("click",function(){e.CHM(t);const f=e.oxw().index,O=e.oxw(2);return e.KtG(O.move(f,f-1))}),e._uU(2,"arrow_circle_up"),e.qZA()()}2&n&&(e.xp6(1),e.Q6J("disableOnTouchDevice",!0))}const Ge=function(n){return{"ms-1":n}};function dt(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"li",31)(1,"div",32),e.NdJ("click",function(){e.CHM(t);const f=e.oxw().index,O=e.oxw(2);return e.KtG(O.move(f,f+1))}),e._uU(2,"arrow_circle_down"),e.qZA()()}if(2&n){const t=e.oxw().first;e.Q6J("ngClass",e.VKq(2,Ge,!t)),e.xp6(1),e.Q6J("disableOnTouchDevice",!0)}}function ut(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"li",31)(1,"div",33),e.NdJ("click",function(){e.CHM(t);const f=e.oxw().index,O=e.oxw(2);return e.KtG(O.remove(f))}),e._uU(2,"highlight_off"),e.qZA()()}if(2&n){const t=e.oxw();e.Q6J("ngClass",e.VKq(2,Ge,!(t.first&&t.last))),e.xp6(1),e.Q6J("disableOnTouchDevice",!0)}}const ft=function(n){return{"mb-3":n}},qe=function(n){return{"has-error":n}};function mt(n,s){if(1&n&&(e.TgZ(0,"li",22)(1,"fieldset",23)(2,"legend",24)(3,"div",25)(4,"div",26),e._uU(5),e.qZA(),e.TgZ(6,"ul",27),e.YNc(7,pt,3,1,"li",28),e.YNc(8,dt,3,4,"li",29),e.YNc(9,ut,3,4,"li",29),e.qZA()()(),e._UZ(10,"formly-field",19),e.qZA()()),2&n){const t=s.$implicit,a=s.index,f=s.first,O=s.last;e.Q6J("ngClass",e.VKq(7,ft,!O)),e.xp6(1),e.Q6J("ngClass",e.VKq(9,qe,null==t.formControl?null:t.formControl.invalid)),e.xp6(4),e.hij("#",a+1,""),e.xp6(2),e.Q6J("ngIf",!f),e.xp6(1),e.Q6J("ngIf",!O),e.xp6(1),e.Q6J("ngIf",t.props&&!1!==t.props.removable),e.xp6(1),e.Q6J("field",t)}}function ht(n,s){if(1&n&&(e.TgZ(0,"ul",20),e.YNc(1,mt,11,11,"li",21),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.field.fieldGroup)}}const gt=function(n){return{"d-none d-md-inline":n}};function _t(n,s){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA(),e.TgZ(2,"span",31),e._uU(3),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.field.fieldGroup?t.field.fieldGroup.length:0),e.xp6(1),e.Q6J("ngClass",e.VKq(3,gt,t.props.label)),e.xp6(1),e.hij(" element",t.field.fieldGroup&&1===t.field.fieldGroup.length?"o":"i","")}}const yt=function(){return[10,10]},Ft=function(n){return{placement:"top-end",offset:n}};let xt=(()=>{class n extends C.hv{constructor(t){super(),this.customFormUtilsService=t,this.parsedTitle="",this.parsedDescription=""}ngOnInit(){this.parsedDescription=this.props.description?this.customFormUtilsService.parseBBCode(this.props.description):"",this.parsedTitle=this.props.label?this.customFormUtilsService.parseBBCode(this.props.label):""}get maxLengthExceeded(){return this.props.maxItems&&this.model&&this.model.length>=this.props.maxItems}move(t,a){const f=this.model[t];this.remove(t),this.add(a,f)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u))},n.\u0275cmp=e.Xpm({type:n,selectors:[["formly-field-array"]],features:[e.qOj],decls:16,vars:14,consts:[[1,"rounded","px-3","pb-3","pt-2","mb-3","formly-fieldset",3,"ngClass"],[1,"legend-reset","pb-1","px-2","mb-0","mw-100"],[1,"d-flex","align-items-center","mw-100"],[4,"ngIf","ngIfElse"],["nolabel",""],["class","mb-2 text-justify",3,"innerHTML",4,"ngIf"],["class","alert alert-danger formly-field-array-error text-center","role","alert",3,"ngClass",4,"ngIf"],["class","list-unstyled mb-3",4,"ngIf"],[1,"d-flex","flex-row-reverse"],["appTippy","Hai aggiunto il numero massimo di elementi!",3,"disableInstance","tippyProps"],["type","button",1,"btn","btn-primary","d-flex","align-items-center",3,"disabled","click"],[1,"material-icons"],["itemscount",""],[1,"fs-xl","text-truncate","mw-100",3,"innerHTML"],[1,"ms-2","fs-reset","lh-1","fst-italic","list-counter","text-nowrap"],[4,"ngTemplateOutlet"],[1,"fs-xl","text-truncate","mw-10"],[1,"mb-2","text-justify",3,"innerHTML"],["role","alert",1,"alert","alert-danger","formly-field-array-error","text-center",3,"ngClass"],[3,"field"],[1,"list-unstyled","mb-3"],["class","item",3,"ngClass",4,"ngFor","ngForOf"],[1,"item",3,"ngClass"],[1,"rounded","formly-fieldset","dashed","show-success","px-3",3,"ngClass"],[1,"legend-reset","ms-auto","mb-0","px-2"],[1,"d-flex","align-items-center"],[1,"fs-xl","ms-1"],[1,"ms-2","mb-0","item-icons","list-unstyled","d-flex","align-items-center"],[4,"ngIf"],[3,"ngClass",4,"ngIf"],["appTippy","Sposta in alto",1,"d-block","material-icons","cursor-pointer",3,"disableOnTouchDevice","click"],[3,"ngClass"],["appTippy","Sposta in basso",1,"d-block","material-icons","cursor-pointer",3,"disableOnTouchDevice","click"],["appTippy","Rimuovi",1,"d-block","material-icons","cursor-pointer","text-danger",3,"disableOnTouchDevice","click"]],template:function(t,a){if(1&t&&(e.TgZ(0,"fieldset",0)(1,"legend",1)(2,"div",2),e.YNc(3,rt,6,2,"ng-container",3),e.YNc(4,st,3,1,"ng-template",null,4,e.W1O),e.qZA()(),e.YNc(6,lt,1,1,"div",5),e.YNc(7,ct,2,4,"div",6),e.YNc(8,ht,2,1,"ul",7),e.TgZ(9,"div",8)(10,"div",9)(11,"button",10),e.NdJ("click",function(){return!a.maxLengthExceeded&&a.add()}),e.TgZ(12,"span",11),e._uU(13,"add"),e.qZA()()()(),e.YNc(14,_t,4,5,"ng-template",null,12,e.W1O),e.qZA()),2&t){const f=e.MAs(5);e.Q6J("ngClass",e.VKq(9,qe,a.formControl.invalid)),e.xp6(3),e.Q6J("ngIf",a.parsedTitle)("ngIfElse",f),e.xp6(3),e.Q6J("ngIf",a.parsedDescription),e.xp6(1),e.Q6J("ngIf",a.showError&&a.formControl.errors),e.xp6(1),e.Q6J("ngIf",a.field.fieldGroup&&a.field.fieldGroup.length),e.xp6(2),e.Q6J("disableInstance",!a.maxLengthExceeded)("tippyProps",e.VKq(12,Ft,e.DdM(11,yt))),e.xp6(1),e.Q6J("disabled",a.maxLengthExceeded)}},dependencies:[d.mk,d.sg,d.O5,d.tP,C.cw,C.M2,Be.$],styles:["legend[_ngcontent-%COMP%]   .list-counter[_ngcontent-%COMP%]{padding-top:.175rem}legend[_ngcontent-%COMP%]   .item-icons[_ngcontent-%COMP%]{padding-top:.1rem}"]}),n})();function vt(n,s){if(1&n&&e._UZ(0,"label",4),2&n){const t=e.oxw();e.Q6J("for",t.id)("innerHTML",t.parsedTitle,e.oJD)}}function bt(n,s){1&n&&(e.TgZ(0,"span",5),e._uU(1," *"),e.qZA())}const Ct=function(n,s){return{"form-check-inline":n,"form-switch":s}};let Ot=(()=>{class n extends x{constructor(t){super(),this.customFormUtilsService=t,this.defaultOptions={props:{indeterminate:!0,hideLabel:!0,formCheck:"default"}},this.parsedTitle=""}ngOnInit(){this.props.label&&"nolabel"!==this.props.formCheck&&(this.parsedTitle=this.customFormUtilsService.parseBBCode(this.props.label))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u))},n.\u0275cmp=e.Xpm({type:n,selectors:[["formly-field-custom-checkbox"]],features:[e.qOj],decls:4,vars:13,consts:[[1,"form-check",3,"ngClass"],["type","checkbox",1,"form-check-input",3,"indeterminate","formControl","formlyAttributes"],["class","form-check-label",3,"for","innerHTML",4,"ngIf"],["aria-hidden","true",4,"ngIf"],[1,"form-check-label",3,"for","innerHTML"],["aria-hidden","true"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"input",1),e.YNc(2,vt,1,2,"label",2),e.YNc(3,bt,2,0,"span",3),e.qZA()),2&t&&(e.Q6J("ngClass",e.WLB(10,Ct,"inline"===a.props.formCheck||"inline-switch"===a.props.formCheck,"switch"===a.props.formCheck||"inline-switch"===a.props.formCheck)),e.xp6(1),e.ekj("is-invalid",a.showError)("position-static","nolabel"===a.props.formCheck),e.Q6J("indeterminate",a.props.indeterminate&&null==a.formControl.value)("formControl",a.formControl)("formlyAttributes",a.field),e.xp6(1),e.Q6J("ngIf",a.parsedTitle),e.xp6(1),e.Q6J("ngIf",a.props.required&&!0!==a.props.hideRequiredMarker))},dependencies:[d.mk,d.O5,C.JD,b.Wl,b.JJ,b.oH],encapsulation:2,changeDetection:0}),n})();var Tt=v(4020);const Mt=["editor"];let wt=(()=>{class n{constructor(t,a){this.ngZone=t,this.monacoPathConfig=a,this.isMonacoLoaded$=new D.X(!1),this._monacoPath="assets/monaco-editor/min/vs",window.monacoEditorAlreadyInitialized?t.run(()=>this.isMonacoLoaded$.next(!0)):(window.monacoEditorAlreadyInitialized=!0,this.monacoPathConfig&&(this.monacoPath=this.monacoPathConfig),this.loadMonaco())}set monacoPath(t){t&&(this._monacoPath=t)}loadMonaco(){const t=()=>{let J=this._monacoPath;window.amdRequire=window.require;const q=!!this.nodeRequire,Y=J.includes("http");q&&(window.require=this.nodeRequire,Y||(J=window.require("path").resolve(window.__dirname,this._monacoPath))),window.amdRequire.config({paths:{vs:J}}),window.amdRequire(["vs/editor/editor.main"],()=>{this.ngZone.run(()=>this.isMonacoLoaded$.next(!0))},de=>console.error("Error loading monaco-editor: ",de))};if(window.amdRequire)return t();window.require&&(this.addElectronFixScripts(),this.nodeRequire=window.require);const O=document.createElement("script");O.type="text/javascript",O.src=`${this._monacoPath}/loader.js`,O.addEventListener("load",t),document.body.appendChild(O)}addElectronFixScripts(){const t=document.createElement("script"),a=document.createTextNode("self.module = undefined;"),f=document.createTextNode("self.process.browser = true;");t.appendChild(a),t.appendChild(f),document.body.appendChild(t)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(e.R0b),e.LFG("MONACO_PATH",8))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),At=(()=>{class n{constructor(t){this.monacoLoader=t,this.init=new e.vpe,this.onTouched=()=>{},this.onErrorStatusChange=()=>{},this.propagateChange=()=>{}}get model(){return this.editor&&this.editor.getModel()}get modelMarkers(){return this.model&&monaco.editor.getModelMarkers({resource:this.model.uri})}ngOnInit(){this.monacoLoader.isMonacoLoaded$.pipe((0,V.h)(t=>t),(0,ae.q)(1)).subscribe(()=>{this.initEditor()})}ngOnChanges(t){if(this.editor&&t.options&&!t.options.firstChange){const{language:a,theme:f,...O}=t.options.currentValue,{language:J,theme:q}=t.options.previousValue;J!==a&&monaco.editor.setModelLanguage(this.editor.getModel(),this.options&&this.options.language?this.options.language:"text"),q!==f&&monaco.editor.setTheme(f),this.editor.updateOptions(O)}if(this.editor&&t.uri){const a=t.uri.currentValue,f=t.uri.previousValue;if(f&&!a||!f&&a||a&&f&&a.path!==f.path){const O=this.editor.getValue();let J;this.modelUriInstance&&this.modelUriInstance.dispose(),a&&(J=monaco.editor.getModels().find(q=>q.uri.path===a.path)),this.modelUriInstance=J||monaco.editor.createModel(O,this.options.language||"text",this.uri),this.editor.setModel(this.modelUriInstance)}}}writeValue(t){this.value=t,this.editor&&t?this.editor.setValue(t):this.editor&&this.editor.setValue("")}registerOnChange(t){this.propagateChange=t}registerOnTouched(t){this.onTouched=t}validate(){return this.parsedError?{monaco:{value:this.parsedError.split("|")}}:null}registerOnValidatorChange(t){this.onErrorStatusChange=t}initEditor(){const t={value:[this.value].join("\n"),language:"text",automaticLayout:!0,scrollBeyondLastLine:!1,theme:"vc"};this.editor=monaco.editor.create(this.editorContent.nativeElement,this.options?{...t,...this.options}:t),this.registerEditorListeners(),this.init.emit(this.editor)}registerEditorListeners(){this.editor.onDidChangeModelContent(()=>{this.propagateChange(this.editor.getValue())}),this.editor.onDidChangeModelDecorations(()=>{const t=this.modelMarkers.map(({message:f})=>f).join("|");this.parsedError!==t&&(this.parsedError=t,this.onErrorStatusChange())}),this.editor.onDidBlurEditorText(()=>{this.onTouched()})}ngOnDestroy(){this.editor&&this.editor.dispose()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(wt))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ngx-monaco-editor"]],viewQuery:function(t,a){if(1&t&&e.Gf(Mt,7),2&t){let f;e.iGM(f=e.CRH())&&(a.editorContent=f.first)}},inputs:{options:"options",uri:"uri"},outputs:{init:"init"},features:[e._Bn([{provide:b.JU,useExisting:(0,e.Gpc)(()=>n),multi:!0},{provide:b.Cf,useExisting:(0,e.Gpc)(()=>n),multi:!0}]),e.TTD],decls:4,vars:0,consts:[["fxFlex","",1,"editor-container"],["container",""],[1,"monaco-editor"],["editor",""]],template:function(t,a){1&t&&(e.TgZ(0,"div",0,1),e._UZ(2,"div",2,3),e.qZA())},styles:[".monaco-editor[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0}.editor-container[_ngcontent-%COMP%]{overflow:hidden;position:relative;display:table;width:100%;height:100%;min-width:0}"],changeDetection:0}),n})(),kt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[]]}),n})();function Dt(n,s){if(1&n&&(e.ynx(0),e.TgZ(1,"textarea",2),e._uU(2,"            "),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.ekj("is-invalid",t.showError),e.Q6J("formControl",t.formControl)("cols",1)("rows",10)("formlyAttributes",t.field)}}function It(n,s){1&n&&(e.ynx(0),e.TgZ(1,"p",4),e._UZ(2,"span",5),e.qZA(),e.BQk())}function Jt(n,s){if(1&n&&e._UZ(0,"ngx-monaco-editor",6),2&n){const t=e.oxw(2);e.Udp("height",t.editorHeight),e.Q6J("options",t.editorOptions)("formControl",t.formControl)}}function Pt(n,s){if(1&n&&(e.YNc(0,It,3,0,"ng-container",0),e.YNc(1,Jt,1,4,"ng-template",null,3,e.W1O)),2&n){const t=e.MAs(2),a=e.oxw();e.Q6J("ngIf",a.loading)("ngIfElse",t)}}let St=(()=>{class n extends C.fS{constructor(){super(...arguments),this.touchDevice=Tt.eX,this.editorOptions={theme:"vs-dark",language:"json"},this.loading=!0,this.editorHeight="350px"}ngOnInit(){this.touchDevice||(this.field.props.editorOptions&&(this.field.props.editorOptions.height&&(this.editorHeight=this.field.props.editorOptions.height,delete this.field.props.editorOptions.height),this.editorOptions={...this.editorOptions,...this.field.props.editorOptions}),this.loading=!1)}}return n.\u0275fac=function(){let s;return function(a){return(s||(s=e.n5z(n)))(a||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["formly-code-editor-type"]],features:[e.qOj],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["notTouchDevice",""],[1,"form-control",3,"formControl","cols","rows","formlyAttributes"],["codeEditor",""],[1,"placeholder-glow"],[1,"placeholder","col-12","placeholder-lg"],[1,"d-block","formly-code-editor",3,"options","formControl"]],template:function(t,a){if(1&t&&(e.YNc(0,Dt,3,6,"ng-container",0),e.YNc(1,Pt,3,2,"ng-template",null,1,e.W1O)),2&t){const f=e.MAs(2);e.Q6J("ngIf",a.touchDevice)("ngIfElse",f)}},dependencies:[d.O5,C.JD,b.Fj,b.JJ,At,b.oH],encapsulation:2}),n})();var fe=v(5861),He=v(8784);function Qt(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",4),e.NdJ("click",function(){e.CHM(t);const f=e.oxw();return e.KtG(f.formControl.setValue(void 0))}),e._uU(2,"highlight_off"),e.qZA(),e.BQk()}}function Zt(n,s){1&n&&(e.ynx(0),e.TgZ(1,"p",5),e._UZ(2,"span",6),e.qZA(),e.BQk())}function Lt(n,s){if(1&n&&e._UZ(0,"option",10),2&n){const t=s.$implicit;e.Q6J("ngValue",t.id||t.name)("innerText",t.name)}}function Ut(n,s){if(1&n&&(e.ynx(0),e.TgZ(1,"select",8),e.YNc(2,Lt,1,2,"option",9),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.ekj("is-invalid",t.showError),e.Q6J("formControl",t.formControl)("formlyAttributes",t.field),e.xp6(1),e.Q6J("ngForOf",t.groupsList)}}function jt(n,s){if(1&n&&e._UZ(0,"option",10),2&n){const t=s.$implicit;e.Q6J("ngValue",t.id||t.name)("innerText",t.name)}}function Rt(n,s){if(1&n&&(e.TgZ(0,"select",11),e.YNc(1,jt,1,2,"option",9),e.qZA()),2&n){const t=e.oxw(2);e.ekj("is-invalid",t.showError),e.Q6J("formControl",t.formControl)("formlyAttributes",t.field),e.xp6(1),e.Q6J("ngForOf",t.groupsList)}}function Vt(n,s){if(1&n&&(e.YNc(0,Ut,3,5,"ng-container",2),e.YNc(1,Rt,2,5,"ng-template",null,7,e.W1O)),2&n){const t=e.MAs(2),a=e.oxw();e.Q6J("ngIf",a.field.props.multiple)("ngIfElse",t)}}const Nt=function(n){return{"no-label":n}};let Yt=(()=>{class n extends C.fS{constructor(t){super(),this.forumService=t,this.loading=!0,this.groupsList=[]}ngOnInit(){var t=this;return(0,fe.Z)(function*(){t.field.defaultValue=void 0,t.field.props.hasOwnProperty("multiple")||(t.field.props.multiple=!0),t.groupsList=(yield t.forumService.getGroups()).sort((a,f)=>a.name.localeCompare(f.name)),t.field.props.keepGroupsWithoutId||(t.groupsList=t.groupsList.filter(a=>a.id>0)),t.loading=!1,t.field.formControl.updateValueAndValidity()})()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(He._))},n.\u0275cmp=e.Xpm({type:n,selectors:[["formly-field-forum-groups"]],features:[e.qOj],decls:5,vars:6,consts:[[1,"position-relative","wrapper",3,"ngClass"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["formSelect",""],[1,"reset-icon","position-absolute","cursor-pointer","d-block","material-icons","text-danger",3,"click"],[1,"placeholder-glow"],[1,"placeholder","col-12","placeholder-lg"],["single",""],["multiple","",1,"form-select",3,"formControl","formlyAttributes"],[3,"ngValue","innerText",4,"ngFor","ngForOf"],[3,"ngValue","innerText"],[1,"form-select",3,"formControl","formlyAttributes"]],template:function(t,a){if(1&t&&(e.TgZ(0,"div",0),e.YNc(1,Qt,3,0,"ng-container",1),e.YNc(2,Zt,3,0,"ng-container",2),e.YNc(3,Vt,3,2,"ng-template",null,3,e.W1O),e.qZA()),2&t){const f=e.MAs(4);e.Q6J("ngClass",e.VKq(4,Nt,!a.props.label)),e.xp6(1),e.Q6J("ngIf",!a.props.label||void 0!==a.formControl.value),e.xp6(1),e.Q6J("ngIf",a.loading)("ngIfElse",f)}},dependencies:[d.mk,d.sg,d.O5,C.JD,b.YN,b.Kr,b.EJ,b.K7,b.JJ,b.oH],styles:[".reset-icon[_ngcontent-%COMP%]{right:0}.wrapper[_ngcontent-%COMP%]:not(.no-label)   .reset-icon[_ngcontent-%COMP%]{top:calc(-24px - .45rem)}.no-label[_ngcontent-%COMP%]{padding-top:calc(24px + .45rem)}.no-label[_ngcontent-%COMP%]   .reset-icon[_ngcontent-%COMP%]{top:0}"]}),n})();function Bt(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",4),e.NdJ("click",function(){e.CHM(t);const f=e.oxw();return e.KtG(f.formControl.setValue(void 0))}),e._uU(2,"highlight_off"),e.qZA(),e.BQk()}}function Gt(n,s){1&n&&(e.ynx(0),e.TgZ(1,"p",5),e._UZ(2,"span",6),e.qZA(),e.BQk())}function qt(n,s){if(1&n&&(e.ynx(0),e._UZ(1,"option",10),e.BQk()),2&n){const t=s.$implicit;e.xp6(1),e.Q6J("ngValue",t.id)("innerHTML"," - "+t.name,e.oJD)}}function Ht(n,s){if(1&n&&(e.ynx(0),e.YNc(1,qt,2,2,"ng-container",9),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.subsections)}}function Wt(n,s){if(1&n&&(e.ynx(0),e._UZ(1,"option",10),e.YNc(2,Ht,2,1,"ng-container",1),e.BQk()),2&n){const t=s.$implicit;e.xp6(1),e.Q6J("ngValue",t.id)("innerHTML",t.name,e.oJD),e.xp6(1),e.Q6J("ngIf",t.subsections&&t.subsections.length)}}function $t(n,s){if(1&n&&(e.ynx(0),e._UZ(1,"option",10),e.BQk()),2&n){const t=s.$implicit;e.xp6(1),e.Q6J("ngValue",t)("innerHTML"," -- Sezione ristretta -- #"+t,e.oJD)}}function Kt(n,s){if(1&n&&(e.ynx(0),e.YNc(1,$t,2,2,"ng-container",9),e.BQk()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.restrictedOrDeletedSections)}}function Xt(n,s){if(1&n&&(e.ynx(0),e.TgZ(1,"select",8),e.YNc(2,Wt,3,3,"ng-container",9),e.YNc(3,Kt,2,1,"ng-container",1),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.ekj("is-invalid",t.showError),e.Q6J("formControl",t.formControl)("formlyAttributes",t.field),e.xp6(1),e.Q6J("ngForOf",t.sectionsList),e.xp6(1),e.Q6J("ngIf",t.restrictedOrDeletedSections.length>0)}}function zt(n,s){if(1&n&&(e.ynx(0),e._UZ(1,"option",10),e.BQk()),2&n){const t=s.$implicit;e.xp6(1),e.Q6J("ngValue",t.id)("innerHTML"," - "+t.name,e.oJD)}}function en(n,s){if(1&n&&(e.ynx(0),e.YNc(1,zt,2,2,"ng-container",9),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.subsections)}}function tn(n,s){if(1&n&&(e.ynx(0),e._UZ(1,"option",10),e.YNc(2,en,2,1,"ng-container",1),e.BQk()),2&n){const t=s.$implicit;e.xp6(1),e.Q6J("ngValue",t.id)("innerHTML",t.name,e.oJD),e.xp6(1),e.Q6J("ngIf",t.subsections&&t.subsections.length)}}function nn(n,s){if(1&n&&(e.ynx(0),e._UZ(1,"option",10),e.BQk()),2&n){const t=s.$implicit;e.xp6(1),e.Q6J("ngValue",t)("innerHTML"," -- Sezione ristretta -- #"+t,e.oJD)}}function on(n,s){if(1&n&&(e.ynx(0),e.YNc(1,nn,2,2,"ng-container",9),e.BQk()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.restrictedOrDeletedSections)}}function rn(n,s){if(1&n&&(e.TgZ(0,"select",11),e.YNc(1,tn,3,3,"ng-container",9),e.YNc(2,on,2,1,"ng-container",1),e.qZA()),2&n){const t=e.oxw(2);e.ekj("is-invalid",t.showError),e.Q6J("formControl",t.formControl)("formlyAttributes",t.field),e.xp6(1),e.Q6J("ngForOf",t.sectionsList),e.xp6(1),e.Q6J("ngIf",t.restrictedOrDeletedSections.length>0)}}function sn(n,s){if(1&n&&(e.YNc(0,Xt,4,6,"ng-container",2),e.YNc(1,rn,3,6,"ng-template",null,7,e.W1O)),2&n){const t=e.MAs(2),a=e.oxw();e.Q6J("ngIf",a.field.props.multiple)("ngIfElse",t)}}const ln=function(n){return{"no-label":n}};let an=(()=>{class n extends C.fS{constructor(t){super(),this.forumService=t,this.loading=!0,this.sectionsList=[],this.restrictedOrDeletedSections=[]}ngOnInit(){var t=this;return(0,fe.Z)(function*(){t.field.defaultValue=void 0,t.field.props.hasOwnProperty("multiple")||(t.field.props.multiple=!0),t.restrictedOrDeletedSections=Array.isArray(t.field.formControl.value)?[...t.field.formControl.value]:[];const a=yield t.forumService.getSections();t.sectionsList=a.map(f=>{const O=t.restrictedOrDeletedSections.indexOf(f.id);return O>-1&&t.restrictedOrDeletedSections.splice(O,1),{...f,subsections:t.flattenSubsections(f)}}),t.loading=!1,t.field.formControl.updateValueAndValidity()})()}flattenSubsections(t){let a=[],f=-1;if(t.subsections&&t.subsections.length)for(const O of t.subsections)f=this.restrictedOrDeletedSections.indexOf(O.id),f>-1&&this.restrictedOrDeletedSections.splice(f,1),a.push(O),O.subsections&&(a=[...a,...this.flattenSubsections(O)]);return a}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(He._))},n.\u0275cmp=e.Xpm({type:n,selectors:[["formly-field-forum-sections"]],features:[e.qOj],decls:5,vars:6,consts:[[1,"position-relative","wrapper",3,"ngClass"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["formSelect",""],[1,"reset-icon","position-absolute","cursor-pointer","d-block","material-icons","text-danger",3,"click"],[1,"placeholder-glow"],[1,"placeholder","col-12","placeholder-lg"],["single",""],["multiple","",1,"form-select",3,"formControl","formlyAttributes"],[4,"ngFor","ngForOf"],[3,"ngValue","innerHTML"],[1,"form-select",3,"formControl","formlyAttributes"]],template:function(t,a){if(1&t&&(e.TgZ(0,"div",0),e.YNc(1,Bt,3,0,"ng-container",1),e.YNc(2,Gt,3,0,"ng-container",2),e.YNc(3,sn,3,2,"ng-template",null,3,e.W1O),e.qZA()),2&t){const f=e.MAs(4);e.Q6J("ngClass",e.VKq(4,ln,!a.props.label)),e.xp6(1),e.Q6J("ngIf",!a.props.label||void 0!==a.formControl.value),e.xp6(1),e.Q6J("ngIf",a.loading)("ngIfElse",f)}},dependencies:[d.mk,d.sg,d.O5,C.JD,b.YN,b.Kr,b.EJ,b.K7,b.JJ,b.oH],styles:[".reset-icon[_ngcontent-%COMP%]{right:0}.wrapper[_ngcontent-%COMP%]:not(.no-label)   .reset-icon[_ngcontent-%COMP%]{top:calc(-24px - .45rem)}.no-label[_ngcontent-%COMP%]{padding-top:calc(24px + .45rem)}.no-label[_ngcontent-%COMP%]   .reset-icon[_ngcontent-%COMP%]{top:0}"]}),n})();var cn=v(8645),pn=v(3620),dn=v(3997),un=v(3019),fn=v(4664),mn=v(2096);let We=(()=>{class n{transform(t){let a=document.createElement("TEXTAREA");return a.innerHTML=t,a.value}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=e.Yjl({name:"decodeHtmlEntitites",type:n,pure:!0}),n})();var hn=v(1410),gn=v(7165),_n=v(5661),yn=v(8418),Fn=v(8277),xn=v(4929),$e=v(3946),vn=v(7291);function bn(n,s){1&n&&(e.TgZ(0,"span",8),e._uU(1,"*"),e.qZA())}function Cn(n,s){if(1&n&&(e.TgZ(0,"legend",5)(1,"label",6),e._uU(2),e.YNc(3,bn,2,0,"span",7),e.qZA()()),2&n){const t=e.oxw();e.xp6(1),e.s9C("for",t.id),e.xp6(1),e.hij(" ",t.props.label," "),e.xp6(1),e.Q6J("ngIf",t.props.required)}}function On(n,s){1&n&&e.GkF(0)}function Tn(n,s){if(1&n&&e._UZ(0,"div",9),2&n){const t=e.oxw();e.Q6J("innerHTML",t.parsedDescription,e.oJD)}}function Mn(n,s){1&n&&(e.TgZ(0,"div",16)(1,"span",17),e._uU(2,"Loading..."),e.qZA()())}function En(n,s){if(1&n&&(e.TgZ(0,"div",18),e._UZ(1,"formly-validation-message",19),e.qZA()),2&n){const t=e.oxw(2);e.Udp("display","block"),e.xp6(1),e.Q6J("field",t.field)}}function wn(n,s){1&n&&e._UZ(0,"app-loader",20)}function An(n,s){1&n&&e._UZ(0,"div",25),2&n&&e.Q6J("innerText","Nessun utente inserito!")}function kn(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",28)(2,"div",29),e.NdJ("click",function(f){const J=e.CHM(t).$implicit,q=e.oxw(4);return e.KtG(q.removeUser(J,f))}),e.TgZ(3,"div",30),e._uU(4,"remove"),e.qZA()(),e._UZ(5,"img",31),e.ALo(6,"uploadsreplace"),e.qZA(),e._UZ(7,"a",32),e.qZA()}if(2&n){const t=s.$implicit,a=e.oxw(4);e.Gre("d-flex flex-column align-items-center user-",a.circuit,""),e.xp6(1),e.Q6J("href",a.baseUrl+t.uid.substring(2),e.LSH),e.xp6(1),e.Q6J("disableOnTouchDevice",!0),e.xp6(3),e.s9C("alt",t.nickname+"'s avatar"),e.Q6J("src",e.lcZ(6,9,t.avatar),e.LSH),e.xp6(2),e.Q6J("innerHTML",t.nickname,e.oJD)("href",a.baseUrl+t.uid.substring(2),e.LSH)}}function Dn(n,s){if(1&n&&(e.TgZ(0,"ul",26),e.YNc(1,kn,8,11,"li",27),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.selectedUsers)}}const In=function(n){return{"empty-list":n}};function Jn(n,s){if(1&n&&(e.TgZ(0,"fieldset",21)(1,"legend",22),e._uU(2,"Lista utenti"),e.qZA(),e.YNc(3,An,1,1,"div",23),e.YNc(4,Dn,2,1,"ng-template",null,24,e.W1O),e.qZA()),2&n){const t=e.MAs(5),a=e.oxw(2);e.Q6J("ngClass",e.VKq(3,In,0===a.selectedUsers.length)),e.xp6(3),e.Q6J("ngIf",0===a.selectedUsers.length)("ngIfElse",t)}}function Pn(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",10)(1,"input",11),e.NdJ("ngModelChange",function(f){e.CHM(t);const O=e.oxw();return e.KtG(O.inputValue=f)})("selectItem",function(f){e.CHM(t);const O=e.oxw();return e.KtG(O.selectUser(f))})("focus",function(f){e.CHM(t);const O=e.oxw();return e.KtG(O.focus.next(f.target.value))}),e.qZA(),e.YNc(2,Mn,3,0,"div",12),e.qZA(),e.YNc(3,En,2,3,"div",13),e.YNc(4,wn,1,0,"app-loader",14),e.YNc(5,Jn,6,5,"ng-template",null,15,e.W1O)}if(2&n){const t=e.MAs(6),a=e.oxw();e.xp6(1),e.ekj("is-invalid",a.showError),e.Q6J("ngModel",a.inputValue)("formlyAttributes",a.field)("ngbTypeahead",a.search)("editable",!1)("inputFormatter",a.inputFormatter)("resultFormatter",a.outputFormatter),e.xp6(1),e.Q6J("ngIf",a.searching),e.xp6(1),e.Q6J("ngIf",a.showError),e.xp6(1),e.Q6J("ngIf",a.loading)("ngIfElse",t)}}let Sn=(()=>{class n extends C.fS{constructor(t,a,f,O,J,q){if(super(),this.userService=t,this.globalsService=a,this.changeDetectorRef=f,this.toastService=O,this.customFormUtilsService=J,this.decodeHtmlEntitiesPipe=q,this.inputValue="",this.selectedUsers=[],this.loading=!0,this.searching=!1,this.focus=new cn.x,this.parsedDescription="",this.formlyFieldValues=[],this.lastSearchedValueWithoutResult="",this.outputFormatter=Y=>Y?Y.nickname.indexOf("&")>-1?this.decodeHtmlEntitiesPipe.transform(Y.nickname):Y.nickname:"",this.search=Y=>{const de=Y.pipe((0,pn.b)(1e3),(0,dn.x)());return(0,un.T)(de,this.focus).pipe((0,oe.b)(()=>this.setSearching(!0)),(0,fn.w)(Te=>Te.length<3?(0,mn.of)([]):this.getUsers(Te)),(0,oe.b)(()=>this.setSearching(!1)))},this.circuit=this.globalsService.credentials?.site.short||"",!this.circuit)throw new Error("Missing credentials!");this.baseUrl=gn.hD[this.circuit]+"/?act=Profile&MID="}ngOnInit(){var t=this;return(0,fe.Z)(function*(){t.parsedDescription=t.props.description?t.customFormUtilsService.parseBBCode(t.props.description):"",t.formlyFieldValues=Array.isArray(t.formControl.value)?t.formControl.value:Array.isArray(t.field.defaultValue)?t.field.defaultValue:[],yield t.getSelectedUsersFromApi(),t.loading=!1,t.formControl.updateValueAndValidity(),t.formControl.registerOnChange(()=>{t.formControlChangeCallback()})})()}inputFormatter(t){return t.nickname}getUsers(t){var a=this;return(0,fe.Z)(function*(){if(a.lastSearchedValueWithoutResult&&0===t.indexOf(a.lastSearchedValueWithoutResult))return[];const f=yield a.userService.searchUserByName(t);return 0===f.length&&(a.lastSearchedValueWithoutResult=t),f})()}setSearching(t){this.searching=t,this.changeDetectorRef.detectChanges()}selectUser(t){const a=t.item,f=Number(a.uid.substring(2));if(this.formlyFieldValues.includes(f))return this.toastService.show({content:`L'utente <strong>${a.nickname}</strong> \xe8 gi\xe0 stato aggiunto alla lista!`}),void(this.inputValue="");this.formlyFieldValues.push(f),this.selectedUsers.push(a),t.preventDefault(),this.inputValue="",this.formControl.setValue([...this.formlyFieldValues])}removeUser(t,a){a.preventDefault(),a.stopPropagation();const f=Number(t.uid.substring(2));this.formlyFieldValues=this.formlyFieldValues.filter(O=>O!==f),this.selectedUsers=this.selectedUsers.filter(O=>O.uid!==t.uid),this.formControl.setValue([...this.formlyFieldValues])}formControlChangeCallback(){var t=this;return(0,fe.Z)(function*(){if(!Array.isArray(t.formControl.value))return;let a=!1;if(t.formControl.value.length!==t.formlyFieldValues.length)a=!0;else for(const f of t.formControl.value)if(!t.formlyFieldValues.includes(f)){a=!0;break}a&&(t.formlyFieldValues=t.formControl.value,t.loading=!0,t.changeDetectorRef.detectChanges(),yield t.getSelectedUsersFromApi(),t.loading=!1,t.changeDetectorRef.detectChanges())})()}getSelectedUsersFromApi(){var t=this;return(0,fe.Z)(function*(){t.selectedUsers=0!==t.formlyFieldValues.length?(yield t.userService.getDetailsFromUids(t.formlyFieldValues.map(a=>t.circuit+a))).sort((a,f)=>a.nickname>f.nickname?1:f.nickname>a.nickname?-1:0):[]})()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(yn.K),e.Y36(hn.d),e.Y36(e.sBO),e.Y36(_n.k),e.Y36(u),e.Y36(We))},n.\u0275cmp=e.Xpm({type:n,selectors:[["formly-field-forum-users"]],features:[e._Bn([We]),e.qOj],decls:6,vars:5,consts:[[1,"mb-3","rounded","px-3","pt-2","pb-3","formly-fieldset"],["class","legend-reset fs-reset mb-0 px-2 mw-100 lh-1 py-1",4,"ngIf"],[4,"ngTemplateOutlet"],["class","form-text text-muted",3,"innerHTML",4,"ngIf"],["fieldContet",""],[1,"legend-reset","fs-reset","mb-0","px-2","mw-100","lh-1","py-1"],[1,"form-label","mb-0","mw-100","text-truncate",3,"for"],["aria-hidden","true",4,"ngIf"],["aria-hidden","true"],[1,"form-text","text-muted",3,"innerHTML"],[1,"position-relative"],["type","text","container","body",1,"form-control",3,"ngModel","formlyAttributes","ngbTypeahead","editable","inputFormatter","resultFormatter","ngModelChange","selectItem","focus"],["class","spinner-border spinner-border-sm text-primary position-absolute","role","status",4,"ngIf"],["class","invalid-feedback",3,"display",4,"ngIf"],["message","Recupero utenti","class","d-block mt-3",4,"ngIf","ngIfElse"],["userList",""],["role","status",1,"spinner-border","spinner-border-sm","text-primary","position-absolute"],[1,"visually-hidden"],[1,"invalid-feedback"],[3,"field"],["message","Recupero utenti",1,"d-block","mt-3"],[1,"formly-user-list-container","rounded","px-3","pt-2","mb-3","mt-2",3,"ngClass"],[1,"legend-reset","fs-reset","mb-0","px-2","pb-1"],["class","alert alert-primary text-center mb-0 fw-bold",3,"innerText",4,"ngIf","ngIfElse"],["noEmpty",""],[1,"alert","alert-primary","text-center","mb-0","fw-bold",3,"innerText"],[1,"formly-user-list","list-unstyled","mb-0","d-grid","px-2"],[3,"class",4,"ngFor","ngForOf"],["target","_blank",1,"avatar-container","rounded-circle","d-block","position-relative",3,"href"],["appTippy","Rimuovi",1,"remove-user","alert","alert-danger","position-absolute","cursor-pointer","mb-0","py-0","px-1",3,"disableOnTouchDevice","click"],[1,"material-icons","d-block","fs-reset"],["appImage","",1,"d-block","image-cover","rounded-circle",3,"src","alt"],["target","_blank",1,"d-block","fw-bold","mt-1","nickname","text-truncate","mw-100",3,"innerHTML","href"]],template:function(t,a){if(1&t&&(e.TgZ(0,"fieldset",0),e.YNc(1,Cn,4,3,"legend",1),e.YNc(2,On,1,0,"ng-container",2),e.YNc(3,Tn,1,1,"div",3),e.qZA(),e.YNc(4,Pn,7,12,"ng-template",null,4,e.W1O)),2&t){const f=e.MAs(5);e.ekj("has-error",a.formControl.invalid),e.xp6(1),e.Q6J("ngIf",a.props.label),e.xp6(1),e.Q6J("ngTemplateOutlet",f),e.xp6(1),e.Q6J("ngIf",a.parsedDescription)}},dependencies:[d.mk,d.sg,d.O5,d.tP,C.JD,C.M2,b.Fj,b.JJ,b.On,Fn.t,xn.R,$e.dR,Be.$,vn.g],styles:[".spinner-border[_ngcontent-%COMP%]{top:calc(50% - 8px);right:10px}fieldset.formly-user-list-container[_ngcontent-%COMP%]{border:1px dashed var(--bs-gray-500)}fieldset.formly-user-list-container[_ngcontent-%COMP%]:not(.empty-list){padding-bottom:.75rem}fieldset.formly-user-list-container.empty-list[_ngcontent-%COMP%]{padding-bottom:1rem}.formly-user-list[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(60px,1fr));gap:1rem}.formly-user-list[_ngcontent-%COMP%]   .remove-user[_ngcontent-%COMP%]{top:0;left:-8px}.formly-user-list[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]{width:60px;height:60px;border:2px solid}.formly-user-list[_ngcontent-%COMP%]   .user-ff[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]{border-color:#58a72e}.formly-user-list[_ngcontent-%COMP%]   .user-ff[_ngcontent-%COMP%]   .nickname[_ngcontent-%COMP%]{color:#58a72e!important}.formly-user-list[_ngcontent-%COMP%]   .user-fc[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]{border-color:#0082cd}.formly-user-list[_ngcontent-%COMP%]   .user-fc[_ngcontent-%COMP%]   .nickname[_ngcontent-%COMP%]{color:#0082cd!important}.formly-user-list[_ngcontent-%COMP%]   .user-bf[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]{border-color:#e67f22}.formly-user-list[_ngcontent-%COMP%]   .user-bf[_ngcontent-%COMP%]   .nickname[_ngcontent-%COMP%]{color:#e67f22!important}@media (min-width: 960px){.formly-user-list[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(75px,1fr));gap:1.5rem}.formly-user-list[_ngcontent-%COMP%]   .remove-user[_ngcontent-%COMP%]{top:4px}.formly-user-list[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]{width:75px;height:75px}}"]}),n})();function Qn(n,s){if(1&n&&(e.TgZ(0,"legend"),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.props.label)}}function Zn(n,s){if(1&n&&e._UZ(0,"p",5),2&n){const t=e.oxw();e.Q6J("innerHTML",t.parsedDescription,e.oJD)}}function Ln(n,s){if(1&n&&(e.TgZ(0,"div",6),e._UZ(1,"formly-validation-message",7),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("field",t.field)}}function Un(n,s){1&n&&e._UZ(0,"formly-field",7),2&n&&e.Q6J("field",s.$implicit)}let jn=(()=>{class n extends C.fS{constructor(t){super(),this.customForumUtilsService=t,this.parsedDescription=""}ngOnInit(){this.props.description&&(this.parsedDescription=this.customForumUtilsService.parseBBCode(this.props.description))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u))},n.\u0275cmp=e.Xpm({type:n,selectors:[["formly-field-multi-schema"]],features:[e.qOj],decls:5,vars:4,consts:[[1,"pt-3","px-3","rounded","border","mt-2"],[4,"ngIf"],[3,"innerHTML",4,"ngIf"],["class","alert alert-danger","role","alert",4,"ngIf"],[3,"field",4,"ngFor","ngForOf"],[3,"innerHTML"],["role","alert",1,"alert","alert-danger"],[3,"field"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Qn,2,1,"legend",1),e.YNc(2,Zn,1,1,"p",2),e.YNc(3,Ln,2,1,"div",3),e.YNc(4,Un,1,1,"formly-field",4),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",a.props.label),e.xp6(1),e.Q6J("ngIf",a.parsedDescription),e.xp6(1),e.Q6J("ngIf",a.showError&&a.formControl.errors),e.xp6(1),e.Q6J("ngForOf",a.field.fieldGroup))},dependencies:[d.sg,d.O5,C.cw,C.M2],encapsulation:2}),n})();function Rn(n,s){if(1&n&&(e.TgZ(0,"legend",6),e._UZ(1,"div",7),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("innerHTML",t.parsedTitle,e.oJD)}}function Vn(n,s){1&n&&e.GkF(0)}const Nn=function(n){return{"has-error":n}};function Yn(n,s){if(1&n&&(e.TgZ(0,"fieldset",3),e.YNc(1,Rn,2,1,"legend",4),e.YNc(2,Vn,1,0,"ng-container",5),e.qZA()),2&n){const t=e.oxw(),a=e.MAs(4);e.Q6J("ngClass",e.VKq(3,Nn,t.formControl.invalid)),e.xp6(1),e.Q6J("ngIf",t.parsedTitle),e.xp6(1),e.Q6J("ngTemplateOutlet",a)}}function Bn(n,s){if(1&n&&e._UZ(0,"div",10),2&n){const t=e.oxw(2);e.Q6J("innerHTML",t.parsedTitle,e.oJD)}}function Gn(n,s){1&n&&e.GkF(0)}function qn(n,s){if(1&n&&(e.TgZ(0,"div",8),e.YNc(1,Bn,1,1,"div",9),e.YNc(2,Gn,1,0,"ng-container",5),e.qZA()),2&n){const t=e.oxw(),a=e.MAs(4);e.xp6(1),e.Q6J("ngIf",t.parsedTitle),e.xp6(1),e.Q6J("ngTemplateOutlet",a)}}function Hn(n,s){if(1&n&&e._UZ(0,"p",14),2&n){const t=e.oxw(2);e.Q6J("innerHTML",t.parsedDescription,e.oJD)}}function Wn(n,s){if(1&n&&(e.TgZ(0,"div",15),e._UZ(1,"formly-validation-message",16),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("field",t.field)}}function $n(n,s){1&n&&e._UZ(0,"formly-field",16),2&n&&e.Q6J("field",s.$implicit)}function Kn(n,s){if(1&n&&(e.YNc(0,Hn,1,1,"p",11),e.YNc(1,Wn,2,1,"div",12),e.YNc(2,$n,1,1,"formly-field",13)),2&n){const t=e.oxw();e.Q6J("ngIf",t.parsedDescription),e.xp6(1),e.Q6J("ngIf",t.showError&&t.formControl.errors),e.xp6(1),e.Q6J("ngForOf",t.field.fieldGroup)}}let Xn=(()=>{class n extends C.fS{constructor(t){super(),this.customFormUtilsService=t,this.parsedTitle="",this.parsedDescription=""}ngOnInit(){this.parsedDescription=this.props.description?this.customFormUtilsService.parseBBCode(this.props.description):"",this.parsedTitle=this.props.label?this.customFormUtilsService.parseBBCode(this.props.label):""}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u))},n.\u0275cmp=e.Xpm({type:n,selectors:[["formly-field-object"]],features:[e.qOj],decls:5,vars:2,consts:[["class","px-3 mb-3 pt-1 rounded formly-fieldset",3,"ngClass",4,"ngIf","ngIfElse"],["noFieldset",""],["objectFieldContent",""],[1,"px-3","mb-3","pt-1","rounded","formly-fieldset",3,"ngClass"],["class","legend-reset fs-xl px-2 mb-0 pb-1 mw-100 d-flex align-items-center",4,"ngIf"],[4,"ngTemplateOutlet"],[1,"legend-reset","fs-xl","px-2","mb-0","pb-1","mw-100","d-flex","align-items-center"],[1,"mw-100","text-truncate",3,"innerHTML"],[1,"mb-3"],["class","h4",3,"innerHTML",4,"ngIf"],[1,"h4",3,"innerHTML"],["class","text-justify mt-2",3,"innerHTML",4,"ngIf"],["class","alert alert-danger formly-field-object-error text-center","role","alert",4,"ngIf"],[3,"field",4,"ngFor","ngForOf"],[1,"text-justify","mt-2",3,"innerHTML"],["role","alert",1,"alert","alert-danger","formly-field-object-error","text-center"],[3,"field"]],template:function(t,a){if(1&t&&(e.YNc(0,Yn,3,5,"fieldset",0),e.YNc(1,qn,3,2,"ng-template",null,1,e.W1O),e.YNc(3,Kn,3,3,"ng-template",null,2,e.W1O)),2&t){const f=e.MAs(2);e.Q6J("ngIf",a.props.fieldsetTemplate)("ngIfElse",f)}},dependencies:[d.mk,d.sg,d.O5,d.tP,C.cw,C.M2],encapsulation:2}),n})(),zn=(()=>{class n extends C.fS{constructor(){super(...arguments),this.defaultOptions={props:{cols:1,rows:10}}}}return n.\u0275fac=function(){let s;return function(a){return(s||(s=e.n5z(n)))(a||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["formly-field-textarea"]],features:[e.qOj],decls:2,vars:6,consts:[[1,"form-control",3,"formControl","cols","rows","formlyAttributes"]],template:function(t,a){1&t&&(e.TgZ(0,"textarea",0),e._uU(1,"    "),e.qZA()),2&t&&(e.ekj("is-invalid",a.showError),e.Q6J("formControl",a.formControl)("cols",a.props.cols)("rows",a.props.rows)("formlyAttributes",a.field))},dependencies:[C.JD,b.Fj,b.JJ,b.oH],encapsulation:2,changeDetection:0}),n})();var eo=v(7228),to=v(7535);function ro(n,s){return`Questo campo deve avere almeno ${s.props.minLength} caratteri`}function io(n,s){return`Questo campo pu\xf2 avere al massimo ${s.props.maxLength} caratteri`}function so(n,s){return`Questo campo deve avere un valore minimo di ${s.props.min}`}function lo(n,s){return`Questo campo pu\xf2 avere un valore massimo di ${s.props.max}`}function ao(){return"Il campo non rispetta lo schema richiesto"}function co(n,s){return`Questo campo deve avere almeno ${s.props.minItems} element${1===s.props.minItems?"o":"i"}!`}function po(n,s){return`Questo campo pu\xf2 avere al massimo ${s.props.maxItems} element${1===s.props.maxItems?"o":"i"}!`}function uo(n,s){return`Questo campo deve essere un multiplo di ${s.props.step}`}var fo=v(3038),mo=v(5778);let ho=(()=>{class n extends C.fS{constructor(){super(...arguments),this.defaultOptions={props:{label:""}}}}return n.\u0275fac=function(){let s;return function(a){return(s||(s=e.n5z(n)))(a||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["formly-field-label"]],features:[e.qOj],decls:2,vars:1,template:function(t,a){1&t&&(e.TgZ(0,"h5"),e._uU(1),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",a.props.label,""))},encapsulation:2,changeDetection:0}),n})(),go=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[d.ez,i,C.X0.forRoot({extras:{renderFormlyFieldElement:!1},wrappers:[{name:"form-field",component:nt}],validationMessages:[{name:"required",message:"Compila questo campo!"},{name:"minLength",message:ro},{name:"maxLength",message:io},{name:"min",message:so},{name:"max",message:lo},{name:"minItems",message:co},{name:"maxItems",message:po},{name:"multipleOf",message:uo},{name:"pattern",message:ao},{name:"uniqueItems",message:"Non possono esserci elementi uguali fra loro!"}],types:[{name:"array",component:xt},{name:"code-editor",component:St,wrappers:["form-field"]},{name:"object",component:Xn},{name:"textarea",component:zn},{name:"forum-groups",component:Yt,wrappers:["form-field"]},{name:"forum-sections",component:an,wrappers:["form-field"]},{name:"label",component:ho},{name:"forum-users",component:Sn},{name:"multischema",component:jn},{name:"boolean",component:Ot,wrappers:["form-field"]}]}),b.u5,eo.$,to.q,kt,$e.ZS,b.UX,fo.G,mo.g]}),n})()},336:(Me,se,v)=>{v.d(se,{c:()=>L});var d=v(5879),e=v(6223),C=v(5545),b=v(9397);function Z(M){return""===M||null==M}function W(M){return null!=M&&"object"==typeof M&&!Array.isArray(M)}function ne(M){return Number.isInteger?Number.isInteger(M):"number"==typeof M&&Math.floor(M)===M}function K(M){return"object"==typeof M&&(M.hasOwnProperty("const")||M.enum&&1===M.enum.length)}function X(M){if(!M.fieldGroup)return(0,C._S)(M)&&void 0!==(0,C.Hl)(M)?1:0;const _=M.fieldGroup.reduce((p,F)=>X(F)+p,0);if(0===_&&(0,C._S)(M)){const p=(0,C.Hl)(M);if(null===p||void 0!==p&&(M.fieldArray&&Array.isArray(p)||!M.fieldArray&&W(p)))return 1}return _}let L=(()=>{class M{toFieldConfig(p,F){return this._toFieldConfig(p,{schema:p,...F||{}})}_toFieldConfig(p,{key:F,...x}){p=this.resolveSchema(p,x);const T=this.guessSchemaType(p);let h={type:T[0],defaultValue:p.default,props:{label:p.title,readonly:p.readOnly,description:p.description}};switch(null!=F&&(h.key=F),!x.ignoreDefault&&(p.readOnly||x.readOnly)&&(h.props.disabled=!0,x={...x,readOnly:!0}),x.resetOnHide&&(h.resetOnHide=!0),F&&x.strict&&this.addValidator(h,"type",(y,k)=>{const E=(0,C.Hl)(k);if(null!=E)switch(h.type){case"string":return"string"==typeof E;case"integer":return ne(E);case"number":return"number"==typeof E;case"object":return W(E);case"array":return Array.isArray(E)}return!0}),!1===x.shareFormControl&&(h.shareFormControl=!1),x.ignoreDefault&&delete h.defaultValue,this.addValidator(h,"type",{schemaType:T,expression:({value:y})=>{if(void 0===y||null===y&&-1!==T.indexOf("null"))return!0;switch(T[0]){case"null":return null===typeof y;case"string":return"string"==typeof y;case"integer":return ne(y);case"number":return"number"==typeof y;case"object":return W(y);case"array":return Array.isArray(y)}return!0}}),h.type){case"number":case"integer":h.parsers=[y=>Z(y)?void 0:Number(y)],p.hasOwnProperty("minimum")&&(h.props.min=p.minimum),p.hasOwnProperty("maximum")&&(h.props.max=p.maximum),p.hasOwnProperty("exclusiveMinimum")&&(h.props.exclusiveMinimum=p.exclusiveMinimum,this.addValidator(h,"exclusiveMinimum",({value:y})=>Z(y)||y>p.exclusiveMinimum)),p.hasOwnProperty("exclusiveMaximum")&&(h.props.exclusiveMaximum=p.exclusiveMaximum,this.addValidator(h,"exclusiveMaximum",({value:y})=>Z(y)||y<p.exclusiveMaximum)),p.hasOwnProperty("multipleOf")&&(h.props.step=p.multipleOf,this.addValidator(h,"multipleOf",({value:y})=>{if(Z(y)||"number"!=typeof y||0===y||p.multipleOf<=0)return!0;const k=Math.pow(10,function te(M){if(!isFinite(M))return 0;let _=1,p=0;for(;Math.round(M*_)/_!==M;)_*=10,p++;return p}(p.multipleOf));return Math.round(y*k)%Math.round(p.multipleOf*k)==0}));break;case"string":h.parsers=[y=>(-1!==T.indexOf("null")?y=Z(y)?null:y:h.props.required||(y=""===y?void 0:y),y)],["minLength","maxLength","pattern"].forEach(y=>{p.hasOwnProperty(y)&&(h.props[y]=p[y])});break;case"object":{h.fieldGroup||(h.fieldGroup=[]);const{propDeps:y,schemaDeps:k}=this.resolveDependencies(p);Object.keys(p.properties||{}).forEach(E=>{const P=Array.isArray(p.required)&&-1!==p.required.indexOf(E),I=this._toFieldConfig(p.properties[E],{...x,key:E,isOptional:x.isOptional||!P});if(h.fieldGroup.push(I),(P||y[E])&&(I.expressions={...I.expressions||{},"props.required":U=>{let w=U.parent;const D=U.fieldGroup&&null!=U.key?w.model:U.model;for(;null==w.key&&w.parent;)w=w.parent;return!!(D||w&&w.props&&w.props.required)&&(!(!Array.isArray(p.required)||-1===p.required.indexOf(E))||y[E]&&U.model&&y[E].some(V=>!Z(U.model[V])))}}),k[E]){const U=D=>D.hasOwnProperty("const")?D.const:D.enum[0],w=k[E].oneOf;w&&w.every(D=>D.properties&&D.properties[E]&&K(D.properties[E]))?w.forEach(D=>{const{[E]:B,...V}=D.properties;h.fieldGroup.push({...this._toFieldConfig({...D,properties:V},{...x,resetOnHide:!0}),expressions:{hide:oe=>!oe.model||U(B)!==oe.model[E]}})}):h.fieldGroup.push({...this._toFieldConfig(k[E],x),expressions:{hide:D=>!D.model||Z(D.model[E])}})}}),p.oneOf&&h.fieldGroup.push(this.resolveMultiSchema("oneOf",p.oneOf,{...x,shareFormControl:!1})),p.anyOf&&h.fieldGroup.push(this.resolveMultiSchema("anyOf",p.anyOf,x));break}case"array":p.hasOwnProperty("minItems")&&(h.props.minItems=p.minItems,this.addValidator(h,"minItems",(y,k)=>{const E=(0,C.Hl)(k);return Z(E)||E.length>=p.minItems}),!x.isOptional&&p.minItems>0&&void 0===h.defaultValue&&(h.defaultValue=Array.from(new Array(p.minItems)))),p.hasOwnProperty("maxItems")&&(h.props.maxItems=p.maxItems,this.addValidator(h,"maxItems",(y,k)=>{const E=(0,C.Hl)(k);return Z(E)||E.length<=p.maxItems})),p.hasOwnProperty("uniqueItems")&&(h.props.uniqueItems=p.uniqueItems,this.addValidator(h,"uniqueItems",(y,k)=>{const E=(0,C.Hl)(k);return!(!Z(E)&&p.uniqueItems)||Array.from(new Set(E.map(I=>JSON.stringify(I)))).length===E.length})),p.items&&!Array.isArray(p.items)&&(p.items=this.resolveSchema(p.items,x)),this.isEnum(p)||(h.fieldArray=y=>{if(!Array.isArray(p.items)){const I=p.items?this._toFieldConfig(p.items,x):{};return I.props&&(I.props.required=!0),I}const k=y.fieldGroup?y.fieldGroup.length:0,E=p.items[k]?p.items[k]:p.additionalItems,P=E?this._toFieldConfig(E,x):{};return P.props&&(P.props.required=!0),p.items[k]&&(P.props.removable=!1),P})}return p.hasOwnProperty("const")&&(h.props.const=p.const,this.addValidator(h,"const",({value:y})=>y===p.const),h.type||(h.defaultValue=p.const)),this.isEnum(p)&&(h.props.multiple="array"===h.type,h.type="enum",h.props.options=this.toEnumOptions(p)),p.oneOf&&!h.type&&(delete h.key,h.fieldGroup=[this.resolveMultiSchema("oneOf",p.oneOf,{...x,key:F,shareFormControl:!1})]),p.oneOf&&!h.type&&(delete h.key,h.fieldGroup=[this.resolveMultiSchema("oneOf",p.oneOf,{...x,key:F,shareFormControl:!1})]),p.widget?.formlyConfig&&(h=this.mergeFields(h,p.widget.formlyConfig)),h.templateOptions=h.props,x.map?x.map(h,p):h}resolveSchema(p,F){return p&&p.$ref&&(p=this.resolveDefinition(p,F)),p&&p.allOf&&(p=this.resolveAllOf(p,F)),p}resolveAllOf({allOf:p,...F},x){if(!p.length)throw Error(`allOf array can not be empty ${p}.`);return p.reduce((T,h)=>(h=this.resolveSchema(h,x),T.required&&h.required&&(T.required=[...T.required,...h.required]),h.uniqueItems&&(T.uniqueItems=h.uniqueItems),["maxLength","maximum","exclusiveMaximum","maxItems","maxProperties"].forEach(y=>{!Z(T[y])&&!Z(h[y])&&(T[y]=T[y]<h[y]?T[y]:h[y])}),["minLength","minimum","exclusiveMinimum","minItems","minProperties"].forEach(y=>{!Z(T[y])&&!Z(h[y])&&(T[y]=T[y]>h[y]?T[y]:h[y])}),(0,C.Du)(T,h)),F)}resolveMultiSchema(p,F,x){return{type:"multischema",fieldGroup:[{type:"enum",defaultValue:-1,props:{multiple:"anyOf"===p,options:F.map((T,h)=>({label:T.title,value:h,disabled:T.readOnly}))},hooks:{onInit:T=>T.formControl.valueChanges.pipe((0,b.b)(()=>T.options.detectChanges(T.parent)))}},{fieldGroup:F.map((T,h)=>({...this._toFieldConfig(T,{...x,resetOnHide:!0}),expressions:{hide:(y,k)=>{const E=y.parent.parent.fieldGroup[0].formControl;if(-1===E.value||k){let P=y.parent.fieldGroup.map((I,U)=>[I,U,this.isFieldValid(I,U,F,x)]).sort(([I,,U],[w,,D])=>{if(U!==D)return D?1:-1;const B=X(I),V=X(w);return B===V&&I.props.disabled===w.props.disabled?0:V>B?1:-1}).map(([,I])=>I);if("anyOf"===p){const I=P.filter(U=>X(y.parent.fieldGroup[U]));P=I.length>0?I:[P[0]||0]}P=P.length>0?P:[0],E.setValue("anyOf"===p?P:P[0])}return Array.isArray(E.value)?-1===E.value.indexOf(h):E.value!==h}}}))}]}}resolveDefinition(p,F){const[x,T]=p.$ref.split("#/");if(x)throw Error(`Remote schemas for ${p.$ref} not supported yet.`);const h=T?T.split("/").reduce((y,k)=>y?.hasOwnProperty(k)?y[k]:null,F.schema):null;if(!h)throw Error(`Cannot find a definition for ${p.$ref}.`);return h.$ref?this.resolveDefinition(h,F):{...h,...["title","description","default","widget"].reduce((y,k)=>(p.hasOwnProperty(k)&&(y[k]=p[k]),y),{})}}resolveDependencies(p){const F={},x={};return Object.keys(p.dependencies||{}).forEach(T=>{const h=p.dependencies[T];Array.isArray(h)?h.forEach(y=>{F[y]?F[y].push(T):F[y]=[T]}):x[T]=h}),{propDeps:F,schemaDeps:x}}guessSchemaType(p){const F=p?.type;return!F&&p?.properties?["object"]:Array.isArray(F)?1===F.length?F:2===F.length&&-1!==F.indexOf("null")?F.sort(x=>"null"==x?1:-1):F:F?[F]:[]}addValidator(p,F,x){p.validators=p.validators||{},p.validators[F]=x}isEnum(p){return!!p.enum||p.anyOf&&p.anyOf.every(K)||p.oneOf&&p.oneOf.every(K)||p.uniqueItems&&p.items&&!Array.isArray(p.items)&&this.isEnum(p.items)}toEnumOptions(p){if(p.enum)return p.enum.map(x=>({value:x,label:x}));const F=x=>{const T=x.hasOwnProperty("const")?x.const:x.enum[0],h={value:T,label:x.title||T};return x.readOnly&&(h.disabled=!0),h};return p.anyOf?p.anyOf.map(F):p.oneOf?p.oneOf.map(F):this.toEnumOptions(p.items)}isFieldValid(p,F,x,T){p._schemasFields||(Object.defineProperty(p,"_schemasFields",{enumerable:!1,writable:!0,configurable:!0}),p._schemasFields={});let h=p._schemasFields[F];const y=p.model?(0,C.kg)(p.model):p.fieldArray?[]:{};return h?(h.model=y,p.options.build(h)):h=p._schemasFields[F]=p.options.build({form:Array.isArray(y)?new e.Oe([]):new e.cw({}),fieldGroup:[this._toFieldConfig(x[F],{...T,resetOnHide:!0,ignoreDefault:!0,map:null,strict:!0})],model:y,options:{}}),h.form.valid}mergeFields(p,F){for(let x in F){const T="templateOptions"===x?"props":x;W(p[T])&&W(F[x])?p[T]=this.mergeFields(p[T],F[x]):null!=F[x]&&(p[T]=F[x])}return p}}return M.\u0275fac=function(p){return new(p||M)},M.\u0275prov=d.Yz7({token:M,factory:M.\u0275fac,providedIn:"root"}),M})()},5545:(Me,se,v)=>{v.d(se,{Du:()=>$,Hl:()=>H,JD:()=>Ie,M2:()=>Pe,T7:()=>De,X0:()=>Ye,_S:()=>w,cw:()=>Fe,fS:()=>pe,hv:()=>Se,kg:()=>N,n2:()=>Qe});var d=v(5879),e=v(6223),C=v(2664),b=v(3019),te=v(2096),Z=v(5592),W=v(8645),ne=v(3997),K=v(7921),X=v(3620),L=v(2181),M=v(4664),_=v(8180),p=v(9397),F=v(7398),x=v(6814),T=v(6593);const h=["container"];function y(c,r){}function k(c,r){1&c&&d._UZ(0,"formly-field",1),2&c&&d.Q6J("field",r.$implicit)}const E=["*"],P=["fieldComponent"];function U(c,r,o){if(r.id)return r.id;let i=r.type;return!i&&r.template&&(i="template"),i instanceof d.DyG&&(i=i.prototype.constructor.name),[c,i,r.key,o].join("_")}function w(c){return!z(c.key)&&""!==c.key}function D(c){if(!w(c))return[];if(c._keyPath?.key!==c.key){let r=[];if("string"==typeof c.key){const o=-1===c.key.indexOf("[")?c.key:c.key.replace(/\[(\w+)\]/g,".$1");r=-1!==o.indexOf(".")?o.split("."):[o]}else r=Array.isArray(c.key)?c.key.slice(0):[`${c.key}`];Q(c,"_keyPath",{key:c.key,path:r})}return c._keyPath.path.slice(0)}const B=["required","pattern","minLength","maxLength","min","max"];function V(c,r){let o=D(c);if(0===o.length)return;let i=c;for(;i.parent;)i=i.parent,o=[...D(i),...o];if(void 0===r&&c.resetOnHide){const l=o.pop();delete o.reduce((m,g)=>m[g]||{},i.model)[l]}else!function oe(c,r,o){for(let i=0;i<r.length-1;i++){const l=r[i];(!c[l]||!G(c[l]))&&(c[l]=/^\d+$/.test(r[i+1])?[]:{}),c=c[l]}c[r[r.length-1]]=N(o)}(i.model,o,r)}function H(c){let r=c.parent?c.parent.model:c.model;for(const o of D(c)){if(!r)return r;r=r[o]}return r}function $(c,...r){return r.forEach(o=>{for(const i in o)z(c[i])||Ee(c[i])?c[i]=N(o[i]):we(c[i],o[i])&&$(c[i],o[i])}),c}function z(c){return null==c}function ue(c){return void 0===c}function Ee(c){return""===c}function me(c){return"function"==typeof c}function we(c,r){return G(c)&&G(r)&&Object.getPrototypeOf(c)===Object.getPrototypeOf(r)&&!(Array.isArray(c)||Array.isArray(r))}function G(c){return null!=c&&"object"==typeof c}function N(c){if(!G(c)||(0,C.b)(c)||c instanceof d.Rgc||c.changingThisBreaksApplicationSecurity||-1!==["RegExp","FileList","File","Blob"].indexOf(c.constructor.name))return c;if(c instanceof Set)return new Set(c);if(c instanceof Map)return new Map(c);if(c._isAMomentObject&&me(c.clone))return c.clone();if(c instanceof e.TO)return null;if(c instanceof Date)return new Date(c.getTime());if(Array.isArray(c))return c.slice(0).map(i=>N(i));const r=Object.getPrototypeOf(c);let o=Object.create(r);return o=Object.setPrototypeOf(o,r),Object.keys(c).reduce((i,l)=>{const u=Object.getOwnPropertyDescriptor(c,l);return u.get?Object.defineProperty(i,l,u):i[l]=N(c[l]),i},o)}function Q(c,r,o){Object.defineProperty(c,r,{enumerable:!1,writable:!0,configurable:!0}),c[r]=o}function he(c,r,o){let i=[];const l=()=>{i.forEach(m=>m()),i=[]},u=j(c,r,({firstChange:m,currentValue:g})=>{!m&&o(),l(),G(g)&&"Object"===g.constructor.name&&Object.keys(g).forEach(A=>{i.push(he(c,[...r,A],o))})});return()=>{u.unsubscribe(),l()}}function j(c,r,o){c._observers||Q(c,"_observers",{});let i=c;for(let g=0;g<r.length-1;g++)(!i[r[g]]||!G(i[r[g]]))&&(i[r[g]]=/^\d+$/.test(r[g+1])?[]:{}),i=i[r[g]];const l=r[r.length-1],u=r.join(".");c._observers[u]||(c._observers[u]={value:i[l],onChange:[]});const m=c._observers[u];if(i[l]!==m.value&&(m.value=i[l]),-1===m.onChange.indexOf(o)&&(m.onChange.push(o),o({currentValue:m.value,firstChange:!0}),m.onChange.length>=1&&G(i))){const{enumerable:g}=Object.getOwnPropertyDescriptor(i,l)||{enumerable:!0};Object.defineProperty(i,l,{enumerable:g,configurable:!0,get:()=>m.value,set:A=>{if(A!==m.value){const R=m.value;m.value=A,m.onChange.forEach(S=>S({previousValue:R,currentValue:A,firstChange:!1}))}}})}return{setValue(g){if(g===m.value)return;const A=m.value;m.value=g,m.onChange.forEach(R=>{R!==o&&R({previousValue:A,currentValue:g,firstChange:!1})})},unsubscribe(){m.onChange=m.onChange.filter(g=>g!==o),0===m.onChange.length&&delete c._observers[u]}}}function xe(c,r){if(r=Array.isArray(r)?r.join("."):r,c.fieldGroup)for(let o=0,i=c.fieldGroup.length;o<i;o++){const l=c.fieldGroup[o],u=Array.isArray(l.key)?l.key.join("."):l.key;if(u===r)return l;if(l.fieldGroup&&(z(u)||0===r.indexOf(`${u}.`))){const m=xe(l,z(u)?r:r.slice(u.length+1));if(m)return m}}}function ve(c){c._componentRefs?.forEach(r=>{r instanceof d.UuU?r.injector.get(d.sBO).markForCheck():r.markForCheck()})}const le=new d.OlP("FORMLY_CONFIG");let ee=(()=>{class c{constructor(){this.types={},this.validators={},this.wrappers={},this.messages={},this.extras={checkExpressionOn:"modelChange",lazyRender:!0,resetFieldOnHide:!0,renderFormlyFieldElement:!0,showError:o=>o.formControl?.invalid&&(o.formControl?.touched||o.options.parentForm?.submitted||!!o.field.validation?.show)},this.extensions={},this.presets={},this.extensionsByPriority={}}addConfig(o){o.types&&o.types.forEach(i=>this.setType(i)),o.validators&&o.validators.forEach(i=>this.setValidator(i)),o.wrappers&&o.wrappers.forEach(i=>this.setWrapper(i)),o.validationMessages&&o.validationMessages.forEach(i=>this.addValidatorMessage(i.name,i.message)),o.extensions&&this.setSortedExtensions(o.extensions),o.extras&&(this.extras={...this.extras,...o.extras}),o.presets&&(this.presets={...this.presets,...o.presets.reduce((i,l)=>({...i,[l.name]:l.config}),{})})}setType(o){Array.isArray(o)?o.forEach(i=>this.setType(i)):(this.types[o.name]||(this.types[o.name]={name:o.name}),["component","extends","defaultOptions","wrappers"].forEach(i=>{o.hasOwnProperty(i)&&(this.types[o.name][i]=o[i])}))}getType(o,i=!1){if(o instanceof d.DyG)return{component:o,name:o.prototype.constructor.name};if(!this.types[o]){if(i)throw new Error(`[Formly Error] The type "${o}" could not be found. Please make sure that is registered through the FormlyModule declaration.`);return null}return this.mergeExtendedType(o),this.types[o]}getMergedField(o={}){const i=this.getType(o.type);if(!i)return;i.defaultOptions&&$(o,i.defaultOptions);const l=i.extends&&this.getType(i.extends).defaultOptions;l&&$(o,l),o?.optionsTypes&&o.optionsTypes.forEach(m=>{const g=this.getType(m).defaultOptions;g&&$(o,g)});const u=this.resolveFieldTypeRef(o);u?.instance?.defaultOptions&&$(o,u.instance.defaultOptions),!o.wrappers&&i.wrappers&&(o.wrappers=[...i.wrappers])}resolveFieldTypeRef(o={}){const i=this.getType(o.type);if(!i)return null;if(!i.component||i._componentRef)return i._componentRef;const{_viewContainerRef:l,_injector:u}=o.options;if(!l||!u)return null;const m=l.createComponent(i.component,{injector:u});Q(i,"_componentRef",m);try{m.destroy()}catch(g){console.error(`An error occurred while destroying the Formly component type "${o.type}"`,g)}return i._componentRef}setWrapper(o){this.wrappers[o.name]=o,o.types&&o.types.forEach(i=>{this.setTypeWrapper(i,o.name)})}getWrapper(o){if(o instanceof d.DyG)return{component:o,name:o.prototype.constructor.name};if(!this.wrappers[o])throw new Error(`[Formly Error] The wrapper "${o}" could not be found. Please make sure that is registered through the FormlyModule declaration.`);return this.wrappers[o]}setTypeWrapper(o,i){this.types[o]||(this.types[o]={}),this.types[o].wrappers||(this.types[o].wrappers=[]),-1===this.types[o].wrappers.indexOf(i)&&this.types[o].wrappers.push(i)}setValidator(o){this.validators[o.name]=o}getValidator(o){if(!this.validators[o])throw new Error(`[Formly Error] The validator "${o}" could not be found. Please make sure that is registered through the FormlyModule declaration.`);return this.validators[o]}addValidatorMessage(o,i){this.messages[o]=i}getValidatorMessage(o){return this.messages[o]}setSortedExtensions(o){o.forEach(i=>{const l=i.priority??1;this.extensionsByPriority[l]={...this.extensionsByPriority[l],[i.name]:i.extension}}),this.extensions=Object.keys(this.extensionsByPriority).map(Number).sort((i,l)=>i-l).reduce((i,l)=>({...i,...this.extensionsByPriority[l]}),{})}mergeExtendedType(o){if(!this.types[o].extends)return;const i=this.getType(this.types[o].extends);this.types[o].component||(this.types[o].component=i.component),this.types[o].wrappers||(this.types[o].wrappers=i.wrappers)}}return c.\u0275fac=function(o){return new(o||c)},c.\u0275prov=d.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),ae=(()=>{class c{constructor(o,i,l,u){this.config=o,this.injector=i,this.viewContainerRef=l,this.parentForm=u}buildForm(o,i=[],l,u){this.build({fieldGroup:i,model:l,form:o,options:u})}build(o){if(!this.config.extensions.core)throw new Error("NgxFormly: missing `forRoot()` call. use `forRoot()` when registering the `FormlyModule`.");o.parent?this._build(o):(this._setOptions(o),function I(c,r){const o=c._updateTreeValidity.bind(c);c._updateTreeValidity=()=>{},r(),c._updateTreeValidity=o}(o.form,()=>{this._build(o);const i=o.options;i.checkExpressions?.(o,!0),i.detectChanges?.(o)}))}_build(o){if(!o)return;const i=Object.values(this.config.extensions);i.forEach(l=>l.prePopulate?.(o)),i.forEach(l=>l.onPopulate?.(o)),o.fieldGroup?.forEach(l=>this._build(l)),i.forEach(l=>l.postPopulate?.(o))}_setOptions(o){o.form=o.form||new e.cw({}),o.model=o.model||{},o.options=o.options||{};const i=o.options;i._viewContainerRef||Q(i,"_viewContainerRef",this.viewContainerRef),i._injector||Q(i,"_injector",this.injector),i.build||(i._buildForm=()=>{console.warn("Formly: 'options._buildForm' is deprecated since v6.0, use 'options.build' instead."),this.build(o)},i.build=(l=o)=>(this.build(l),l)),!i.parentForm&&this.parentForm&&(Q(i,"parentForm",this.parentForm),j(i,["parentForm","submitted"],({firstChange:l})=>{l||(i.checkExpressions(o),i.detectChanges(o))}))}}return c.\u0275fac=function(o){return new(o||c)(d.LFG(ee),d.LFG(d.zs3),d.LFG(d.s_b,8),d.LFG(e.sg,8))},c.\u0275prov=d.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();function ge(c,r=!1){const o=c.formControl,i=o._fields?o._fields.indexOf(c):-1;-1!==i&&o._fields.splice(i,1);const l=o.parent;if(!l)return;const u={emitEvent:r};if(l instanceof e.Oe){const m=l.controls.findIndex(g=>g===o);-1!==m&&l.removeAt(m,u)}else if(l instanceof e.cw){const m=D(c),g=m[m.length-1];l.get([g])===o&&l.removeControl(g,u)}o.setParent(null)}function be(c){return c.formControl?c.formControl:!1===c.shareFormControl?null:c.form?.get(D(c))}function _e(c,r,o=!1){if((r=r||c.formControl)._fields||Q(r,"_fields",[]),-1===r._fields.indexOf(c)&&r._fields.push(c),!c.formControl&&r){Q(c,"formControl",r),r.setValidators(null),r.setAsyncValidators(null),c.props.disabled=!!c.props.disabled;const g=j(c,["props","disabled"],({firstChange:A,currentValue:R})=>{A||(R?c.formControl.disable():c.formControl.enable())});r instanceof e.NI&&r.registerOnDisabledChange(g.setValue)}if(!c.form||!w(c))return;let i=c.form;const l=D(c),u=H(c);(!z(r.value)||!z(u))&&r.value!==u&&r instanceof e.NI&&r.patchValue(u);for(let g=0;g<l.length-1;g++){const A=l[g];i.get([A])||i.setControl(A,new e.cw({}),{emitEvent:o}),i=i.get([A])}const m=l[l.length-1];!c._hide&&i.get([m])!==r&&i.setControl(m,r,{emitEvent:o})}function ce(c,r=!1){const o=c.status,i=c.value;c.updateValueAndValidity({emitEvent:!1,onlySelf:r}),o!==c.status&&c.statusChanges.emit(c.status),i!==c.value&&c.valueChanges.emit(c.value)}function Ce(c){delete c?._fields,c.setValidators(null),c.setAsyncValidators(null),(c instanceof e.cw||c instanceof e.Oe)&&Object.values(c.controls).forEach(r=>Ce(r))}let ke=(()=>{class c{constructor(o){this.ref=o}ngOnChanges(){this.name=this.name||"formly-group"}}return c.\u0275fac=function(o){return new(o||c)(d.Y36(d.Rgc))},c.\u0275dir=d.lG2({type:c,selectors:[["","formlyTemplate",""]],inputs:{name:["formlyTemplate","name"]},features:[d.TTD]}),c})(),ye=(()=>{class c{}return c.\u0275fac=function(o){return new(o||c)},c.\u0275prov=d.Yz7({token:c,factory:c.\u0275fac}),c})(),Fe=(()=>{class c{constructor(o,i,l,u,m){this.config=o,this.renderer=i,this._elementRef=l,this.hostContainerRef=u,this.form=m,this.hostObservers=[],this.componentRefs=[],this.hooksObservers=[],this.detectFieldBuild=!1,this.valueChangesUnsubscribe=()=>{}}get containerRef(){return this.config.extras.renderFormlyFieldElement?this.viewContainerRef:this.hostContainerRef}get elementRef(){return this.config.extras.renderFormlyFieldElement?this._elementRef:this.componentRefs?.[0]instanceof d.UuU?this.componentRefs[0].location:null}ngAfterContentInit(){this.triggerHook("afterContentInit")}ngAfterViewInit(){this.triggerHook("afterViewInit")}ngDoCheck(){this.detectFieldBuild&&this.field&&this.field.options&&this.render()}ngOnInit(){this.triggerHook("onInit")}ngOnChanges(o){this.triggerHook("onChanges",o)}ngOnDestroy(){this.resetRefs(this.field),this.hostObservers.forEach(o=>o.unsubscribe()),this.hooksObservers.forEach(o=>o()),this.valueChangesUnsubscribe(),this.triggerHook("onDestroy")}renderField(o,i,l=[]){if(this.containerRef===o&&(this.resetRefs(this.field),this.containerRef.clear(),l=this.field?.wrappers),l?.length>0){const[u,...m]=l,{component:g}=this.config.getWrapper(u),A=o.createComponent(g);this.attachComponentRef(A,i),j(A.instance,["fieldComponent"],({currentValue:R,previousValue:S,firstChange:re})=>{if(R){if(S&&S._lContainer===R._lContainer)return;const ie=S?S.detach():null;ie&&!ie.destroyed?R.insert(ie):this.renderField(R,i,m),!re&&A.changeDetectorRef.detectChanges()}})}else if(i?.type){const u=this.form?.templates?.find(g=>g.name===i.type);let m;if(u)m=o.createEmbeddedView(u.ref,{$implicit:i});else{const{component:g}=this.config.getType(i.type,!0);m=o.createComponent(g)}this.attachComponentRef(m,i)}}triggerHook(o,i){if(("onInit"===o||"onChanges"===o&&i.field&&!i.field.firstChange)&&(this.valueChangesUnsubscribe=this.fieldChanges(this.field)),this.field?.hooks?.[o]&&(!i||i.field)){const l=this.field.hooks[o](this.field);if((0,C.b)(l)&&-1!==["onInit","afterContentInit","afterViewInit"].indexOf(o)){const u=l.subscribe();this.hooksObservers.push(()=>u.unsubscribe())}}"onChanges"===o&&i.field&&(this.resetRefs(i.field.previousValue),this.render())}attachComponentRef(o,i){this.componentRefs.push(o),i._componentRefs.push(o),o instanceof d.UuU&&Object.assign(o.instance,{field:i})}render(){if(this.field){if(!this.field.options)return void(this.detectFieldBuild=!0);this.detectFieldBuild=!1,this.hostObservers.forEach(o=>o.unsubscribe()),this.hostObservers=[j(this.field,["hide"],({firstChange:o,currentValue:i})=>{const l=this.containerRef;!1===this.config.extras.lazyRender?(o&&this.renderField(l,this.field),(!o||o&&i)&&this.elementRef&&this.renderer.setStyle(this.elementRef.nativeElement,"display",i?"none":"")):i?(l.clear(),this.field.className&&this.renderer.removeAttribute(this.elementRef.nativeElement,"class")):(this.renderField(l,this.field),this.field.className&&this.renderer.setAttribute(this.elementRef.nativeElement,"class",this.field.className)),!o&&this.field.options.detectChanges(this.field)}),j(this.field,["className"],({firstChange:o,currentValue:i})=>{(!o||o&&i)&&(!this.config.extras.lazyRender||!0!==this.field.hide)&&this.elementRef&&this.renderer.setAttribute(this.elementRef.nativeElement,"class",i)}),...["touched","pristine","status"].map(o=>j(this.field,["formControl",o],({firstChange:i})=>!i&&ve(this.field)))]}}resetRefs(o){o&&(o._localFields?o._localFields=[]:Q(this.field,"_localFields",[]),o._componentRefs?o._componentRefs=o._componentRefs.filter(i=>-1===this.componentRefs.indexOf(i)):Q(this.field,"_componentRefs",[])),this.componentRefs=[]}fieldChanges(o){if(this.valueChangesUnsubscribe(),!o)return()=>{};const i=[he(o,["props"],()=>o.options.detectChanges(o))];o.options&&i.push(he(o.options,["formState"],()=>o.options.detectChanges(o)));for(const u of Object.keys(o._expressions||{})){const m=j(o,["_expressions",u],({currentValue:g,previousValue:A})=>{A?.subscription&&(A.subscription.unsubscribe(),A.subscription=null),(0,C.b)(g.value$)&&(g.subscription=g.value$.subscribe())});i.push(()=>{o._expressions[u]?.subscription&&o._expressions[u].subscription.unsubscribe(),m.unsubscribe()})}for(const u of[["focus"],["template"],["fieldGroupClassName"],["validation","show"]]){const m=j(o,u,({firstChange:g})=>!g&&o.options.detectChanges(o));i.push(()=>m.unsubscribe())}if(o.formControl&&!o.fieldGroup){const u=o.formControl;let m=u.valueChanges.pipe((0,ne.x)((S,re)=>!(S!==re||Array.isArray(S)||G(S))));u.value!==H(o)&&(m=m.pipe((0,K.O)(u.value)));const{updateOn:g,debounce:A}=o.modelOptions;(!g||"change"===g)&&A?.default>0&&(m=u.valueChanges.pipe((0,X.b)(A.default)));const R=m.subscribe(S=>{u._fields?.length>1&&u instanceof e.NI&&u.patchValue(S,{emitEvent:!1,onlySelf:!0}),o.parsers?.forEach(re=>S=re(S)),S===o.formControl.value?(w(o)&&V(o,S),o.options.fieldChanges.next({value:S,field:o,type:"valueChanges"})):o.formControl.setValue(S)});i.push(()=>R.unsubscribe())}let l=[];return j(o,["_localFields"],({currentValue:u})=>{l.forEach(m=>m()),l=(u||[]).map(m=>this.fieldChanges(m))}),()=>{i.forEach(u=>u()),l.forEach(u=>u())}}}return c.\u0275fac=function(o){return new(o||c)(d.Y36(ee),d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(d.s_b),d.Y36(ye,8))},c.\u0275cmp=d.Xpm({type:c,selectors:[["formly-field"]],viewQuery:function(o,i){if(1&o&&d.Gf(h,7,d.s_b),2&o){let l;d.iGM(l=d.CRH())&&(i.viewContainerRef=l.first)}},inputs:{field:"field"},features:[d.TTD],decls:2,vars:0,consts:[["container",""]],template:function(o,i){1&o&&d.YNc(0,y,0,0,"ng-template",null,0,d.W1O)},styles:["[_nghost-%COMP%]:empty{display:none}"]}),c})(),De=(()=>{class c{constructor(o,i,l,u){this.builder=o,this.config=i,this.ngZone=l,this.fieldTemplates=u,this.modelChange=new d.vpe,this.field={type:"formly-group"},this._modelChangeValue={},this.valueChangesUnsubscribe=()=>{}}set form(o){this.field.form=o}get form(){return this.field.form}set model(o){this.config.extras.immutable&&this._modelChangeValue===o||this.setField({model:o})}get model(){return this.field.model}set fields(o){this.setField({fieldGroup:o})}get fields(){return this.field.fieldGroup}set options(o){this.setField({options:o})}get options(){return this.field.options}set templates(o){this.fieldTemplates.templates=o}ngDoCheck(){"changeDetectionCheck"===this.config.extras.checkExpressionOn&&this.checkExpressionChange()}ngOnChanges(o){o.fields&&this.form&&Ce(this.form),(o.fields||o.form||o.model&&this._modelChangeValue!==o.model.currentValue)&&(this.valueChangesUnsubscribe(),this.builder.build(this.field),this.valueChangesUnsubscribe=this.valueChanges())}ngOnDestroy(){this.valueChangesUnsubscribe()}checkExpressionChange(){this.field.options.checkExpressions?.(this.field)}valueChanges(){this.valueChangesUnsubscribe();const o=this.field.options.fieldChanges.pipe((0,L.h)(({field:i,type:l})=>w(i)&&"valueChanges"===l),(0,M.w)(()=>this.ngZone.onStable.asObservable().pipe((0,_.q)(1)))).subscribe(()=>this.ngZone.runGuarded(()=>{this.checkExpressionChange(),this.modelChange.emit(this._modelChangeValue=N(this.model))}));return()=>o.unsubscribe()}setField(o){this.config.extras.immutable?this.field={...this.field,...N(o)}:Object.keys(o).forEach(i=>this.field[i]=o[i])}}return c.\u0275fac=function(o){return new(o||c)(d.Y36(ae),d.Y36(ee),d.Y36(d.R0b),d.Y36(ye))},c.\u0275cmp=d.Xpm({type:c,selectors:[["formly-form"]],contentQueries:function(o,i,l){if(1&o&&d.Suo(l,ke,4),2&o){let u;d.iGM(u=d.CRH())&&(i.templates=u)}},inputs:{form:"form",model:"model",fields:"fields",options:"options"},outputs:{modelChange:"modelChange"},features:[d._Bn([ae,ye]),d.TTD],decls:1,vars:1,consts:[[3,"field"]],template:function(o,i){1&o&&d._UZ(0,"formly-field",0),2&o&&d.Q6J("field",i.field)},dependencies:[Fe],encapsulation:2,changeDetection:0}),c})(),Ie=(()=>{class c{constructor(o,i,l){this.renderer=o,this.elementRef=i,this.uiAttributesCache={},this.uiEvents={listeners:[],events:["click","keyup","keydown","keypress","focus","blur","change"],callback:(u,m)=>{switch(u){case"focus":return this.onFocus(m);case"blur":return this.onBlur(m);case"change":return this.onChange(m);default:return this.props[u](this.field,m)}}},this.document=l}get props(){return this.field.props||{}}get fieldAttrElements(){return this.field?._elementRefs||[]}ngOnChanges(o){o.field&&(this.field.name&&this.setAttribute("name",this.field.name),this.uiEvents.listeners.forEach(i=>i()),this.uiEvents.events.forEach(i=>{(this.props?.[i]||-1!==["focus","blur","change"].indexOf(i))&&this.uiEvents.listeners.push(this.renderer.listen(this.elementRef.nativeElement,i,l=>this.uiEvents.callback(i,l)))}),this.props?.attributes&&j(this.field,["props","attributes"],({currentValue:i,previousValue:l})=>{l&&Object.keys(l).forEach(u=>this.removeAttribute(u)),i&&Object.keys(i).forEach(u=>{null!=i[u]&&this.setAttribute(u,i[u])})}),this.detachElementRef(o.field.previousValue),this.attachElementRef(o.field.currentValue),1===this.fieldAttrElements.length&&(!this.id&&this.field.id&&this.setAttribute("id",this.field.id),this.focusObserver=j(this.field,["focus"],({currentValue:i})=>{this.toggleFocus(i)}))),o.id&&this.setAttribute("id",this.id)}ngDoCheck(){if(!this.uiAttributes){const o=this.elementRef.nativeElement;this.uiAttributes=[...B,"tabindex","placeholder","readonly","disabled","step"].filter(i=>!o.hasAttribute||!o.hasAttribute(i))}this.uiAttributes.forEach(o=>{const i=this.props[o];this.uiAttributesCache[o]!==i&&(!this.props.attributes||!this.props.attributes.hasOwnProperty(o.toLowerCase()))&&(this.uiAttributesCache[o]=i,i||0===i?this.setAttribute(o,!0===i?o:`${i}`):this.removeAttribute(o))})}ngOnDestroy(){this.uiEvents.listeners.forEach(o=>o()),this.detachElementRef(this.field),this.focusObserver?.unsubscribe()}toggleFocus(o){const i=this.fieldAttrElements?this.fieldAttrElements[0]:null;if(!i||!i.nativeElement.focus)return;const l=!!this.document.activeElement&&this.fieldAttrElements.some(({nativeElement:u})=>this.document.activeElement===u||u.contains(this.document.activeElement));o&&!l?Promise.resolve().then(()=>i.nativeElement.focus()):!o&&l&&Promise.resolve().then(()=>i.nativeElement.blur())}onFocus(o){this.focusObserver?.setValue(!0),this.props.focus?.(this.field,o)}onBlur(o){this.focusObserver?.setValue(!1),this.props.blur?.(this.field,o)}onHostChange(o){o instanceof Event||this.onChange(o)}onChange(o){this.props.change?.(this.field,o),this.field.formControl?.markAsDirty()}attachElementRef(o){o&&(-1===o._elementRefs?.indexOf(this.elementRef)?o._elementRefs.push(this.elementRef):Q(o,"_elementRefs",[this.elementRef]))}detachElementRef(o){const i=o?._elementRefs?this.fieldAttrElements.indexOf(this.elementRef):-1;-1!==i&&o._elementRefs.splice(i,1)}setAttribute(o,i){this.renderer.setAttribute(this.elementRef.nativeElement,o,i)}removeAttribute(o){this.renderer.removeAttribute(this.elementRef.nativeElement,o)}}return c.\u0275fac=function(o){return new(o||c)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(x.K0))},c.\u0275dir=d.lG2({type:c,selectors:[["","formlyAttributes",""]],hostBindings:function(o,i){1&o&&d.NdJ("change",function(u){return i.onHostChange(u)})},inputs:{field:["formlyAttributes","field"],id:"id"},features:[d.TTD]}),c})(),pe=(()=>{class c{constructor(){this.field={}}set controls(o){this.field._localFields=o.map(l=>l.control._fields||[]).flat().filter(l=>l.formControl!==this.field.formControl)}get model(){return this.field.model}get form(){return this.field.form}get options(){return this.field.options}get key(){return this.field.key}get formControl(){return this.field.formControl}get props(){return this.field.props||{}}get to(){return this.props}get showError(){return this.options.showError(this)}get id(){return this.field.id}get formState(){return this.options?.formState||{}}}return c.\u0275fac=function(o){return new(o||c)},c.\u0275dir=d.lG2({type:c,viewQuery:function(o,i){if(1&o&&d.Gf(e.a5,5),2&o){let l;d.iGM(l=d.CRH())&&(i.controls=l)}},inputs:{field:"field"}}),c})(),Je=(()=>{class c extends pe{}return c.\u0275fac=function(){let r;return function(i){return(r||(r=d.n5z(c)))(i||c)}}(),c.\u0275cmp=d.Xpm({type:c,selectors:[["formly-group"]],hostVars:2,hostBindings:function(o,i){2&o&&d.Tol(i.field.fieldGroupClassName||"")},features:[d.qOj],ngContentSelectors:E,decls:2,vars:1,consts:[[3,"field",4,"ngFor","ngForOf"],[3,"field"]],template:function(o,i){1&o&&(d.F$t(),d.YNc(0,k,1,1,"formly-field",0),d.Hsn(1)),2&o&&d.Q6J("ngForOf",i.field.fieldGroup)},dependencies:[Fe,x.sg],encapsulation:2,changeDetection:0}),c})(),Pe=(()=>{class c{constructor(o){this.config=o}ngOnChanges(){const o=B.map(i=>`templateOptions.${i}`);this.errorMessage$=(0,b.T)(this.field.formControl.statusChanges,this.field.options?this.field.options.fieldChanges.pipe((0,L.h)(({field:i,type:l,property:u})=>i===this.field&&"expressionChanges"===l&&(-1!==u.indexOf("validation")||-1!==o.indexOf(u)))):(0,te.of)(null)).pipe((0,K.O)(null),(0,M.w)(()=>(0,C.b)(this.errorMessage)?this.errorMessage:(0,te.of)(this.errorMessage)))}get errorMessage(){const o=this.field.formControl;for(const i in o.errors)if(o.errors.hasOwnProperty(i)){let l=this.config.getValidatorMessage(i);if(G(o.errors[i])){if(o.errors[i].errorPath)return;o.errors[i].message&&(l=o.errors[i].message)}return this.field.validation?.messages?.[i]&&(l=this.field.validation.messages[i]),this.field.validators?.[i]?.message&&(l=this.field.validators[i].message),this.field.asyncValidators?.[i]?.message&&(l=this.field.asyncValidators[i].message),"function"==typeof l?l(o.errors[i],this.field):l}}}return c.\u0275fac=function(o){return new(o||c)(d.Y36(ee))},c.\u0275cmp=d.Xpm({type:c,selectors:[["formly-validation-message"]],inputs:{field:"field"},features:[d.TTD],decls:2,vars:3,template:function(o,i){1&o&&(d._uU(0),d.ALo(1,"async")),2&o&&d.Oqu(d.lcZ(1,1,i.errorMessage$))},dependencies:[x.Ov],encapsulation:2,changeDetection:0}),c})(),Se=(()=>{class c extends pe{onPopulate(o){w(o)&&_e(o,be(o)||new e.Oe([],{updateOn:o.modelOptions.updateOn})),o.fieldGroup=o.fieldGroup||[];const i=Array.isArray(o.model)?o.model.length:0;if(o.fieldGroup.length>i)for(let l=o.fieldGroup.length-1;l>=i;--l)ge(o.fieldGroup[l],!0),o.fieldGroup.splice(l,1);for(let l=o.fieldGroup.length;l<i;l++){const u={...N("function"==typeof o.fieldArray?o.fieldArray(o):o.fieldArray),key:`${l}`};o.fieldGroup.push(u)}}add(o,i,{markAsDirty:l}={markAsDirty:!0}){o=o??this.field.fieldGroup.length,this.model||V(this.field,[]),this.model.splice(o,0,i?N(i):void 0),this._build(),l&&this.formControl.markAsDirty()}remove(o,{markAsDirty:i}={markAsDirty:!0}){this.model.splice(o,1);const l=this.field.fieldGroup[o];this.field.fieldGroup.splice(o,1),this.field.fieldGroup.forEach((u,m)=>u.key=`${m}`),ge(l,!0),this._build(),i&&this.formControl.markAsDirty()}_build(){(this.field.formControl._fields??[this.field]).forEach(i=>this.options.build(i)),this.options.fieldChanges.next({field:this.field,value:H(this.field),type:"valueChanges"})}}return c.\u0275fac=function(){let r;return function(i){return(r||(r=d.n5z(c)))(i||c)}}(),c.\u0275dir=d.lG2({type:c,features:[d.qOj]}),c})(),Qe=(()=>{class c extends pe{set _staticContent(o){this.fieldComponent=o}}return c.\u0275fac=function(){let r;return function(i){return(r||(r=d.n5z(c)))(i||c)}}(),c.\u0275dir=d.lG2({type:c,viewQuery:function(o,i){if(1&o&&(d.Gf(P,5,d.s_b),d.Gf(P,7,d.s_b)),2&o){let l;d.iGM(l=d.CRH())&&(i.fieldComponent=l.first),d.iGM(l=d.CRH())&&(i._staticContent=l.first)}},features:[d.qOj]}),c})(),Ze=(()=>{class c extends pe{constructor(o){super(),this.sanitizer=o,this.innerHtml={}}get template(){return this.field&&this.field.template!==this.innerHtml.template&&(this.innerHtml={template:this.field.template,content:this.props.safeHtml?this.sanitizer.bypassSecurityTrustHtml(this.field.template):this.field.template}),this.innerHtml.content}}return c.\u0275fac=function(o){return new(o||c)(d.Y36(T.H7))},c.\u0275cmp=d.Xpm({type:c,selectors:[["formly-template"]],features:[d.qOj],decls:1,vars:1,consts:[[3,"innerHtml"]],template:function(o,i){1&o&&d._UZ(0,"div",0),2&o&&d.Q6J("innerHtml",i.template,d.oJD)},encapsulation:2,changeDetection:0}),c})();class je{onPopulate(r){if(r._expressions)return;Q(r,"_expressions",{}),j(r,["hide"],({currentValue:i,firstChange:l})=>{Q(r,"_hide",!!i),(!l||l&&!0===i)&&(r.props.hidden=i,r.options._hiddenFieldsForCheck.push(r))}),r.hideExpression&&j(r,["hideExpression"],({currentValue:i})=>{r._expressions.hide=this.parseExpressions(r,"hide","boolean"==typeof i?()=>i:i)});const o=(i,l)=>{"string"==typeof l||me(l)?r._expressions[i]=this.parseExpressions(r,i,l):l instanceof Z.y&&(r._expressions[i]={value$:l.pipe((0,p.b)(u=>{this.evalExpr(r,i,u),r.options.detectChanges(r)}))})};r.expressions=r.expressions||{};for(const i of Object.keys(r.expressions))j(r,["expressions",i],({currentValue:l})=>{o(i,me(l)?(...u)=>l(r,u[3]):l)});r.expressionProperties=r.expressionProperties||{};for(const i of Object.keys(r.expressionProperties))j(r,["expressionProperties",i],({currentValue:l})=>o(i,l))}postPopulate(r){if(!r.parent&&!r.options.checkExpressions){let o=!1;r.options.checkExpressions=(i,l)=>{if(o)return;o=!0;const u=this.checkExpressions(i,l),m=r.options;m._hiddenFieldsForCheck.sort(g=>g.hide?-1:1).forEach(g=>this.changeHideState(g,g.hide,!l)),m._hiddenFieldsForCheck=[],u&&(this.checkExpressions(r),r.options&&r.options.detectChanges&&r.options.detectChanges(r)),o=!1},r.options._checkField=(i,l)=>{console.warn("Formly: 'options._checkField' is deprecated since v6.0, use 'options.checkExpressions' instead."),r.options.checkExpressions(i,l)}}}parseExpressions(r,o,i){let l,u;if(r.parent&&["hide","props.disabled"].includes(o)){const m=g=>"hide"===o?g.hide:g.props.disabled;l=()=>{let g=r.parent;for(;g.parent&&!m(g);)g=g.parent;return m(g)}}return"string"==typeof(i=i||(()=>!1))&&(i=function Le(c,r){try{return Function(...r,`return ${c};`)}catch(o){console.error(o)}}(i,["model","formState","field"])),{callback:m=>{try{const g=function Ue(c,r,o){return"function"==typeof c?c.apply(r,o):!!c}(l?(...A)=>l(r)||i(...A):i,{field:r},[r.model,r.options.formState,r,m]);return!(!m&&(u===g||G(g)&&!(0,C.b)(g)&&JSON.stringify(g)===JSON.stringify(u))||(u=g,this.evalExpr(r,o,g),0))}catch(g){throw g.message=`[Formly Error] [Expression "${o}"] ${g.message}`,g}}}}checkExpressions(r,o=!1){if(!r)return!1;let i=!1;if(r._expressions)for(const l of Object.keys(r._expressions))r._expressions[l].callback?.(o)&&(i=!0);return r.fieldGroup?.forEach(l=>this.checkExpressions(l,o)&&(i=!0)),i}changeDisabledState(r,o){r.fieldGroup&&r.fieldGroup.filter(i=>!i._expressions.hasOwnProperty("props.disabled")).forEach(i=>this.changeDisabledState(i,o)),w(r)&&r.props.disabled!==o&&(r.props.disabled=o)}changeHideState(r,o,i){if(r.fieldGroup&&r.fieldGroup.filter(l=>!l._expressions.hide).forEach(l=>this.changeHideState(l,o,i)),r.formControl&&w(r)){Q(r,"_hide",!(!o&&!r.hide));const l=r.formControl;l._fields?.length>1&&ce(l),!0!==o||l._fields&&!l._fields.every(u=>!!u._hide)?!1===o&&(r.resetOnHide&&!ue(r.defaultValue)&&ue(H(r))&&V(r,r.defaultValue),_e(r,void 0,!0),r.resetOnHide&&r.fieldArray&&r.fieldGroup?.length!==r.model?.length&&r.options.build(r)):(ge(r,!0),i&&r.resetOnHide&&(V(r,void 0),r.formControl.reset({value:void 0,disabled:r.formControl.disabled}),r.options.fieldChanges.next({value:void 0,field:r,type:"valueChanges"}),r.fieldGroup&&r.formControl instanceof e.Oe&&(r.fieldGroup.length=0)))}r.options.fieldChanges&&r.options.fieldChanges.next({field:r,type:"hidden",value:o})}evalExpr(r,o,i){if(0===o.indexOf("model.")){const l=o.replace(/^model\./,""),u=r.fieldGroup?r:r.parent;let m=r?.key===l?r.formControl:r.form.get(l);!m&&r.get(l)&&(m=r.get(l).formControl),V({key:l,parent:u,model:r.model},i),m&&(!z(m.value)||!z(i))&&m.value!==i&&m.patchValue(i)}else{try{let l=r;const u=this._evalExpressionPath(r,o),m=u.length-1;for(let g=0;g<m;g++)l=l[u[g]];l[u[m]]=i}catch(l){throw l.message=`[Formly Error] [Expression "${o}"] ${l.message}`,l}["templateOptions.disabled","props.disabled"].includes(o)&&w(r)&&this.changeDisabledState(r,i)}this.emitExpressionChanges(r,o,i)}emitExpressionChanges(r,o,i){r.options.fieldChanges&&r.options.fieldChanges.next({field:r,type:"expressionChanges",property:o,value:i})}_evalExpressionPath(r,o){if(r._expressions[o]&&r._expressions[o].paths)return r._expressions[o].paths;let i=[];return-1===o.indexOf("[")?i=o.split("."):o.split(/[[\]]{1,2}/).filter(l=>l).forEach(l=>{const u=l.match(/['|"](.*?)['|"]/);u?i.push(u[1]):i.push(...l.split(".").filter(m=>m))}),r._expressions[o]&&(r._expressions[o].paths=i),i}}class Re{constructor(r){this.config=r}onPopulate(r){this.initFieldValidation(r,"validators"),this.initFieldValidation(r,"asyncValidators")}initFieldValidation(r,o){const i=[];if("validators"===o&&!(r.hasOwnProperty("fieldGroup")&&!w(r))&&i.push(this.getPredefinedFieldValidation(r)),r[o])for(const l of Object.keys(r[o]))"validation"===l?i.push(...r[o].validation.map(u=>this.wrapNgValidatorFn(r,u))):i.push(this.wrapNgValidatorFn(r,r[o][l],l));Q(r,"_"+o,i)}getPredefinedFieldValidation(r){let o=[];return B.forEach(i=>j(r,["props",i],({currentValue:l,firstChange:u})=>{o=o.filter(m=>m!==i),null!=l&&!1!==l&&o.push(i),!u&&r.formControl&&ce(r.formControl)})),i=>0===o.length?null:e.kI.compose(o.map(l=>()=>{const u=r.props[l];switch(l){case"required":return e.kI.required(i);case"pattern":return e.kI.pattern(u)(i);case"minLength":const m=e.kI.minLength(u)(i),g=this.config.getValidatorMessage("minlength")||r.validation?.messages?.minlength?"minlength":"minLength";return m?{[g]:m.minlength}:null;case"maxLength":const A=e.kI.maxLength(u)(i),R=this.config.getValidatorMessage("maxlength")||r.validation?.messages?.maxlength?"maxlength":"maxLength";return A?{[R]:A.maxlength}:null;case"min":return e.kI.min(u)(i);case"max":return e.kI.max(u)(i);default:return null}}))(i)}wrapNgValidatorFn(r,o,i){let l;if("string"==typeof o&&(l=N(this.config.getValidator(o))),"object"==typeof o&&o.name&&(l=N(this.config.getValidator(o.name)),o.options&&(l.options=o.options)),"object"==typeof o&&o.expression){const{expression:u,...m}=o;l={name:i,validation:u,options:Object.keys(m).length>0?m:null}}return"function"==typeof o&&(l={name:i,validation:o}),u=>{const m=l.validation(u,r,l.options);return function Ae(c){return!!c&&"function"==typeof c.then}(m)?m.then(g=>this.handleAsyncResult(r,i?!!g:g,l)):(0,C.b)(m)?m.pipe((0,F.U)(g=>this.handleAsyncResult(r,i?!!g:g,l))):this.handleResult(r,i?!!m:m,l)}}handleAsyncResult(r,o,i){return r.options.detectChanges(r),this.handleResult(r,o,i)}handleResult(r,o,{name:i,options:l}){"boolean"==typeof o&&(o=o?null:{[i]:l||!0});const u=r.formControl;return u?._childrenErrors?.[i]?.(),G(o)&&Object.keys(o).forEach(m=>{const g=o[m].errorPath?o[m].errorPath:l?.errorPath,A=g?r.formControl.get(g):null;if(A){const{errorPath:R,...S}=o[m];A.setErrors({...A.errors||{},[m]:S}),!u._childrenErrors&&Q(u,"_childrenErrors",{}),u._childrenErrors[m]=()=>{const{[m]:re,...ie}=A.errors||{};A.setErrors(0===Object.keys(ie).length?null:ie)}}}),o}}class Ve{prePopulate(r){this.root||(this.root=r),r.parent&&Object.defineProperty(r,"form",{get:()=>r.parent.formControl,configurable:!0})}onPopulate(r){r.hasOwnProperty("fieldGroup")&&!w(r)?Q(r,"formControl",r.form):this.addFormControl(r)}postPopulate(r){if(this.root===r&&(this.root=null,this.setValidators(r)&&r.parent)){let i=r.parent;for(;i;)(w(i)||!i.parent)&&ce(i.formControl,!0),i=i.parent}}addFormControl(r){let o=be(r);if(!r.fieldArray){if(!o){const i={updateOn:r.modelOptions.updateOn};if(r.fieldGroup)o=new e.cw({},i);else{const l=w(r)?H(r):r.defaultValue;o=new e.NI({value:l,disabled:!!r.props.disabled},{...i,initialValueIsDefault:!0})}}_e(r,o)}}setValidators(r,o=!1){!1===o&&w(r)&&r.props?.disabled&&(o=!0);let i=!1;if(r.fieldGroup?.forEach(l=>l&&this.setValidators(l,o)&&(i=!0)),w(r)||!r.parent||!w(r)&&!r.fieldGroup){const{formControl:l}=r;if(l&&(w(r)&&l instanceof e.NI&&(o&&l.enabled&&(l.disable({emitEvent:!1,onlySelf:!0}),i=!0),!o&&l.disabled&&(l.enable({emitEvent:!1,onlySelf:!0}),i=!0)),(null===l.validator||null===l.asyncValidator)&&(l.setValidators(()=>{const u=e.kI.compose(this.mergeValidators(r,"_validators"));return u?u(l):null}),l.setAsyncValidators(()=>{const u=e.kI.composeAsync(this.mergeValidators(r,"_asyncValidators"));return u?u(l):(0,te.of)(null)}),i=!0),i)){ce(l,!0);let u=l.parent;for(let m=1;m<D(r).length;m++)u&&(ce(u,!0),u=u.parent)}}return i}mergeValidators(r,o){const i=[],l=r.formControl;return l?._fields?.length>1?l._fields.filter(u=>!u._hide).forEach(u=>i.push(...u[o])):r[o]&&i.push(...r[o]),r.fieldGroup&&r.fieldGroup.filter(u=>u?.fieldGroup&&!w(u)).forEach(u=>i.push(...this.mergeValidators(u,o))),i}}class Ne{constructor(r){this.config=r,this.formId=0}prePopulate(r){const o=r.parent;this.initRootOptions(r),this.initFieldProps(r),o&&(Object.defineProperty(r,"options",{get:()=>o.options,configurable:!0}),Object.defineProperty(r,"model",{get:()=>w(r)&&r.fieldGroup?H(r):o.model,configurable:!0})),Object.defineProperty(r,"get",{value:i=>xe(r,i),configurable:!0}),this.getFieldComponentInstance(r).prePopulate?.(r)}onPopulate(r){this.initFieldOptions(r),this.getFieldComponentInstance(r).onPopulate?.(r),r.fieldGroup&&r.fieldGroup.forEach((o,i)=>{o&&(Object.defineProperty(o,"parent",{get:()=>r,configurable:!0}),Object.defineProperty(o,"index",{get:()=>i,configurable:!0})),this.formId++})}postPopulate(r){this.getFieldComponentInstance(r).postPopulate?.(r)}initFieldProps(r){r.props??(r.props=r.templateOptions),Object.defineProperty(r,"templateOptions",{get:()=>r.props,set:o=>r.props=o,configurable:!0})}initRootOptions(r){if(r.parent)return;const o=r.options;r.options.formState=r.options.formState||{},o.showError||(o.showError=this.config.extras.showError),o.fieldChanges||Q(o,"fieldChanges",new W.x),o._hiddenFieldsForCheck||(o._hiddenFieldsForCheck=[]),o._markForCheck=i=>{console.warn("Formly: 'options._markForCheck' is deprecated since v6.0, use 'options.detectChanges' instead."),o.detectChanges(i)},o.detectChanges=i=>{i._componentRefs&&(i.options.checkExpressions(i),ve(i)),i.fieldGroup?.forEach(l=>l&&o.detectChanges(l))},o.resetModel=i=>{i=N(i??o._initialModel),r.model&&(Object.keys(r.model).forEach(l=>delete r.model[l]),Object.assign(r.model,i||{})),o.build(r),r.form.reset(r.model),o.parentForm&&o.parentForm.control===r.formControl&&(o.parentForm.submitted=!1)},o.updateInitialValue=i=>o._initialModel=N(i??r.model),r.options.updateInitialValue()}initFieldOptions(r){if($(r,{id:U(`formly_${this.formId}`,r,r.index),hooks:{},modelOptions:{},validation:{messages:{}},props:r.type&&w(r)?{label:"",placeholder:"",disabled:!1}:{}}),this.config.extras.resetFieldOnHide&&!1!==r.resetOnHide&&(r.resetOnHide=!0),"formly-template"!==r.type&&(r.template||r.expressions?.template||r.expressionProperties?.template)&&(r.type="formly-template"),!r.type&&r.fieldGroup&&(r.type="formly-group"),r.type&&this.config.getMergedField(r),w(r)&&!ue(r.defaultValue)&&ue(H(r))){const o=l=>l.hide||l.expressions?.hide||l.hideExpression;let i=!r.resetOnHide||!o(r);if(!o(r)&&r.resetOnHide){let l=r.parent;for(;l&&!o(l);)l=l.parent;i=!l||!o(l)}i&&V(r,r.defaultValue)}r.wrappers=r.wrappers||[]}getFieldComponentInstance(r){const o=()=>{let i=this.config.resolveFieldTypeRef(r);const l=r._componentRefs?.slice(-1)[0];return l instanceof d.UuU&&l?.componentType===i?.componentType&&(i=l),i?.instance};return r._proxyInstance||Q(r,"_proxyInstance",new Proxy({},{get:(i,l)=>o()?.[l],set:(i,l,u)=>o()[l]=u})),r._proxyInstance}}function Oe(c){return{types:[{name:"formly-group",component:Je},{name:"formly-template",component:Ze}],extensions:[{name:"core",extension:new Ne(c),priority:-250},{name:"field-validation",extension:new Re(c),priority:-200},{name:"field-form",extension:new Ve,priority:-150},{name:"field-expression",extension:new je,priority:-100}]}}let Ye=(()=>{class c{constructor(o,i=[]){i&&i.forEach(l=>o.addConfig(l))}static forRoot(o={}){return{ngModule:c,providers:[{provide:le,multi:!0,useFactory:Oe,deps:[ee]},{provide:le,useValue:o,multi:!0},ee,ae]}}static forChild(o={}){return{ngModule:c,providers:[{provide:le,multi:!0,useFactory:Oe,deps:[ee]},{provide:le,useValue:o,multi:!0},ae]}}}return c.\u0275fac=function(o){return new(o||c)(d.LFG(ee),d.LFG(le,8))},c.\u0275mod=d.oAB({type:c}),c.\u0275inj=d.cJS({imports:[[x.ez]]}),c})()}}]);