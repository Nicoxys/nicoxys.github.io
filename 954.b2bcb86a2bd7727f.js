"use strict";(self.webpackChunkpages=self.webpackChunkpages||[]).push([[954],{954:(D,y,a)=>{a.r(y),a.d(y,{ScriptMainModule:()=>_e});var Z=a(9090),l=a(6814),p=a(6223),P=a(2630),M=a(7535),S=a(4610),u=a(3946),C=a(8109),_=a(342),x=a(7228),m=a(3038),h=a(5778),t=a(5879);let b=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[_.Iq,l.ez,x.$,M.q,u.lQ,C.Bz,m.G,h.g]}),n})();var g=a(5861),v=a(7165),O=a(1410),d=a(3729),R=a(463),f=a(4064);let F=(()=>{class n{constructor(e){this.preferencesService=e,this.acceptedOptionsValues={type:["card","list"],orderBy:["az","date","installed"],reverse:[!0,!1],installedFirst:[!0,!1],ffmobileFirst:[!0,!1]}}get options(){const e=this.preferencesService.getItem(v.Ye.SCRIPT_LAYOUT_OPTIONS);return e&&this.checkOptions(e)?e:f.Hc}set options(e){this.preferencesService.setItem(v.Ye.SCRIPT_LAYOUT_OPTIONS,e)}checkOptions(e){for(const i of Object.keys(f.Hc))if(!e.hasOwnProperty(i)||!this.acceptedOptionsValues[i].includes(e[i]))return!1;return!0}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(R.y))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var E=a(9121),A=a(9246),J=a(4143),Y=a(2986),j=a(5245),H=a(2983),K=a(3285),G=a(146),$=a(4929),U=a(1378),w=a(5661),L=a(4020),N=a(8277);const W=["app-script-buttons",""],z=function(n){return{"me-2":n}},V=function(n){return["settings",n]};function X(n,r){if(1&n&&(t.TgZ(0,"button",4),t.NdJ("click",function(i){return i.stopPropagation()}),t._uU(1,"Impostazioni"),t.qZA()),2&n){const e=t.oxw(2);t.Q6J("ngClass",t.VKq(2,z,e.canManage))("routerLink",t.VKq(4,V,e.script.scriptId))}}function tt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",5),t.NdJ("click",function(s){t.CHM(e);const o=t.oxw(2);return t.KtG(o.isParent&&o.show(s,o.isParentMessage))}),t.TgZ(1,"button",6),t.NdJ("click",function(s){t.CHM(e);const o=t.oxw(2);return t.KtG(o.emitClick(s,o.actionEnum.UNINSTALL))}),t._uU(2,"Disinstalla"),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("disabled",e.disabled||e.isParent)}}function et(n,r){if(1&n&&(t.ynx(0),t.YNc(1,X,2,6,"button",2),t.YNc(2,tt,3,1,"div",3),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",("{}"!==e.script.settings_schema||e.hasSandbox)&&e.canEdit),t.xp6(1),t.Q6J("ngIf",e.canManage)}}function it(n,r){if(1&n&&(t.TgZ(0,"a",8),t.NdJ("click",function(i){return i.stopPropagation()}),t._uU(1,"Guida"),t.qZA()),2&n){const e=t.oxw(2);t.s9C("href",e.script.public_link,t.LSH),t.Q6J("ngClass",t.VKq(2,z,e.canManage))}}const nt=function(n){return{"shake-it":n}};function st(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",5),t.NdJ("click",function(s){t.CHM(e);const o=t.oxw(2);return t.KtG(o.needParent&&o.show(s,o.needParentMessage))}),t.TgZ(1,"button",9),t.NdJ("click",function(s){t.CHM(e);const o=t.oxw(2);return t.KtG(o.emitClick(s,o.actionEnum.INSTALL))}),t._uU(2,"Installa"),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngClass",t.VKq(2,nt,e.highlighted))("disabled",e.disabled||e.needParent)}}function rt(n,r){if(1&n&&(t.YNc(0,it,2,4,"a",7),t.YNc(1,st,3,4,"div",3)),2&n){const e=t.oxw();t.Q6J("ngIf",e.script.public_link),t.xp6(1),t.Q6J("ngIf",e.canManage)}}let k=(()=>{class n{constructor(e,i){this.scriptManagerService=e,this.toastService=i,this.installed=!1,this.disabled=!1,this.highlighted=!1,this.canManage=!0,this.canEdit=!0,this.needParent=!1,this.isParent=!1,this.actionEnum=d.n0,this.needParentMessage="Prima assicurati di aver <strong>installato <u>tutti</u></strong> i seguenti script: ",this.isParentMessage="Prima assicurati di aver <strong>disinstallato <u>tutti</u></strong> i seguenti script: ",this.hasSandbox=!1}ngOnInit(){this.needParentMessage+=this.script.parentNameList.join(", ")+"!",this.isParentMessage+=this.script.childNameList.join(", ")+"!",this.hasSandbox=this.script.js_sandboxes.filter(e=>e.inSettings).length>0}emitClick(e,i){e.stopPropagation(),!(this.needParent&&i===d.n0.INSTALL||this.isParent&&i===d.n0.UNINSTALL)&&this.scriptManagerService.pushButtonEvent(this.script.scriptId,i)}show(e,i){e.stopPropagation(),this.toastService.show({content:i,level:U.m.ERROR})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(A.E),t.Y36(w.k))},n.\u0275cmp=t.Xpm({type:n,selectors:[["","app-script-buttons",""]],inputs:{installed:"installed",disabled:"disabled",script:"script",highlighted:"highlighted",canManage:"canManage",canEdit:"canEdit",needParent:"needParent",isParent:"isParent"},attrs:W,decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["notInstalledButtons",""],["class","btn btn-primary d-block shadow-none",3,"ngClass","routerLink","click",4,"ngIf"],["class","cursor-pointer",3,"click",4,"ngIf"],[1,"btn","btn-primary","d-block","shadow-none",3,"ngClass","routerLink","click"],[1,"cursor-pointer",3,"click"],[1,"btn","btn-danger","d-block","shadow-none",3,"disabled","click"],["class","btn btn-primary d-block shadow-none","target","_blank",3,"ngClass","href","click",4,"ngIf"],["target","_blank",1,"btn","btn-primary","d-block","shadow-none",3,"ngClass","href","click"],[1,"btn","btn-success","d-block","shadow-none",3,"ngClass","disabled","click"]],template:function(e,i){if(1&e&&(t.YNc(0,et,3,2,"ng-container",0),t.YNc(1,rt,2,2,"ng-template",null,1,t.W1O)),2&e){const s=t.MAs(2);t.Q6J("ngIf",i.installed)("ngIfElse",s)}},dependencies:[l.mk,l.O5,C.rH],styles:[".btn[_ngcontent-%COMP%]{padding:.2rem .5rem}.shake-it[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_shake 2s infinite}@keyframes _ngcontent-%COMP%_shake{5%,45%{transform:translate3d(-1px,0,0)}10%,40%{transform:translate3d(2px,0,0)}15%,25%,35%{transform:translate3d(-4px,0,0)}20%,30%{transform:translate3d(4px,0,0)}50%{transform:translateZ(0)}}"]}),n})();var I=a(8595);const ot=["app-script-card-footer",""];function at(n,r){1&n&&(t.TgZ(0,"div",10),t._uU(1," tablet_mac "),t.qZA())}function lt(n,r){1&n&&(t.TgZ(0,"div",10),t._uU(1,"desktop_windows"),t.qZA())}function ct(n,r){if(1&n&&(t.TgZ(0,"li",11)(1,"div",10),t._uU(2," visibility_off "),t.qZA()()),2&n){const e=t.oxw();t.Q6J("tippyProps",e.hiddenTippyProps)}}let pt=(()=>{class n{constructor(e){this.changeDetectorRef=e,this.scriptBaseUrl="",this.isOtherTab=!1,this.directLink="",this.directLinkMessage="",this.layoutList="",this.directLinkTippyProps={offset:[-8,10]},this.layoutTippyProps={offset:[-36,10]},this.hiddenTippyProps={offset:[-60,10]},this.forumLink="",this.forumName="",this.isTouch=L.eX,this.tippyProps={theme:"popover",animation:"shift-away",placement:"top-start",hideOnClick:L.eX},this.directLinkMessages={info:"Copia il link diretto allo script",copied:"Link copiato!"},this.directLinkTimeout=0,this.directLinkTippyProps={...this.tippyProps,...this.directLinkTippyProps},this.layoutTippyProps={...this.tippyProps,...this.layoutTippyProps},this.hiddenTippyProps={...this.tippyProps,...this.hiddenTippyProps}}ngOnInit(){this.directLink=`${this.scriptBaseUrl}?${v.RT.SCRIPT}=${this.script.scriptId}`,this.directLinkMessage=this.isTouch?this.directLinkMessages.copied:this.directLinkMessages.info,this.layoutList=this.createLayoutList(),this.forumLink=this.isOtherTab&&this.dev.otherTabCustom?this.dev.otherTabCustom.url:this.tab.url,this.forumName=this.isOtherTab&&this.dev.otherTabCustom?this.dev.otherTabCustom.name:this.tab.name}changeDirectLinkMessage(){this.isTouch||(this.directLinkMessage=this.directLinkMessages.copied,window.clearTimeout(this.directLinkTimeout),this.directLinkTimeout=window.setTimeout(()=>{this.directLinkMessage=this.directLinkMessages.info,this.changeDetectorRef.detectChanges()},3e3))}createLayoutList(){return"Questo script \xe8 compatibile con layout "+[this.script.old_layout?d.tK.QUIRKS:"",this.script.new_layout?d.tK.STANDARD:"",this.script.mobile?d.tK.FFMOBILE:""].filter(i=>i).join(", ").replace(/, ([^,]*)$/," e $1")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.sBO))},n.\u0275cmp=t.Xpm({type:n,selectors:[["","app-script-card-footer",""]],inputs:{tab:"tab",dev:"dev",script:"script",scriptBaseUrl:"scriptBaseUrl",isOtherTab:"isOtherTab"},attrs:ot,decls:13,vars:13,consts:[[1,"list-unstyled","me-auto","d-flex","align-items-center"],[1,"me-2","cursor-pointer","direct-link",3,"cdkCopyToClipboard","appTippy","tippyProps","click"],[1,"material-icons-outlined","icon-small","d-block"],[1,"cursor-pointer",3,"appTippy","tippyProps"],["class","material-icons-outlined icon-body d-block",4,"ngIf","ngIfElse"],["desktopIcon",""],["class","cursor-pointer ms-2","appTippy","Questo script \xe8 nascosto nella lista. Solo gli utenti abilitati possono visualizzarlo.",3,"tippyProps",4,"ngIf"],[1,"author-nick","me-1"],["target","_blank",1,"text-reset",3,"href","innerText"],[1,"author-forum"],[1,"material-icons-outlined","icon-body","d-block"],["appTippy","Questo script \xe8 nascosto nella lista. Solo gli utenti abilitati possono visualizzarlo.",1,"cursor-pointer","ms-2",3,"tippyProps"]],template:function(e,i){if(1&e&&(t.TgZ(0,"ul",0)(1,"li",1),t.NdJ("click",function(){return i.changeDirectLinkMessage()}),t.TgZ(2,"div",2),t._uU(3,"share"),t.qZA()(),t.TgZ(4,"li",3),t.YNc(5,at,2,0,"div",4),t.YNc(6,lt,2,0,"ng-template",null,5,t.W1O),t.qZA(),t.YNc(8,ct,3,1,"li",6),t.qZA(),t.TgZ(9,"div",7),t._UZ(10,"a",8),t.qZA(),t.TgZ(11,"div",9),t._UZ(12,"a",8),t.qZA()),2&e){const s=t.MAs(7);t.xp6(1),t.Q6J("cdkCopyToClipboard",i.directLink)("appTippy",i.directLinkMessage)("tippyProps",i.directLinkTippyProps),t.xp6(3),t.Q6J("appTippy",i.layoutList)("tippyProps",i.layoutTippyProps),t.xp6(1),t.Q6J("ngIf",i.script.mobile)("ngIfElse",s),t.xp6(3),t.Q6J("ngIf",i.script.hidden_script),t.xp6(2),t.hYB("href","",i.forumLink,"?act=Profile&MID=",i.dev.id,"",t.LSH),t.Q6J("innerText",i.dev.name),t.xp6(2),t.s9C("href",i.forumLink,t.LSH),t.Q6J("innerText",i.forumName)}},dependencies:[_.i3,l.O5,I.$],styles:['@charset "UTF-8";.author-nick[_ngcontent-%COMP%]:after{content:"\\2022";display:inline-block;margin-left:.25rem}']}),n})();var Q=a(7291);function dt(n,r){if(1&n&&(t.TgZ(0,"a",10),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.s9C("href",e.script.public_link,t.LSH),t.xp6(1),t.Oqu(e.script.name)}}function ut(n,r){if(1&n&&t._UZ(0,"div",11),2&n){const e=t.oxw();t.Q6J("innerText",e.script.name)}}const gt=function(n,r,e,i){return{installed:n,highlighted:r,"script-hidden":e,"touch-device":i}},mt=function(n){return{"fst-italic":n}};let ht=(()=>{class n{constructor(){this.installed=!1,this.scriptIdPendingRequest=0,this.highlighted=!1,this.scriptBaseUrl="",this.needParent=!1,this.isParent=!1,this.devs=f.$m,this.tabs=f.yT,this.tabEnum=d.tr,this.defaultPreview="/assets/default_script.png",this.isTouch=L.eX,this.description="",this.descriptionMaxLength=250,this.defaultDescription=f.n5}ngOnInit(){this.description=this.script.sdesc?this.script.sdesc.length>this.descriptionMaxLength?this.cutString(this.script.sdesc,this.descriptionMaxLength)+"...":this.script.sdesc:this.defaultDescription}cutString(e,i){let s=new RegExp("^.{"+i+"}\\w*"),o=e.match(s);return o?o[0].replace(/[^a-zA-Z0-9]*$/g,""):e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-script-card"]],inputs:{script:"script",installed:"installed",scriptIdPendingRequest:"scriptIdPendingRequest",highlighted:"highlighted",scriptBaseUrl:"scriptBaseUrl",permission:"permission",needParent:"needParent",isParent:"isParent"},decls:12,vars:30,consts:[[1,"card","h-100",3,"ngClass"],[1,"card-img-top","overflow-hidden","position-relative","border-bottom"],["appImage","",1,"image-cover",3,"src","alt","srcReplacer"],[1,"card-body","d-flex","flex-column","position-relative"],[1,"card-title"],["class","h5","target","_blank",3,"href",4,"ngIf","ngIfElse"],["noPublicLink",""],[1,"card-text","script-description","text-justify",3,"ngClass","innerHTML"],["app-script-buttons","",1,"d-flex","align-items-center","justify-content-end","mt-auto",3,"installed","disabled","script","highlighted","canEdit","canManage","needParent","isParent"],["app-script-card-footer","",1,"card-footer","text-muted","d-flex","justify-content-end",3,"script","tab","dev","scriptBaseUrl","isOtherTab"],["target","_blank",1,"h5",3,"href"],[1,"h5",3,"innerText"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"img",2),t.ALo(3,"uploadsreplace"),t.qZA(),t.TgZ(4,"div",3)(5,"div",4),t.YNc(6,dt,2,2,"a",5),t.YNc(7,ut,1,1,"ng-template",null,6,t.W1O),t.qZA(),t._UZ(9,"p",7)(10,"div",8),t.qZA(),t._UZ(11,"div",9),t.qZA()),2&e){const s=t.MAs(8);t.Q6J("ngClass",t.l5B(23,gt,i.installed,i.highlighted,i.script.hidden_script,i.isTouch)),t.xp6(2),t.s9C("src",t.lcZ(3,21,i.script.preview),t.LSH),t.MGl("alt","",i.script.name," preview"),t.Q6J("srcReplacer",i.defaultPreview),t.xp6(4),t.Q6J("ngIf",i.script.public_link)("ngIfElse",s),t.xp6(3),t.Q6J("ngClass",t.VKq(28,mt,!i.script.sdesc))("innerHTML",i.description,t.oJD),t.xp6(1),t.Q6J("installed",i.installed)("disabled",i.scriptIdPendingRequest===i.script.scriptId)("script",i.script)("highlighted",i.highlighted)("canEdit",!i.permission||i.permission.edit)("canManage",!i.permission||i.permission.manage)("needParent",i.needParent)("isParent",i.isParent),t.xp6(1),t.Q6J("script",i.script)("tab",i.tabs[i.script.tab])("dev",i.devs[i.script.forum])("scriptBaseUrl",i.scriptBaseUrl)("isOtherTab",i.script.tab===i.tabEnum.OTHER)}},dependencies:[l.mk,l.O5,N.t,k,pt,Q.g],styles:[".card-img-top[_ngcontent-%COMP%]{height:200px}.card-img-top[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:inherit;transition:all .8s ease}.card[_ngcontent-%COMP%]{box-shadow:0 .125rem .25rem #00000013;transition:box-shadow .2s ease-in}.card[_ngcontent-%COMP%]:not(.touch-device):hover{box-shadow:0 .5rem 1rem #00000040}.card[_ngcontent-%COMP%]:not(.touch-device):hover   .card-img-top[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:scale(1.15);opacity:.7}.card.script-hidden[_ngcontent-%COMP%]{background-color:#0000000f}.card.highlighted[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{background-color:#e8d9ff;animation:_ngcontent-%COMP%_card-body-animation 2s infinite}.card.highlighted[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{background-color:#e8d9ff;animation:_ngcontent-%COMP%_card-footer-animation 2s infinite}.card-body[_ngcontent-%COMP%]   .script-description[_ngcontent-%COMP%]{font-size:.9rem}.card-footer[_ngcontent-%COMP%]{font-size:.85rem;padding-left:.75rem}@keyframes _ngcontent-%COMP%_card-body-animation{0%,to{background-color:#e8d9ff}50%{background-color:#fff}}@keyframes _ngcontent-%COMP%_card-footer-animation{0%,to{background-color:#e8d9ff}50%{background-color:#f7f7f7}}"]}),n})();const ft=["app-script-panel-content",""];function _t(n,r){if(1&n&&t._UZ(0,"div",18),2&n){const e=t.oxw();t.Q6J("innerHTML",e.script.sdesc,t.oJD)}}function vt(n,r){if(1&n&&(t.TgZ(0,"li",19)(1,"div",6)(2,"div",20),t._uU(3,"local_library"),t.qZA(),t.TgZ(4,"div")(5,"a",21),t._uU(6,"Guida all'uso"),t.qZA()()()()),2&n){const e=t.oxw();t.xp6(5),t.s9C("href",e.script.public_link,t.LSH)}}const bt=function(){return{theme:"popover",animation:"shift-away"}},Ct=function(n){return{"ms-sm-auto":n}};let Tt=(()=>{class n{constructor(){this.installed=!1,this.scriptIdPendingRequest=0,this.scriptBaseUrl="",this.needParent=!1,this.isParent=!1,this.devs=f.$m,this.tabs=f.yT,this.defaultPreview="/assets/default_script.png",this.directLink="",this.layoutList="",this.forumLink="",this.forumName=""}ngOnInit(){this.directLink=`${this.scriptBaseUrl}?${v.RT.SCRIPT}=${this.script.scriptId}`,this.layoutList=this.createLayoutList(),this.forumLink=this.script.tab===d.tr.OTHER&&this.devs[this.script.forum].otherTabCustom?this.devs[this.script.forum].otherTabCustom.url:this.tabs[this.script.tab].url,this.forumName=this.script.tab===d.tr.OTHER&&this.devs[this.script.forum].otherTabCustom?this.devs[this.script.forum].otherTabCustom.name:this.tabs[this.script.tab].name}createLayoutList(){return[this.script.old_layout?d.tK.QUIRKS:"",this.script.new_layout?d.tK.STANDARD:"",this.script.mobile?d.tK.FFMOBILE:""].filter(i=>i).join(", ").replace(/, ([^,]*)$/," e $1")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["","app-script-panel-content",""]],inputs:{script:"script",installed:"installed",scriptIdPendingRequest:"scriptIdPendingRequest",scriptBaseUrl:"scriptBaseUrl",permission:"permission",needParent:"needParent",isParent:"isParent"},attrs:ft,decls:28,vars:26,consts:[[1,"script-preview","w-100"],["appImage","",1,"image-cover",3,"src","alt","srcReplacer"],[1,"px-3","px-sm-4","py-3"],["class","script-description text-justify px-3 px-sm-4 py-3 rounded fst-italic position-relative mb-3",3,"innerHTML",4,"ngIf"],[1,"script-utilities","list-unstyled","d-flex","flex-wrap","align-items-start"],[1,"mb-2","mb-xl-0"],[1,"d-flex","align-items-center"],[1,"d-block","material-icons","text-success","me-2"],[1,"ms-sm-auto","me-xl-auto","mb-2","mb-xl-0"],["appTippy","Link copiato!","trigger","click",1,"d-flex","align-items-center","cursor-pointer",3,"cdkCopyToClipboard","tippyProps"],[1,"d-block","material-icons","text-danger","me-2"],["class","mb-2 mb-sm-0",4,"ngIf"],[3,"ngClass"],[1,"material-icons-outlined","text-indigo","d-block","me-2"],[1,"author-nick","me-1"],["target","_blank",1,"text-reset",3,"href","innerText"],[1,"author-forum"],["app-script-buttons","",1,"script-buttons","d-md-none","d-flex","justify-content-center","mt-3",3,"installed","disabled","script","canEdit","canManage","needParent","isParent"],[1,"script-description","text-justify","px-3","px-sm-4","py-3","rounded","fst-italic","position-relative","mb-3",3,"innerHTML"],[1,"mb-2","mb-sm-0"],[1,"d-block","material-icons","text-primary","me-2"],["target","_blank",1,"text-reset",3,"href"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"img",1),t.ALo(2,"uploadsreplace"),t.qZA(),t.TgZ(3,"div",2),t.YNc(4,_t,1,1,"div",3),t.TgZ(5,"ul",4)(6,"li",5)(7,"div",6)(8,"div",7),t._uU(9,"task_alt"),t.qZA(),t.TgZ(10,"div"),t._uU(11),t.qZA()()(),t.TgZ(12,"li",8)(13,"div",9)(14,"div",10),t._uU(15,"share"),t.qZA(),t.TgZ(16,"div"),t._uU(17,"Copia il link diretto allo script"),t.qZA()()(),t.YNc(18,vt,7,1,"li",11),t.TgZ(19,"li",12)(20,"div",6)(21,"div",13),t._uU(22,"account_circle"),t.qZA(),t.TgZ(23,"div",14),t._UZ(24,"a",15),t.qZA(),t.TgZ(25,"div",16),t._UZ(26,"a",15),t.qZA()()()(),t._UZ(27,"div",17),t.qZA()),2&e&&(t.xp6(1),t.s9C("src",t.lcZ(2,21,i.script.preview),t.LSH),t.MGl("alt","",i.script.name," preview"),t.Q6J("srcReplacer",i.defaultPreview),t.xp6(3),t.Q6J("ngIf",i.script.sdesc),t.xp6(7),t.hij("Layout: ",i.layoutList,""),t.xp6(2),t.Q6J("cdkCopyToClipboard",i.directLink)("tippyProps",t.DdM(23,bt)),t.xp6(5),t.Q6J("ngIf",i.script.public_link),t.xp6(1),t.Q6J("ngClass",t.VKq(24,Ct,i.script.public_link)),t.xp6(5),t.hYB("href","",i.forumLink,"?act=Profile&MID=",i.devs[i.script.forum].id,"",t.LSH),t.Q6J("innerText",i.devs[i.script.forum].name),t.xp6(2),t.s9C("href",i.forumLink,t.LSH),t.Q6J("innerText",i.forumName),t.xp6(1),t.Q6J("installed",i.installed)("disabled",i.scriptIdPendingRequest===i.script.scriptId)("script",i.script)("canEdit",!i.permission||i.permission.edit)("canManage",!i.permission||i.permission.manage)("needParent",i.needParent)("isParent",i.isParent))},dependencies:[_.i3,l.mk,l.O5,N.t,I.$,k,Q.g],styles:['@charset "UTF-8";.script-preview[_ngcontent-%COMP%]{height:150px}.script-description[_ngcontent-%COMP%]{background-color:#0000000a}.author-nick[_ngcontent-%COMP%]:after{content:"\\2022";display:inline-block;margin-left:.25rem}.script-utilities[_ngcontent-%COMP%]{flex-direction:column}@media (min-width: 576px){.script-utilities[_ngcontent-%COMP%]{flex-direction:row}}@media (min-width: 576px) and (max-width: 1199.98px){.script-utilities[_ngcontent-%COMP%]:before{content:"";width:100%;display:block;order:0}.script-utilities[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-of-type, .script-utilities[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-of-type(2){order:-1}.script-preview[_ngcontent-%COMP%]{height:200px}}@media (min-width: 1200px){.script-preview[_ngcontent-%COMP%]{height:300px}}']}),n})();function yt(n,r){if(1&n&&(t.TgZ(0,"a",10),t.NdJ("click",function(i){return i.stopPropagation()}),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.s9C("href",e.script.public_link,t.LSH),t.xp6(1),t.Oqu(e.script.name)}}function Zt(n,r){if(1&n&&t._UZ(0,"div",11),2&n){const e=t.oxw();t.Q6J("innerText",e.script.name)}}const Pt=function(n,r,e){return{expanded:n,"script-hidden":r,highlighted:e}},Mt=function(n){return{"fst-italic":n}};let St=(()=>{class n{constructor(){this.installed=!1,this.scriptIdPendingRequest=0,this.highlighted=!1,this.scriptBaseUrl="",this.needParent=!1,this.isParent=!1,this.defaultDescription=f.n5,this.isCollapsed=!0}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-script-panel"]],inputs:{script:"script",installed:"installed",scriptIdPendingRequest:"scriptIdPendingRequest",highlighted:"highlighted",scriptBaseUrl:"scriptBaseUrl",permission:"permission",needParent:"needParent",isParent:"isParent"},decls:12,vars:27,consts:[[1,"header-container","d-flex","align-items-center","ps-4","p-3","cursor-pointer",3,"ngClass","click"],[1,"header-info","d-flex","align-items-center","flex-grow-1"],[1,"panel-title","pe-3","pe-xl-0","fw-500"],["class","d-block","target","_blank",3,"href","click",4,"ngIf","ngIfElse"],["noPublicLink",""],[1,"panel-short-description","px-3","flex-grow-1","text-truncate","fs-sm","d-none","d-xl-block",3,"ngClass","innerHTML"],["app-script-buttons","",1,"ms-auto","flex-shrink-0","d-none","d-md-flex",3,"installed","disabled","script","highlighted","canEdit","canManage","needParent","isParent"],[1,"collapse-icon","ms-3","material-icons"],["app-script-panel-content","",1,"content","fs-sm",3,"ngbCollapse","script","installed","scriptIdPendingRequest","scriptBaseUrl","permission","needParent","isParent","ngbCollapseChange"],["collapse","ngbCollapse"],["target","_blank",1,"d-block",3,"href","click"],[3,"innerText"]],template:function(e,i){if(1&e){const s=t.EpF();t.TgZ(0,"div",0),t.NdJ("click",function(){t.CHM(s);const c=t.MAs(11);return t.KtG(c.toggle())}),t.TgZ(1,"div",1)(2,"div",2),t.YNc(3,yt,2,2,"a",3),t.YNc(4,Zt,1,1,"ng-template",null,4,t.W1O),t.qZA(),t._UZ(6,"div",5)(7,"div",6),t.qZA(),t.TgZ(8,"div",7),t._uU(9,"chevron_left"),t.qZA()(),t.TgZ(10,"div",8,9),t.NdJ("ngbCollapseChange",function(c){return i.isCollapsed=c}),t.qZA()}if(2&e){const s=t.MAs(5);t.Q6J("ngClass",t.kEZ(21,Pt,!i.isCollapsed,i.script.hidden_script,i.highlighted)),t.xp6(3),t.Q6J("ngIf",i.script.public_link)("ngIfElse",s),t.xp6(3),t.Q6J("ngClass",t.VKq(25,Mt,!i.script.sdesc))("innerHTML",i.script.sdesc||i.defaultDescription,t.oJD),t.xp6(1),t.Q6J("installed",i.installed)("disabled",i.scriptIdPendingRequest===i.script.scriptId)("script",i.script)("highlighted",i.highlighted)("canEdit",!i.permission||i.permission.edit)("canManage",!i.permission||i.permission.manage)("needParent",i.needParent)("isParent",i.isParent),t.xp6(3),t.Q6J("ngbCollapse",i.isCollapsed)("script",i.script)("installed",i.installed)("scriptIdPendingRequest",i.scriptIdPendingRequest)("scriptBaseUrl",i.scriptBaseUrl)("permission",i.permission)("needParent",i.needParent)("isParent",i.isParent)}},dependencies:[l.mk,l.O5,u._D,k,Tt],styles:[".header-container[_ngcontent-%COMP%]{transition:background-color .3s}.header-container[_ngcontent-%COMP%]:not(.expanded):not(.script-hidden):not(.highlighted):hover{background-color:rgb(var(--bs-light-rgb))}.header-container.highlighted[_ngcontent-%COMP%]{background-color:#e8d9ff;animation:_ngcontent-%COMP%_back-animation 2s infinite}.header-container.script-hidden[_ngcontent-%COMP%]{background-color:#0000000f}.header-container.expanded[_ngcontent-%COMP%]   .collapse-icon[_ngcontent-%COMP%]{transform:rotate(-90deg)}.panel-short-description[_ngcontent-%COMP%]{color:var(--bs-gray-600);transition:color .3s}.expanded[_ngcontent-%COMP%]   .panel-short-description[_ngcontent-%COMP%], .header-container[_ngcontent-%COMP%]:hover   .panel-short-description[_ngcontent-%COMP%]{color:inherit}.header-info[_ngcontent-%COMP%]{min-width:0}.collapse-icon[_ngcontent-%COMP%]{transition:transform .2s;transform:rotate(0)}@keyframes _ngcontent-%COMP%_back-animation{0%,to{background-color:#e8d9ff}50%{background-color:#fff}}@media (min-width: 1200px){.header-info[_ngcontent-%COMP%]   .panel-title[_ngcontent-%COMP%]{flex-shrink:0;margin-bottom:2px}}@media (min-width: 576px){.header-info[_ngcontent-%COMP%]   .panel-title[_ngcontent-%COMP%]{font-size:1.1rem}}"]}),n})();function Ot(n,r){if(1&n&&(t.TgZ(0,"li",null,5),t._UZ(2,"app-script-card",6),t.qZA()),2&n){const e=r.$implicit,i=t.MAs(1),s=t.oxw(3);t.uIk("data-installed",e.installed)("data-ffmobile",e.mobile)("data-justchanged",e.justChanged)("data-highlighted",e.scriptId===s.highlightScriptId),t.xp6(2),t.Q6J("script",e)("installed",e.installed)("highlighted","true"===i.dataset.highlighted)("scriptIdPendingRequest",s.scriptIdPendingRequest)("scriptBaseUrl",s.scriptBaseUrl)("permission",s.data.permissions?s.data.permissions["script"+e.scriptId]:void 0)("needParent",e.needParent)("isParent",e.isParent)}}function xt(n,r){if(1&n&&(t.ynx(0),t.YNc(1,Ot,3,12,"li",4),t.BQk()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.renderScriptList)}}function At(n,r){if(1&n&&(t.TgZ(0,"li",8,5),t._UZ(2,"app-script-panel",6),t.qZA()),2&n){const e=r.$implicit,i=t.MAs(1),s=t.oxw(3);t.uIk("data-installed",e.installed)("data-ffmobile",e.mobile)("data-justchanged",e.justChanged)("data-highlighted",e.scriptId===s.highlightScriptId),t.xp6(2),t.Q6J("script",e)("installed",e.installed)("highlighted","true"===i.dataset.highlighted)("scriptIdPendingRequest",s.scriptIdPendingRequest)("scriptBaseUrl",s.scriptBaseUrl)("permission",s.data.permissions?s.data.permissions["script"+e.scriptId]:void 0)("needParent",e.needParent)("isParent",e.isParent)}}function Ut(n,r){if(1&n&&t.YNc(0,At,3,12,"li",7),2&n){const e=t.oxw(2);t.Q6J("ngForOf",e.renderScriptList)}}const Lt=function(n,r,e,i){return{"installed-first":n,"ffmobile-first":r,"mx-auto list-panel p-0 flat-container":e,"px-3 px-md-0":i}};function kt(n,r){if(1&n&&(t.ynx(0),t.TgZ(1,"ul",2),t.YNc(2,xt,2,1,"ng-container",0),t.YNc(3,Ut,1,1,"ng-template",null,3,t.W1O),t.qZA(),t.BQk()),2&n){const e=t.MAs(4),i=t.oxw();t.xp6(1),t.Q6J("ngClass",t.l5B(3,Lt,i.data.layoutOptions.installedFirst,i.data.layoutOptions.ffmobileFirst,"list"===i.data.layoutOptions.type,"card"===i.data.layoutOptions.type)),t.xp6(1),t.Q6J("ngIf","card"===i.data.layoutOptions.type)("ngIfElse",e)}}function It(n,r){1&n&&(t.TgZ(0,"div",9)(1,"div",10),t._uU(2,"Nessuno script disponibile con questi criteri di ricerca!"),t.qZA()())}let B=(()=>{class n{constructor(e,i,s,o,c){this.scriptListService=e,this.scriptManagerService=i,this.toastService=s,this.router=o,this.changeDetectorRef=c,this.isActive=!0,this.highlightScriptId=0,this.orderedBy="date",this.reversed=!1,this.scriptIdPendingRequest=0,this.justChangedList=[],this.scriptBaseUrl="",this.renderScriptList=[];const T=this.scriptListService.listInputs;if(!T)throw new Error("Missing script list data!");this.data=T}ngOnInit(){var e=this;this.scriptBaseUrl=window.location.protocol+"//"+window.location.host+this.router.url.split("?")[0],this.createList(),this.listInputsSubscription=this.scriptListService.getListInputsObservable().subscribe(i=>{this.resetJustChangedList(),this.data=i,this.orderList(),this.changeDetectorRef.detectChanges()}),this.scriptButtonSubscription=this.scriptManagerService.getButtonObservable().subscribe(function(){var i=(0,g.Z)(function*(s){e.isActive&&(yield e.manageButtonClick(s.id,s.action))});return function(s){return i.apply(this,arguments)}}())}ngOnChanges(e){e.list&&!e.list.firstChange&&(this.resetJustChangedList(),this.orderedBy="date",this.reversed=!1,this.createList()),e.isActive&&!e.isActive.firstChange&&!this.isActive&&this.resetJustChangedList()}createList(){this.renderScriptList=this.list.map(e=>({...e,needParent:!this.checkParentDependencies(e),isParent:!this.checkChildDependencies(e),justChanged:this.justChangedList.includes(e.scriptId),installed:this.data.installedList.includes(e.scriptId)})),this.renderScriptList.length&&this.orderList()}orderList(){let e=!1;"date"===this.data.layoutOptions.orderBy?"date"!==this.orderedBy&&(this.orderedBy="date",this.renderScriptList.sort((i,s)=>i.scriptId<s.scriptId?-1:1),e=!0):"installed"===this.data.layoutOptions.orderBy?"installed"!==this.orderedBy&&(this.orderedBy="installed",this.renderScriptList.sort((i,s)=>i.rank<s.rank?-1:1),e=!0):"az"!==this.orderedBy&&(this.orderedBy="az",this.renderScriptList.sort((i,s)=>i.name>s.name?1:s.name>i.name?-1:0),e=!0),this.data.layoutOptions.reverse?this.reversed?e&&this.renderScriptList.reverse():(this.reversed=!0,this.renderScriptList.reverse()):this.reversed&&(this.reversed=!1,this.renderScriptList.reverse())}checkParentDependencies(e){return 0===e.parentIdList.length||e.parentIdList.every(i=>this.data.installedList.includes(i))}checkChildDependencies(e){return 0===e.childIdList.length||e.childIdList.every(i=>!this.data.installedList.includes(i))}manageButtonClick(e,i){var s=this;return(0,g.Z)(function*(){if(s.scriptIdPendingRequest>0)return void s.toastService.advice(U.V.REQUEST_PENDING);const o=s.renderScriptList.find(T=>T.scriptId===e);s.scriptIdPendingRequest=e,(yield s.scriptManagerService.manage(s.data.targetInfo.targetId,s.data.targetInfo.targetType,e,i))?(o.installed=i===d.n0.INSTALL,s.toggleJustChangedList(e,o)):s.toastService.advice(U.V.GENERIC),s.scriptIdPendingRequest=0,s.changeDetectorRef.detectChanges()})()}toggleJustChangedList(e,i){this.justChangedList.includes(e)?(this.justChangedList.splice(this.justChangedList.indexOf(e),1),i.justChanged=!1):(this.justChangedList.push(e),i.justChanged=!0)}resetJustChangedList(){for(const e of this.justChangedList){const i=this.renderScriptList.find(s=>s.scriptId===e);i&&(i.justChanged=!1)}this.justChangedList=[]}ngOnDestroy(){this.listInputsSubscription.unsubscribe(),this.scriptButtonSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(E.o),t.Y36(A.E),t.Y36(w.k),t.Y36(C.F0),t.Y36(t.sBO))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-script-list"]],inputs:{list:"list",isActive:"isActive",highlightScriptId:"highlightScriptId"},features:[t.TTD],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["emptyList",""],[1,"list-unstyled","script-list","d-grid","mb-0",3,"ngClass"],["scriptPanel",""],[4,"ngFor","ngForOf"],["li",""],[3,"script","installed","highlighted","scriptIdPendingRequest","scriptBaseUrl","permission","needParent","isParent"],["class","border-bottom",4,"ngFor","ngForOf"],[1,"border-bottom"],[1,"container","alert","alert-primary","mb-0"],[1,"fw-bold","text-center"]],template:function(e,i){if(1&e&&(t.YNc(0,kt,5,8,"ng-container",0),t.YNc(1,It,3,0,"ng-template",null,1,t.W1O)),2&e){const s=t.MAs(2);t.Q6J("ngIf",i.renderScriptList.length)("ngIfElse",s)}},dependencies:[l.mk,l.sg,l.O5,ht,St],styles:[".script-list[_ngcontent-%COMP%]:not(.list-panel){gap:1rem}.script-list.list-panel[_ngcontent-%COMP%]{max-width:1100px}.script-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{min-width:0;min-height:0}.script-list[_ngcontent-%COMP%]   li[data-highlighted=true][_ngcontent-%COMP%]{order:-4!important}.script-list.installed-first[_ngcontent-%COMP%]:not(.ffmobile-first)   [data-installed=true][_ngcontent-%COMP%]:not([data-justchanged=true]), .script-list.installed-first[_ngcontent-%COMP%]:not(.ffmobile-first)   [data-installed=false][data-justchanged=true][_ngcontent-%COMP%]{order:-1}.script-list.installed-first.ffmobile-first[_ngcontent-%COMP%]   li[data-installed=true][_ngcontent-%COMP%]:not([data-justchanged=true])[data-ffmobile=true], .script-list.installed-first.ffmobile-first[_ngcontent-%COMP%]   li[data-installed=false][data-justchanged=true][data-ffmobile=true][_ngcontent-%COMP%]{order:-3}.script-list.installed-first.ffmobile-first[_ngcontent-%COMP%]   li[data-installed=true][_ngcontent-%COMP%]:not([data-justchanged=true])[data-ffmobile=false], .script-list.installed-first.ffmobile-first[_ngcontent-%COMP%]   li[data-installed=false][data-justchanged=true][data-ffmobile=false][_ngcontent-%COMP%]{order:-2}.script-list.ffmobile-first[_ngcontent-%COMP%]   [data-ffmobile=true][_ngcontent-%COMP%]{order:-1}@media (min-width: 500px){.script-list[_ngcontent-%COMP%]:not(.list-panel){grid-template-columns:repeat(auto-fill,minmax(420px,1fr))}}@media (min-width: 960px){.script-list[_ngcontent-%COMP%]:not(.list-panel){gap:1.5rem}}"],changeDetection:0}),n})();const qt=["app-script-filters",""];function Ft(n,r){if(1&n&&(t.ynx(0),t.TgZ(1,"option",22),t._uU(2),t.qZA(),t.BQk()),2&n){const e=r.$implicit;t.xp6(1),t.Q6J("value",e[0]),t.xp6(1),t.Oqu(e[1].name)}}function Et(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",23),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.resetCustomFilter())}),t._uU(1,"clear "),t.qZA()}}let Jt=(()=>{class n{constructor(){this.filterDisabled=!0,this.filterChangeEvent=new t.vpe,this.devs=Object.entries(f.$m).filter(e=>e[1].active),this.selectedDev="all",this.customFilterValue="",this.filters={}}ngOnInit(){}resetCustomFilter(){0!==this.customFilterValue.length&&(this.customFilterValue="",this.onChangeSingleFilter(this.customFilterValue,"keywords"))}onChangeSingleFilter(e,i){if(!this.filterDisabled&&e!==this.filters[i]){if("onlyInstalled"===i)e?this.filters[i]=!0:delete this.filters[i];else if("keywords"!==i&&"all"===e&&(e=""),e)this.filters[i]=e;else{if(!this.filters.hasOwnProperty(i))return;delete this.filters[i]}this.filterChangeEvent.emit(this.filters)}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["","app-script-filters",""]],inputs:{filterDisabled:"filterDisabled"},outputs:{filterChangeEvent:"filterChangeEvent"},attrs:qt,decls:29,vars:8,consts:[[1,"mb-0","h5"],[1,"flat-icon","green"],[1,"material-icons"],[1,"filters","list-unstyled","my-auto"],[1,"author-filter","mt-2"],["for","author-filter"],["id","author-filter",1,"form-select","form-select-sm",3,"disabled","ngModel","ngModelChange"],["value","all"],[4,"ngFor","ngForOf"],[1,"custom-filter","mt-2"],["for","custom-filter"],[1,"input-group","input-group-sm","position-relative"],[1,"input-group-text",3,"disabled","click"],[1,"material-icons-outlined","icon-small"],["class","material-icons d-block icon-small text-danger position-absolute reset-custom-filter cursor-pointer",3,"click",4,"ngIf"],["type","text","placeholder","Cerca...","id","custom-filter",1,"form-control",3,"ngModel","disabled","ngModelChange","keyup.enter"],["customFilter",""],[1,"installed-filter","mt-2"],[1,"form-check"],["type","checkbox","id","installed-filter",1,"form-check-input",3,"disabled","change"],["installedFilter",""],["for","installed-filter",1,"form-check-label"],[3,"value"],[1,"material-icons","d-block","icon-small","text-danger","position-absolute","reset-custom-filter","cursor-pointer",3,"click"]],template:function(e,i){if(1&e){const s=t.EpF();t.TgZ(0,"div",0),t._uU(1,"Applica un filtro"),t.qZA(),t.TgZ(2,"div",1)(3,"span",2),t._uU(4,"filter_alt"),t.qZA()(),t.TgZ(5,"ul",3)(6,"li",4)(7,"label",5),t._uU(8,"Autore:"),t.qZA(),t.TgZ(9,"select",6),t.NdJ("ngModelChange",function(c){return i.onChangeSingleFilter(c,"dev")}),t.TgZ(10,"option",7),t._uU(11,"Tutti"),t.qZA(),t.YNc(12,Ft,3,2,"ng-container",8),t.qZA()(),t.TgZ(13,"li",9)(14,"label",10),t._uU(15,"Parola chiave:"),t.qZA(),t.TgZ(16,"div",11)(17,"button",12),t.NdJ("click",function(){t.CHM(s);const c=t.MAs(22);return t.KtG(i.onChangeSingleFilter(c.value.trim(),"keywords"))}),t.TgZ(18,"span",13),t._uU(19,"search"),t.qZA()(),t.YNc(20,Et,2,0,"div",14),t.TgZ(21,"input",15,16),t.NdJ("ngModelChange",function(c){return i.customFilterValue=c})("keyup.enter",function(){t.CHM(s);const c=t.MAs(22);return t.KtG(i.onChangeSingleFilter(c.value.trim(),"keywords"))}),t.qZA()()(),t.TgZ(23,"li",17)(24,"div",18)(25,"input",19,20),t.NdJ("change",function(){t.CHM(s);const c=t.MAs(26);return t.KtG(i.onChangeSingleFilter(c.checked,"onlyInstalled"))}),t.qZA(),t.TgZ(27,"label",21),t._uU(28," Mostra solo script installati "),t.qZA()()()()}2&e&&(t.xp6(9),t.Q6J("disabled",i.filterDisabled)("ngModel",i.selectedDev),t.xp6(3),t.Q6J("ngForOf",i.devs),t.xp6(5),t.Q6J("disabled",i.filterDisabled),t.xp6(3),t.Q6J("ngIf",i.customFilterValue.trim().length>0),t.xp6(1),t.Q6J("ngModel",i.customFilterValue)("disabled",i.filterDisabled),t.xp6(4),t.Q6J("disabled",i.filterDisabled))},dependencies:[l.sg,l.O5,p.YN,p.Kr,p.Fj,p.EJ,p.JJ,p.On],styles:[".flat-icon[_ngcontent-%COMP%]{position:absolute;top:.75rem;right:1rem}label[_ngcontent-%COMP%]{font-size:.9rem}#custom-filter[_ngcontent-%COMP%]{padding-right:calc(.5rem + 26px)}.reset-custom-filter[_ngcontent-%COMP%]{top:calc(50% - 10px);right:5px;z-index:6}.custom-filter[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]   .material-icons-outlined[_ngcontent-%COMP%]{margin-top:1px}"]}),n})();const wt=["app-script-layouts",""];let Nt=(()=>{class n{constructor(e){this.scriptLayoutService=e,this.layoutDisabled=!0,this.layoutOptionsEvent=new t.vpe,this.layoutOptions=this.scriptLayoutService.options}ngOnInit(){}changeTypeOption(e){!this.layoutDisabled&&this.layoutOptions.type!==e&&(this.layoutOptions.type=e,this.emitOptions())}changeOption(){this.layoutDisabled||this.emitOptions()}emitOptions(){this.scriptLayoutService.options=this.layoutOptions,this.layoutOptionsEvent.emit(this.layoutOptions)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(F))},n.\u0275cmp=t.Xpm({type:n,selectors:[["","app-script-layouts",""]],inputs:{layoutDisabled:"layoutDisabled"},outputs:{layoutOptionsEvent:"layoutOptionsEvent"},attrs:wt,decls:35,vars:10,consts:[[1,"mb-0","h5"],[1,"layout-type-icons","d-flex","align-items-center"],[1,"flat-icon",3,"ngClass","click"],[1,"material-icons","d-block"],[1,"flat-icon","ms-2",3,"ngClass","click"],[1,"filters","list-unstyled","my-auto"],[1,"order-type","mt-2"],["for","order-type"],["id","order-type",1,"form-select","form-select-sm",3,"disabled","ngModel","ngModelChange"],["value","az","selected",""],["value","date"],["value","installed"],[1,"order-reverse","mt-2"],[1,"form-check"],["type","checkbox","id","order-reverse",1,"form-check-input",3,"disabled","ngModel","ngModelChange"],["for","order-reverse",1,"form-check-label"],[1,"ffmobile-first","mt-2"],["type","checkbox","id","ffmobile-first","checked","",1,"form-check-input",3,"disabled","ngModel","ngModelChange"],["for","ffmobile-first",1,"form-check-label"],[1,"installed-first","mt-2"],["type","checkbox","id","installed-first","checked","",1,"form-check-input",3,"disabled","ngModel","ngModelChange"],["for","installed-first",1,"form-check-label"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t._uU(1,"Opzioni di layout"),t.qZA(),t.TgZ(2,"div",1)(3,"div",2),t.NdJ("click",function(){return i.changeTypeOption("card")}),t.TgZ(4,"span",3),t._uU(5,"apps"),t.qZA()(),t.TgZ(6,"div",4),t.NdJ("click",function(){return i.changeTypeOption("list")}),t.TgZ(7,"span",3),t._uU(8,"view_list"),t.qZA()()(),t.TgZ(9,"ul",5)(10,"li",6)(11,"label",7),t._uU(12,"Criterio:"),t.qZA(),t.TgZ(13,"select",8),t.NdJ("ngModelChange",function(o){return i.layoutOptions.orderBy=o})("ngModelChange",function(){return i.changeOption()}),t.TgZ(14,"option",9),t._uU(15,"Alfabetico"),t.qZA(),t.TgZ(16,"option",10),t._uU(17,"Data di creazione"),t.qZA(),t.TgZ(18,"option",11),t._uU(19,"Numero di installazioni"),t.qZA()()(),t.TgZ(20,"li",12)(21,"div",13)(22,"input",14),t.NdJ("ngModelChange",function(o){return i.layoutOptions.reverse=o})("ngModelChange",function(){return i.changeOption()}),t.qZA(),t.TgZ(23,"label",15),t._uU(24," Inverti l'ordinamento "),t.qZA()()(),t.TgZ(25,"li",16)(26,"div",13)(27,"input",17),t.NdJ("ngModelChange",function(o){return i.layoutOptions.ffmobileFirst=o})("ngModelChange",function(){return i.changeOption()}),t.qZA(),t.TgZ(28,"label",18),t._uU(29," Mostra prima gli script per mobile "),t.qZA()()(),t.TgZ(30,"li",19)(31,"div",13)(32,"input",20),t.NdJ("ngModelChange",function(o){return i.layoutOptions.installedFirst=o})("ngModelChange",function(){return i.changeOption()}),t.qZA(),t.TgZ(33,"label",21),t._uU(34," Mostra prima gli script installati "),t.qZA()()()()),2&e&&(t.xp6(3),t.Q6J("ngClass",i.layoutDisabled?"card"===i.layoutOptions.type?"gray":"outline-gray":"card"===i.layoutOptions.type?"indigo cursor-pointer":"outline-indigo cursor-pointer"),t.xp6(3),t.Q6J("ngClass",i.layoutDisabled?"card"===i.layoutOptions.type?"outline-gray":"gray":"card"===i.layoutOptions.type?"outline-indigo cursor-pointer":"indigo cursor-pointer"),t.xp6(7),t.Q6J("disabled",i.layoutDisabled)("ngModel",i.layoutOptions.orderBy),t.xp6(9),t.Q6J("disabled",i.layoutDisabled)("ngModel",i.layoutOptions.reverse),t.xp6(5),t.Q6J("disabled",i.layoutDisabled)("ngModel",i.layoutOptions.ffmobileFirst),t.xp6(5),t.Q6J("disabled",i.layoutDisabled)("ngModel",i.layoutOptions.installedFirst))},dependencies:[l.mk,p.YN,p.Kr,p.Wl,p.EJ,p.JJ,p.On],styles:[".layout-type-icons[_ngcontent-%COMP%]{position:absolute;top:.75rem;right:1rem}label[_ngcontent-%COMP%]{font-size:.9rem}"]}),n})();var zt=a(4464);const Qt=["app-script-pageinfo",""];function Bt(n,r){1&n&&t.GkF(0)}const Dt=function(n,r){return{$implicit:n,link:r,type:"forum"}};function Rt(n,r){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"p",9),t._uU(2," Questo pannello consente di gestire l'installazione e la rimozione degli "),t.TgZ(3,"em"),t._uU(4,"script su un forum"),t.qZA(),t._uU(5," di cui si possiede l'amministrazione. Prima di compiere qualsiasi operazione \xe8 necessario "),t.TgZ(6,"em"),t._uU(7,"selezionare il forum"),t.qZA(),t._uU(8," su cui agire. Uno script per forum \xe8 "),t.TgZ(9,"em"),t._uU(10,"attivo per tutti gli utenti"),t.qZA(),t._uU(11," che visitano il forum su cui \xe8 installato, influenzando pertanto l'esperienza di navigazione di molti. "),t.TgZ(12,"a",10),t.NdJ("click",function(){t.CHM(e),t.oxw();const s=t.MAs(6);return t.KtG(s.open())}),t.qZA()(),t.YNc(13,Bt,1,0,"ng-container",11),t.BQk()}if(2&n){const e=t.oxw(),i=t.MAs(4);t.xp6(12),t.Q6J("innerText",e.readMore),t.xp6(1),t.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",t.WLB(3,Dt,(null==e.forum?null:e.forum.domain)||"-",(null==e.forum?null:e.forum.url)||""))}}function Yt(n,r){1&n&&t.GkF(0)}const jt=function(n,r){return{$implicit:n,link:r,type:"profilo"}};function Ht(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"p",9),t._uU(1," Questo pannello consente di gestire l'installazione e la rimozione degli "),t.TgZ(2,"em"),t._uU(3,"script sul profilo "),t.qZA(),t._uU(4," con cui si \xe8 loggati. Uno script per profilo \xe8 legato all'account su cui \xe8 installato: ci\xf2 significa che \xe8 "),t.TgZ(5,"em"),t._uU(6,"attivo su tutti i forum"),t.qZA(),t._uU(7," visitati con quell'account, senza in genere influenzare l'esperienza di navigazione di altri, con l'eccezione di alcuni elementi limitati alla pagina profilo. "),t.TgZ(8,"a",10),t.NdJ("click",function(){t.CHM(e),t.oxw();const s=t.MAs(6);return t.KtG(s.open())}),t.qZA()(),t.YNc(9,Yt,1,0,"ng-container",11)}if(2&n){const e=t.oxw(),i=t.MAs(4);t.xp6(8),t.Q6J("innerText",e.readMore),t.xp6(1),t.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",t.WLB(3,jt,e.profile.user.nickname,e.profile.user.url))}}function Kt(n,r){if(1&n&&t._UZ(0,"a",24),2&n){const e=t.oxw(),s=e.$implicit;t.Q6J("href",e.link,t.LSH)("innerHTML",s,t.oJD)}}function Gt(n,r){1&n&&t._UZ(0,"div",25),2&n&&t.Q6J("innerText","-")}const $t=function(){return{animation:"shift-away",theme:"popover"}};function Wt(n,r){if(1&n&&(t.TgZ(0,"div",26),t._uU(1,"priority_high"),t.qZA()),2&n){const e=t.oxw(2);t.Q6J("appTippy",e.scriptTip)("tippyProps",t.DdM(2,$t))}}function Vt(n,r){if(1&n&&(t.TgZ(0,"div",12)(1,"div",13),t.YNc(2,Kt,1,2,"a",14),t.YNc(3,Gt,1,1,"ng-template",null,15,t.W1O),t.TgZ(5,"div",16),t._UZ(6,"span",17),t.TgZ(7,"span",18),t._uU(8," selezionato"),t.qZA()()(),t.TgZ(9,"div",19)(10,"div",20),t._UZ(11,"div",21),t.YNc(12,Wt,2,3,"div",22),t.qZA(),t.TgZ(13,"div",16)(14,"span"),t._uU(15,"script"),t.qZA(),t._UZ(16,"span",23),t.qZA()()()),2&n){const e=r.link,i=r.type,s=t.MAs(4),o=t.oxw();t.xp6(2),t.Q6J("ngIf",e)("ngIfElse",s),t.xp6(4),t.Q6J("innerText",i),t.xp6(5),t.Q6J("ngClass",o.installed>o.scriptMaxSuggestedNumber?"text-danger":"text-success")("innerText",o.installed),t.xp6(1),t.Q6J("ngIf",o.installed>o.scriptMaxSuggestedNumber),t.xp6(4),t.Q6J("innerText"," installat"+(1===o.installed?"o":"i"))}}let Xt=(()=>{class n{constructor(){this.isForum=!1,this.installed=0,this.scriptMaxSuggestedNumber=9,this.scriptTip="Installare un numero elevato di script aumenta il rischio di incompatibilit\xe0 e il tempo di caricamento della pagina. Si dovrebbero disinstallare gli script non utilizzati o meno utili!",this.readMore=J.f}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["","app-script-pageinfo",""]],inputs:{isForum:"isForum",forum:"forum",profile:"profile",installed:"installed"},attrs:Qt,decls:197,vars:3,consts:[[4,"ngIf","ngIfElse"],["profileInfo",""],["infoTemplate",""],["title","Pannello gestione script","size","xl"],["modal",""],[1,"fst-italic"],[1,"mb-1"],[1,"fw-bold","text-decoration-underline"],[1,"mb-0"],[1,"mb-0","text-justify"],["role","button",1,"cursor-pointer",3,"innerText","click"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"row","my-auto","py-3"],[1,"col-6","border-end","text-center","d-flex","flex-column","align-items-center","min-w-0"],["class","d-block fs-lg lh-1 text-truncate text-uppercase mw-100","target","_blank",3,"href","innerHTML",4,"ngIf","ngIfElse"],["noLink",""],[1,"fv-small-caps"],[3,"innerText"],[1,"d-none","d-sm-inline"],[1,"col-6","text-center"],[1,"position-relative"],[1,"fs-lg","lh-1","text-uppercase",3,"ngClass","innerText"],["class","d-block text-danger material-icons alert-icon position-absolute cursor-pointer",3,"appTippy","tippyProps",4,"ngIf"],[1,"d-none","d-sm-inline",3,"innerText"],["target","_blank",1,"d-block","fs-lg","lh-1","text-truncate","text-uppercase","mw-100",3,"href","innerHTML"],[1,"fs-lg","lh-1","text-uppercase",3,"innerText"],[1,"d-block","text-danger","material-icons","alert-icon","position-absolute","cursor-pointer",3,"appTippy","tippyProps"]],template:function(e,i){if(1&e&&(t.YNc(0,Rt,14,6,"ng-container",0),t.YNc(1,Ht,10,6,"ng-template",null,1,t.W1O),t.YNc(3,Vt,17,7,"ng-template",null,2,t.W1O),t.TgZ(5,"app-modal",3,4)(7,"p"),t._uU(8," Il pannello di gestione degli script consente di "),t.TgZ(9,"strong"),t._uU(10,"installare e disinstallare script"),t.qZA(),t._uU(11," su un forum o un profilo. "),t.qZA(),t.TgZ(12,"h6",5),t._uU(13,"Cos'\xe8 uno script?"),t.qZA(),t.TgZ(14,"p"),t._uU(15," Uno script \xe8 un insieme di codici che permette l'aggiunta di "),t.TgZ(16,"strong"),t._uU(17,"nuove funzionalit\xe0 o il miglioramento di quelle esistenti"),t.qZA(),t._uU(18,". Il codice dello script, una volta installato, viene eseguito nelle varie pagine durante la normale navigazione. Generalmente si tratta di codice "),t.TgZ(19,"em"),t._uU(20,"HTML (il corpo), CSS (i vestiti) e Javascript (il cervello)"),t.qZA(),t._uU(21,", che insieme formano il c.d. "),t.TgZ(22,"em"),t._uU(23,"frontend"),t.qZA(),t._uU(24,"; tuttavia, gli script pi\xf9 complessi possono prevedere anche la presenza di un "),t.TgZ(25,"em"),t._uU(26,"backend"),t.qZA(),t._uU(27,", ossia in genere il salvataggio di informazioni o l'esecuzione di operazioni da parte di un server. "),t.qZA(),t.TgZ(28,"h6",5),t._uU(29,"Lista script"),t.qZA(),t.TgZ(30,"p",6),t._uU(31," La lista degli script \xe8 un "),t.TgZ(32,"strong"),t._uU(33,"elenco di tutti gli script disponibili"),t.qZA(),t._uU(34," per il forum o il profilo selezionato. A seconda del layout scelto tramite i pulsanti nell'apposita area "),t.TgZ(35,"em"),t._uU(36,"Opzioni di layout"),t.qZA(),t._uU(37,", la lista si presenta come insieme di "),t.TgZ(38,"em"),t._uU(39,"card"),t.qZA(),t._uU(40," o di "),t.TgZ(41,"em"),t._uU(42,"panel"),t.qZA(),t._uU(43,". Nel primo caso, ogni "),t.TgZ(44,"em"),t._uU(45,"card"),t.qZA(),t._uU(46," \xe8 dedicata ad uno script e contiene tutte le sue informazioni; nel secondo caso ad ogni script \xe8 dedicato un "),t.TgZ(47,"em"),t._uU(48,"panel"),t.qZA(),t._uU(49,", nella cui area sempre visibile sono riportate le sole informazioni essenziali, mentre nella parte normalmente nascosta sono inseriti tutti i dettagli. Per espandere o chiudere un "),t.TgZ(50,"em"),t._uU(51,"panel"),t.qZA(),t._uU(52," \xe8 sufficiente cliccare sull'area principale, il c.d. "),t.TgZ(53,"em"),t._uU(54,"header"),t.qZA(),t._uU(55,"."),t._UZ(56,"br")(57,"br"),t._uU(58,"Per ogni script sono presenti i seguenti pulsanti: "),t.qZA(),t.TgZ(59,"ul")(60,"li")(61,"em"),t._uU(62,"installa"),t.qZA(),t._uU(63,": questo pulsante, visibile solo quando lo script "),t.TgZ(64,"span",7),t._uU(65,"non \xe8 ancora installato"),t.qZA(),t._uU(66,", permette, se cliccato, di "),t.TgZ(67,"strong"),t._uU(68,"aggiungere"),t.qZA(),t._uU(69," il relativo script al forum o profilo selezionato; "),t.qZA(),t.TgZ(70,"li")(71,"em"),t._uU(72,"disinstalla"),t.qZA(),t._uU(73,": questo pulsante, visibile solo quando lo script \xe8 "),t.TgZ(74,"span",7),t._uU(75,"gi\xe0 installato"),t.qZA(),t._uU(76,", permette, se cliccato, di "),t.TgZ(77,"strong"),t._uU(78,"rimuovere"),t.qZA(),t._uU(79," lo script dal forum o profilo selezionato; "),t.qZA(),t.TgZ(80,"li")(81,"em"),t._uU(82,"impostazioni"),t.qZA(),t._uU(83,": alcuni script richiedono o consentono un'ulteriore personalizzazione. Cliccando questo pulsante, visibile solo quando lo script \xe8 "),t.TgZ(84,"span",7),t._uU(85,"gi\xe0 installato"),t.qZA(),t._uU(86,", si viene indirizzati nella pagina dedicata alle "),t.TgZ(87,"strong"),t._uU(88,"impostazioni dello script"),t.qZA(),t._uU(89,"; "),t.qZA(),t.TgZ(90,"li")(91,"em"),t._uU(92,"guida"),t.qZA(),t._uU(93,": molti script possiedono una guida dedicata che ne esplicita il funzionamento e le eventuali personalizzazioni possibili. Cliccando questo pulsante si viene indirizzati alla pagina contenente la guida dello script. "),t.qZA()(),t.TgZ(94,"h6",5),t._uU(95,"Opzioni di layout"),t.qZA(),t.TgZ(96,"p",6),t._uU(97," Nell'area dedicata alle "),t.TgZ(98,"em"),t._uU(99,"opzioni di layout"),t.qZA(),t._uU(100," sono presenti alcune personalizzazioni che \xe8 possibile applicare alla lista degli script: "),t.qZA(),t.TgZ(101,"ul")(102,"li")(103,"em"),t._uU(104,"layout"),t.qZA(),t._uU(105,": tramite le due icone in alto a destra, \xe8 possibile optare per la visualizzazione a "),t.TgZ(106,"em"),t._uU(107,"card"),t.qZA(),t._uU(108," o quella a "),t.TgZ(109,"em"),t._uU(110,"panel"),t.qZA(),t._uU(111,"; "),t.qZA(),t.TgZ(112,"li")(113,"em"),t._uU(114,"criterio"),t.qZA(),t._uU(115,": tramite questo select, \xe8 possibile stabilire secondo quale criterio saranno ordinati gli script nella lista. Il criterio "),t.TgZ(116,"em"),t._uU(117,"alfabetico"),t.qZA(),t._uU(118," ordina gli script per nome, il criterio "),t.TgZ(119,"em"),t._uU(120,"data di creazione"),t.qZA(),t._uU(121," per data di inserimento e il criterio "),t.TgZ(122,"em"),t._uU(123,"numero di installazioni"),t.qZA(),t._uU(124," per numero di forum o profili che hanno aggiunto i vari script; "),t.qZA(),t.TgZ(125,"li")(126,"em"),t._uU(127,"inverti l'ordinamento"),t.qZA(),t._uU(128,": abilitando questo checkbox, l'ordinamento viene invertito. Ad esempio, supponendo di utilizzare il criterio "),t.TgZ(129,"em"),t._uU(130,"alfabetico"),t.qZA(),t._uU(131,", invertendo l'ordinamento gli script saranno mostrati secondo un elenco Z-A, anzich\xe9 A-Z; "),t.qZA(),t.TgZ(132,"li")(133,"em"),t._uU(134,"mostra prima gli script per mobile"),t.qZA(),t._uU(135,": spuntando questo checkbox, vengono mostrati prima gli script compatibili con layout FFMobile; "),t.qZA(),t.TgZ(136,"li")(137,"em"),t._uU(138,"mostra prima gli script installati"),t.qZA(),t._uU(139,": se questa casella \xe8 attiva, vengono inseriti prima gli script gi\xe0 installati. "),t.qZA()(),t.TgZ(140,"h6",5),t._uU(141,"Filtri"),t.qZA(),t.TgZ(142,"p",6),t._uU(143," Nell'area dedicata ai "),t.TgZ(144,"em"),t._uU(145,"filtri"),t.qZA(),t._uU(146," \xe8 possibile stabilire alcuni criteri di ricerca tra i vari script: "),t.qZA(),t.TgZ(147,"ul")(148,"li")(149,"em"),t._uU(150,"autore"),t.qZA(),t._uU(151,": tramite questo select, \xe8 possibile filtrare gli script per l'account che li ha creati; "),t.qZA(),t.TgZ(152,"li")(153,"em"),t._uU(154,"parola chiave"),t.qZA(),t._uU(155,": inserendo delle parole chiave in questo campo, \xe8 possibile cercare tra i vari script quelli che, nel nome o nella descrizione, contengono tali parole; "),t.qZA(),t.TgZ(156,"li")(157,"em"),t._uU(158,"mostra solo script installati"),t.qZA(),t._uU(159,": abilitando questo checkbox, vengono evidenziati esclusivamente gli script gi\xe0 installati. "),t.qZA()(),t.TgZ(160,"h6",5),t._uU(161,"Compatibilit\xe0 con i layout"),t.qZA(),t.TgZ(162,"p"),t._uU(163," Data la presenza di diversi layout e la parziale mancanza di coordinamento tra le informazioni e la struttura degli stessi, alcuni script potrebbero non risultare disponibili per tutti i layout. \xc8 possibile verificare per quali layout \xe8 compatibile uno script mediante le icone presenti nel "),t.TgZ(164,"em"),t._uU(165,"footer"),t.qZA(),t._uU(166," delle "),t.TgZ(167,"em"),t._uU(168,"card"),t.qZA(),t._uU(169,", ovvero espandendo il "),t.TgZ(170,"em"),t._uU(171,"panel"),t.qZA(),t._uU(172," per visualizzarne i dettagli. Nel primo caso, le informazioni vengono mostrate al passaggio del mouse, o, da dispositivi touch, al tocco dell'icona a forma di smartphone, se lo script \xe8 compatibile con il layout FFMobile, oppure, in caso contrario, a forma di computer. Nel secondo caso, \xe8 presente l'elenco dei layout compatibili sotto l'anteprima dello script. "),t.qZA(),t.TgZ(173,"h6",5),t._uU(174,"Script per forum"),t.qZA(),t.TgZ(175,"p"),t._uU(176," Alcuni script sono pensati e realizzati per essere installati sui forum. In questo caso, prima di procedere alla gestione degli stessi, \xe8 necessario "),t.TgZ(177,"strong"),t._uU(178,"selezionare il forum"),t.qZA(),t._uU(179," su cui agire. Affinch\xe9 si possa installare, rimuovere o modificare uno script su un forum, il profilo con cui \xe8 stato eseguito il login deve possedere poteri di "),t.TgZ(180,"strong"),t._uU(181,"amministrazione del forum oppure di amministrazione degli script"),t.qZA(),t._uU(182,". Uno script per forum si differenzia dagli script per utenti in quanto viene eseguito per "),t.TgZ(183,"strong"),t._uU(184,"tutti gli utenti e visitatori"),t.qZA(),t._uU(185," del forum su cui \xe8 installato. Questo tipo di script, tuttavia, non produce effetti nel momento in cui si passa su un altro forum, se non nel caso in cui anche quest'ultimo lo abbia installato. "),t.qZA(),t.TgZ(186,"h6",5),t._uU(187,"Script per utenti"),t.qZA(),t.TgZ(188,"p"),t._uU(189," Alcuni script sono pensati e realizzati per essere installati sui profili. Tali script rimangono legati all'account che li ha aggiunti e lo seguono su "),t.TgZ(190,"strong"),t._uU(191,"ogni forum"),t.qZA(),t._uU(192," che visita. Questo tipo di script, in genere, non ha effetti sugli altri account, ma si limita ad aggiungere o migliorare le funzionalit\xe0 per il solo profilo che li installa. Tuttavia, \xe8 possibile che alcuni script aggiungano degli elementi nella pagina del profilo: in questo caso, anche coloro che visualizzano tale pagina ne osservano gli effetti. "),t.qZA(),t.TgZ(193,"h6",5),t._uU(194,"Numero massimo di script installabili"),t.qZA(),t.TgZ(195,"p",8),t._uU(196),t.qZA()()),2&e){const s=t.MAs(2);t.Q6J("ngIf",i.isForum)("ngIfElse",s),t.xp6(196),t.hij(" Sebbene per il momento non sia presente un limite agli script installabili su forum o profili, occorre tuttavia considerare che all'aumentare del numero di script presenti, aumenta da un lato la possibilit\xe0 di comportamenti indesiderati dovuti a incompatibilit\xe0 tra gli script stessi, dall'altro il tempo di caricamento totale della pagina. Pur dipendendo in parte dalla natura dello script installato, uno script articolato infatti richiede comunemente pi\xf9 codice e pertanto pi\xf9 tempo per essere caricato, si ritiene che il numero totale di script aggiunti non dovrebbe eccedere ",i.scriptMaxSuggestedNumber,". Se cos\xec fosse, si suggerisce di controllare gli script presenti ed eliminare quelli non utilizzati o che si crede essere meno utili al miglioramento dell'esperienza di navigazione. ")}},dependencies:[l.mk,l.O5,l.tP,zt.z,I.$],styles:["@keyframes _ngcontent-%COMP%_blobbing{10%,12%{transform:scale(1.5,.7) translateY(.25rem)}17%{transform:scale(.7,1.5) translateY(-.125rem)}22%{transform:scale(1)}}.alert-icon[_ngcontent-%COMP%]{left:53%;bottom:-3px;animation:_ngcontent-%COMP%_blobbing 2.5s infinite}"]}),n})();function te(n,r){1&n&&(t.TgZ(0,"div",2)(1,"div",3),t._uU(2,"Ci sono dei filtri attivi!"),t.qZA()())}function ee(n,r){if(1&n&&t._UZ(0,"app-script-list",15),2&n){const e=t.oxw(3).$implicit,i=t.oxw(2);t.Q6J("list",i.scripts[e[0]])("isActive",i.shownTab===e[0]&&!i.isFilterActive)("highlightScriptId",i.highlightScriptId)}}function ie(n,r){1&n&&(t.TgZ(0,"div",16)(1,"div",17),t._uU(2,"Nessuno script disponibile!"),t.qZA()())}function ne(n,r){if(1&n&&(t.ynx(0),t.YNc(1,ee,1,3,"app-script-list",13),t.YNc(2,ie,3,0,"ng-template",null,14,t.W1O),t.BQk()),2&n){const e=t.MAs(3),i=t.oxw(2).$implicit,s=t.oxw(2);t.xp6(1),t.Q6J("ngIf",s.scripts[i[0]].length)("ngIfElse",e)}}function se(n,r){1&n&&t._UZ(0,"div",18)}function re(n,r){if(1&n&&(t.YNc(0,ne,4,2,"ng-container",11),t.YNc(1,se,1,0,"ng-template",null,12,t.W1O)),2&n){const e=t.MAs(2),i=t.oxw().$implicit,s=t.oxw(2);t.Q6J("ngIf",s.scripts.hasOwnProperty(i[0]))("ngIfElse",e)}}const oe=function(n){return{active:n}};function ae(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"li",8),t.NdJ("shown",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.onShown())}),t._UZ(1,"a",9),t.YNc(2,re,3,2,"ng-template",10),t.qZA()}if(2&n){const e=r.$implicit,i=t.oxw(2);t.Q6J("ngbNavItem",e[0])("ngClass",t.VKq(3,oe,e[0]===i.activeTab)),t.xp6(1),t.Q6J("innerText",e[1].name)}}function le(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"ul",4,5),t.NdJ("activeIdChange",function(s){t.CHM(e);const o=t.oxw();return t.KtG(o.activeTab=s)})("activeIdChange",function(s){t.CHM(e);const o=t.oxw();return t.KtG(o.onChangeTab(s))}),t.YNc(2,ae,3,5,"li",6),t.qZA(),t._UZ(3,"div",7)}if(2&n){const e=t.MAs(1),i=t.oxw();t.Q6J("activeId",i.activeTab)("destroyOnHide",!1),t.xp6(2),t.Q6J("ngForOf",i.tabs),t.xp6(1),t.Q6J("ngbNavOutlet",e)}}let ce=(()=>{class n{constructor(){this.isFilterActive=!1,this.highlightScriptTab="",this.highlightScriptId=0,this.tabs=Object.entries(f.yT),this.scripts={},this.firstRedered=!1,this.activeTab="",this.shownTab=""}ngOnInit(){this.activeTab=this.highlightScriptTab&&f.yT.hasOwnProperty(this.highlightScriptTab)?this.highlightScriptTab:"ffb",this.setFirstTabContent()}setFirstTabContent(){this.shownTab=this.activeTab,this.isFilterActive||(this.firstRedered=!0),this.scripts[this.activeTab]=this.scriptsPerTab[this.activeTab]||[]}ngOnChanges(e){e.isFilterActive&&!e.isFilterActive.firstChange&&!this.firstRedered&&(this.firstRedered=!0),e.scriptsPerTab&&!e.scriptsPerTab.firstChange&&(this.scripts={},this.setFirstTabContent())}onChangeTab(e){this.activeTab=e,this.scripts.hasOwnProperty(this.activeTab)||(this.scripts[this.activeTab]=this.scriptsPerTab[this.activeTab]||[])}onShown(){this.shownTab=this.activeTab}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-script-tabs"]],inputs:{scriptsPerTab:"scriptsPerTab",isFilterActive:"isFilterActive",highlightScriptTab:"highlightScriptTab",highlightScriptId:"highlightScriptId"},features:[t.TTD],decls:3,vars:2,consts:[["class","container alert alert-primary",4,"ngIf","ngIfElse"],["bootstrapTabs",""],[1,"container","alert","alert-primary"],[1,"text-center","fw-bold"],["ngbNav","",1,"d-flex","justify-content-center",3,"activeId","destroyOnHide","activeIdChange"],["nav","ngbNav"],["class","flex-grow-1",3,"ngbNavItem","ngClass","shown",4,"ngFor","ngForOf"],[1,"tab-content-wrapper",3,"ngbNavOutlet"],[1,"flex-grow-1",3,"ngbNavItem","ngClass","shown"],["ngbNavLink","",1,"text-center",3,"innerText"],["ngbNavContent",""],[4,"ngIf","ngIfElse"],["placeholder",""],[3,"list","isActive","highlightScriptId",4,"ngIf","ngIfElse"],["noScript",""],[3,"list","isActive","highlightScriptId"],[1,"container","alert","alert-primary","mb-0"],[1,"fw-bold","text-center"],[1,"min-vh-100"]],template:function(e,i){if(1&e&&(t.YNc(0,te,3,0,"div",0),t.YNc(1,le,4,4,"ng-template",null,1,t.W1O)),2&e){const s=t.MAs(2);t.Q6J("ngIf",i.isFilterActive&&!i.firstRedered)("ngIfElse",s)}},dependencies:[l.mk,l.sg,l.O5,u.uN,u.Pz,u.nv,u.Is,u.Vx,u.tO,u.Dy,B],styles:['.tab-content-wrapper[_ngcontent-%COMP%]{margin-top:2rem}.nav[_ngcontent-%COMP%]{max-width:1320px;background:#fff;border:1px solid #dee2e6;box-shadow:0 .125rem .25rem #00000013;border-radius:.25rem;margin:0 1rem;position:relative;z-index:1;flex-direction:column;overflow:hidden}.nav-item[_ngcontent-%COMP%]{transition:background-color .3s}.nav-item[_ngcontent-%COMP%]:not(:last-of-type){border-bottom:1px solid #dee2e6}.nav-item.active[_ngcontent-%COMP%]{background-color:#4864fe}.nav-link[_ngcontent-%COMP%]{transition:color .3s}.nav-link[_ngcontent-%COMP%]:not(.active){color:inherit!important}.nav-link.active[_ngcontent-%COMP%]{color:#fff!important}@media (min-width: 576px){.tab-content-wrapper[_ngcontent-%COMP%]{margin-top:3rem}.nav[_ngcontent-%COMP%]{flex-direction:row;overflow:initial}.nav-item[_ngcontent-%COMP%]{transition:initial;width:25%}.nav-item[_ngcontent-%COMP%]:not(:last-of-type){border-bottom:none}.nav-item.active[_ngcontent-%COMP%]{background-color:initial}.nav-item[_ngcontent-%COMP%]:nth-of-type(2).active ~ .nav-item[_ngcontent-%COMP%]:last-of-type:after{left:25%}.nav-item[_ngcontent-%COMP%]:nth-of-type(3).active ~ .nav-item[_ngcontent-%COMP%]:last-of-type:after{left:50%}.nav-item[_ngcontent-%COMP%]:last-of-type.active:after{left:75%}.nav-item[_ngcontent-%COMP%]:last-of-type:after{content:"";display:block;position:absolute;height:100%;width:25%;left:0;bottom:0;z-index:-1;border-radius:.25rem;background-color:#4864fe;transition:left .4s cubic-bezier(.5,-.2,.445,1.2)}}@media (min-width: 768px){.nav[_ngcontent-%COMP%]{margin:0 auto}}']}),n})();function pe(n,r){1&n&&(t.TgZ(0,"div",7),t._UZ(1,"app-forum-required"),t.qZA())}function de(n,r){if(1&n&&t._UZ(0,"app-script-list",12),2&n){const e=t.oxw(3);t.Q6J("list",e.scriptFilteredList)}}const ue=function(n){return{"d-none":n}};function ge(n,r){if(1&n&&(t.ynx(0),t.YNc(1,de,1,1,"app-script-list",10),t._UZ(2,"app-script-tabs",11),t.BQk()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.isFilterActive),t.xp6(1),t.Q6J("ngClass",t.VKq(6,ue,e.isFilterActive))("scriptsPerTab",e.scriptPerTab)("isFilterActive",e.isFilterActive)("highlightScriptTab",e.highlightScriptTab)("highlightScriptId",e.highlightScriptId)}}function me(n,r){if(1&n&&t._UZ(0,"app-loader",13),2&n){const e=t.oxw(2);t.Q6J("message",e.loadingMessage)}}function he(n,r){if(1&n&&(t.YNc(0,ge,3,8,"ng-container",8),t.YNc(1,me,1,1,"ng-template",null,9,t.W1O)),2&n){const e=t.MAs(2),i=t.oxw();t.Q6J("ngIf",!i.loadingMessage)("ngIfElse",e)}}const fe=[{path:"",component:(()=>{class n{constructor(e,i,s,o,c,T,ve,be){this.globalsService=e,this.activatedRoute=i,this.scriptFiltersService=s,this.scriptListService=o,this.scriptLayoutService=c,this.scriptManagerService=T,this.sidenavRightService=ve,this.urlQueryParamsService=be,this.isForum=!0,this.scriptPerTab={},this.loadingMessage="Recupero della lista script",this.isFilterActive=!1,this.activeFilters={},this.scriptFilteredList=[],this.highlightScriptId=0,this.highlightScriptTab="",this.ffuid="",this.targetType=d.D7.USER;const q=this.globalsService.credentials;if(!q)throw new Error("Missing credentials!");this.credentials=q,this.targetType=this.activatedRoute.snapshot.data.type,this.isForum=this.targetType===d.D7.FORUM,this.ffuid=q.user.ffuid}ngOnInit(){var e=this;return(0,g.Z)(function*(){e.forum=e.globalsService.forum,e.isForum&&(e.forumSubscription=e.globalsService.forumObservable.subscribe(function(){var i=(0,g.Z)(function*(s){yield e.forumObservableCallback(s)});return function(s){return i.apply(this,arguments)}}())),e.scriptManageSubscription=e.scriptManagerService.getManageObservable().subscribe(i=>{i.installed?e.response.scriptInstalledList.push(i.id):e.response.scriptInstalledList.splice(e.response.scriptInstalledList.indexOf(i.id),1)}),e.highlightScriptId=Number(e.urlQueryParamsService.getAndDeleteParam(v.RT.SCRIPT))||0,e.highlightScriptTab=e.urlQueryParamsService.getAndDeleteParam(v.RT.TAB)||"",yield e.setData()})()}forumObservableCallback(e){var i=this;return(0,g.Z)(function*(){i.loadingMessage="Recupero della lista script",i.forum=e,yield i.setData()})()}setData(){var e=this;return(0,g.Z)(function*(){if(e.isForum&&!e.forum)return e.sidenavRightService.closeOnAction=!0,void e.sidenavRightService.pushEntity({entity:J.R.forumList,detectChanges:!0});if(e.scriptListInputs={installedList:[],layoutOptions:e.scriptLayoutService.options,targetInfo:{targetId:e.isForum?e.forum.cid:e.ffuid,targetType:e.targetType}},yield e.saveResponse(yield e.scriptListService.getData(e.isForum?e.forum.cid:e.ffuid,e.targetType,!1)),e.filterList(),e.highlightScriptId>0){const i=e.response.scriptList.find(s=>s.scriptId===e.highlightScriptId);i&&(e.highlightScriptTab=i.tab)}e.loadingMessage=""})()}saveResponse(e){var i=this;return(0,g.Z)(function*(){i.response=e,i.scriptPerTab=i.scriptListService.splitTabs(i.response.scriptList),i.scriptListInputs.installedList=i.response.scriptInstalledList,i.scriptListInputs.permissions=i.isForum&&!i.forum.admin?yield i.scriptListService.getScriptPermissions():void 0,i.scriptListService.pushListInputs(i.scriptListInputs)})()}changeFilters(e){this.activeFilters=e,this.filterList()}filterList(){Object.keys(this.activeFilters).length?(this.isFilterActive=!0,this.scriptFilteredList=this.scriptFiltersService.filterScripts(this.response.scriptList,this.response.scriptInstalledList,this.activeFilters)):this.isFilterActive=!1}changeLayoutOptions(e){this.scriptListInputs.layoutOptions=e,this.scriptListService.pushListInputs(this.scriptListInputs)}ngOnDestroy(){this.forumSubscription&&this.forumSubscription.unsubscribe(),this.scriptManageSubscription&&this.scriptManageSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(O.d),t.Y36(C.gz),t.Y36(j.v),t.Y36(E.o),t.Y36(F),t.Y36(A.E),t.Y36(H.f),t.Y36(Y.J))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-script-main"]],decls:8,vars:10,consts:[[3,"pageTitle"],[1,"d-grid","script-header",3,"ngClass"],["app-script-pageinfo","",1,"flat-container","px-3","px-md-4","pt-3","info","d-flex","flex-column",3,"isForum","forum","profile","installed"],["app-script-layouts","",1,"flat-container","p-3","d-flex","flex-column","position-relative",3,"layoutDisabled","layoutOptionsEvent"],["app-script-filters","",1,"flat-container","p-3","d-flex","flex-column","position-relative",3,"filterDisabled","filterChangeEvent"],["class","container forum-required",4,"ngIf","ngIfElse"],["scriptListTemplate",""],[1,"container","forum-required"],[4,"ngIf","ngIfElse"],["loader",""],[3,"list",4,"ngIf"],[3,"ngClass","scriptsPerTab","isFilterActive","highlightScriptTab","highlightScriptId"],[3,"list"],[3,"message"]],template:function(e,i){if(1&e&&(t._UZ(0,"app-breadcrumb",0),t.TgZ(1,"div",1),t._UZ(2,"div",2),t.TgZ(3,"div",3),t.NdJ("layoutOptionsEvent",function(o){return i.changeLayoutOptions(o)}),t.qZA(),t.TgZ(4,"div",4),t.NdJ("filterChangeEvent",function(o){return i.changeFilters(o)}),t.qZA()(),t.YNc(5,pe,2,0,"div",5),t.YNc(6,he,3,2,"ng-template",null,6,t.W1O)),2&e){const s=t.MAs(7);t.Q6J("pageTitle",i.isForum?"Script per forum":"Script per utenti"),t.xp6(1),t.Q6J("ngClass",i.isFilterActive||i.isForum&&!i.forum?"":"has-tabs"),t.xp6(1),t.Q6J("isForum",i.isForum)("forum",i.forum)("profile",i.credentials)("installed",i.scriptListInputs?i.scriptListInputs.installedList.length:0),t.xp6(1),t.Q6J("layoutDisabled",i.isForum&&void 0===i.forum),t.xp6(1),t.Q6J("filterDisabled",i.isForum&&void 0===i.forum),t.xp6(1),t.Q6J("ngIf",i.isForum&&!i.forum)("ngIfElse",s)}},dependencies:[K.L,l.mk,l.O5,G.P,$.R,B,Jt,Nt,Xt,ce],styles:[".forum-required[_ngcontent-%COMP%]{margin-top:1rem;padding:0 1rem}.script-header[_ngcontent-%COMP%]{gap:1rem}.script-header[_ngcontent-%COMP%]   .flat-icon[_ngcontent-%COMP%]{top:.75rem;right:1rem}.script-header.has-tabs[_ngcontent-%COMP%]{margin-bottom:2rem}.script-header[_ngcontent-%COMP%]:not(.has-tabs){margin-bottom:1rem}@media (min-width: 576px){.forum-required[_ngcontent-%COMP%]{padding:0}.script-header.has-tabs[_ngcontent-%COMP%]{margin-bottom:3rem}}@media (min-width: 960px){.forum-required[_ngcontent-%COMP%]{margin-top:1.5rem}.script-header[_ngcontent-%COMP%]{gap:1.5rem}.script-header[_ngcontent-%COMP%]:not(.has-tabs){margin-bottom:1.5rem}}@media (min-width: 768px) and (max-width: 1499.98px){.script-header[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.info[_ngcontent-%COMP%]{grid-column:span 2}.script-layouts[_ngcontent-%COMP%], .script-filters[_ngcontent-%COMP%]{grid-row-start:2}}@media (min-width: 1500px){.script-header[_ngcontent-%COMP%]{grid-template-columns:calc(40% - 1.5rem) repeat(2,calc(30% - .75rem))}}"]}),n})()},{path:"settings",loadChildren:()=>Promise.all([a.e(70),a.e(592),a.e(939)]).then(a.bind(a,7447)).then(n=>n.ScriptSettingsModule),data:{title:"Script Settings"}}];let _e=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[Z.w,l.ez,p.u5,P.z,M.q,S.z,u.Oz,C.Bz.forChild(fe),b,m.G,h.g]}),n})()},9246:(D,y,a)=>{a.d(y,{E:()=>C});var Z=a(5861),l=a(6347),p=a(8645),P=a(3040),M=a(9121),S=a(3729),u=a(5879);let C=(()=>{class _{constructor(m,h){this.graphqlService=m,this.scriptListService=h,this.manageSubject=new p.x,this.buttonSubject=new p.x}manage(m,h,t,b){var g=this;return(0,Z.Z)(function*(){g.manageSubject.next({installed:b===S.n0.INSTALL,id:t});const O=(yield g.graphqlService.mutate({mutation:P.in,variables:{targetId:m,targetType:h,scriptId:t,action:b}})).data.scriptManage;return O||g.manageSubject.next({installed:b!==S.n0.INSTALL,id:t}),O})()}getManageObservable(){return this.manageSubject.asObservable()}getButtonObservable(){return this.buttonSubject.asObservable()}pushButtonEvent(m,h){this.buttonSubject.next({id:m,action:h})}editSettings(m,h,t,b){var g=this;return(0,Z.Z)(function*(){const v=(yield g.graphqlService.mutate({mutation:P.t6,variables:{targetId:m,targetType:h,scriptId:t,settings:b}})).data.scriptSettings;return v&&g.scriptListService.updateInstalledScriptSettings(m,h,t,b),v})()}}return _.\u0275fac=function(m){return new(m||_)(u.LFG(l.J),u.LFG(M.o))},_.\u0275prov=u.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})()}}]);